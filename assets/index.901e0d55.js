var ro=Object.defineProperty,no=Object.defineProperties;var oo=Object.getOwnPropertyDescriptors;var hr=Object.getOwnPropertySymbols;var io=Object.prototype.hasOwnProperty,ao=Object.prototype.propertyIsEnumerable;var vr=(e,t,r)=>t in e?ro(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,wt=(e,t)=>{for(var r in t||(t={}))io.call(t,r)&&vr(e,r,t[r]);if(hr)for(var r of hr(t))ao.call(t,r)&&vr(e,r,t[r]);return e},St=(e,t)=>no(e,oo(t));const so=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}};so();var bt=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Ae(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}),t}var dt={},Kr={},ut={},Jr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r){var n,o=r.Symbol;if(typeof o=="function")if(o.observable)n=o.observable;else{n=o.for("https://github.com/benlesh/symbol-observable");try{o.observable=n}catch{}}else n="@@observable";return n}})(Jr);var uo=Jr,yr=Object.prototype.toString,Yr=function(t){var r=yr.call(t),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&yr.call(t.callee)==="[object Function]"),n},Xr;if(!Object.keys){var ce=Object.prototype.hasOwnProperty,mr=Object.prototype.toString,fo=Yr,gr=Object.prototype.propertyIsEnumerable,lo=!gr.call({toString:null},"toString"),co=gr.call(function(){},"prototype"),pe=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],De=function(e){var t=e.constructor;return t&&t.prototype===e},po={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},ho=function(){if(typeof window=="undefined")return!1;for(var e in window)try{if(!po["$"+e]&&ce.call(window,e)&&window[e]!==null&&typeof window[e]=="object")try{De(window[e])}catch{return!0}}catch{return!0}return!1}(),vo=function(e){if(typeof window=="undefined"||!ho)return De(e);try{return De(e)}catch{return!1}};Xr=function(t){var r=t!==null&&typeof t=="object",n=mr.call(t)==="[object Function]",o=fo(t),i=r&&mr.call(t)==="[object String]",a=[];if(!r&&!n&&!o)throw new TypeError("Object.keys called on a non-object");var u=co&&n;if(i&&t.length>0&&!ce.call(t,0))for(var c=0;c<t.length;++c)a.push(String(c));if(o&&t.length>0)for(var b=0;b<t.length;++b)a.push(String(b));else for(var E in t)!(u&&E==="prototype")&&ce.call(t,E)&&a.push(String(E));if(lo)for(var w=vo(t),P=0;P<pe.length;++P)!(w&&pe[P]==="constructor")&&ce.call(t,pe[P])&&a.push(pe[P]);return a}}var yo=Xr,mo=Array.prototype.slice,go=Yr,br=Object.keys,he=br?function(t){return br(t)}:yo,_r=Object.keys;he.shim=function(){if(Object.keys){var t=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);t||(Object.keys=function(n){return go(n)?_r(mo.call(n)):_r(n)})}else Object.keys=he;return Object.keys||he};var bo=he,_o=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var o=42;t[r]=o;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var i=Object.getOwnPropertySymbols(t);if(i.length!==1||i[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(t,r);if(a.value!==o||a.enumerable!==!0)return!1}return!0},wr=typeof Symbol!="undefined"&&Symbol,wo=_o,So=function(){return typeof wr!="function"||typeof Symbol!="function"||typeof wr("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:wo()},Oo="Function.prototype.bind called on incompatible ",Te=Array.prototype.slice,Ao=Object.prototype.toString,Eo="[object Function]",Po=function(t){var r=this;if(typeof r!="function"||Ao.call(r)!==Eo)throw new TypeError(Oo+r);for(var n=Te.call(arguments,1),o,i=function(){if(this instanceof o){var E=r.apply(this,n.concat(Te.call(arguments)));return Object(E)===E?E:this}else return r.apply(t,n.concat(Te.call(arguments)))},a=Math.max(0,r.length-n.length),u=[],c=0;c<a;c++)u.push("$"+c);if(o=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var b=function(){};b.prototype=r.prototype,o.prototype=new b,b.prototype=null}return o},No=Po,Vr=Function.prototype.bind||No,$o=Vr,Co=$o.call(Function.call,Object.prototype.hasOwnProperty),z,se=SyntaxError,Zr=Function,Jt=TypeError,xe=function(e){try{return Zr('"use strict"; return ('+e+").constructor;")()}catch{}},Wt=Object.getOwnPropertyDescriptor;if(Wt)try{Wt({},"")}catch{Wt=null}var je=function(){throw new Jt},Mo=Wt?function(){try{return arguments.callee,je}catch{try{return Wt(arguments,"callee").get}catch{return je}}}():je,zt=So(),It=Object.getPrototypeOf||function(e){return e.__proto__},Kt={},Io=typeof Uint8Array=="undefined"?z:It(Uint8Array),Yt={"%AggregateError%":typeof AggregateError=="undefined"?z:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?z:ArrayBuffer,"%ArrayIteratorPrototype%":zt?It([][Symbol.iterator]()):z,"%AsyncFromSyncIteratorPrototype%":z,"%AsyncFunction%":Kt,"%AsyncGenerator%":Kt,"%AsyncGeneratorFunction%":Kt,"%AsyncIteratorPrototype%":Kt,"%Atomics%":typeof Atomics=="undefined"?z:Atomics,"%BigInt%":typeof BigInt=="undefined"?z:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?z:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?z:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?z:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?z:FinalizationRegistry,"%Function%":Zr,"%GeneratorFunction%":Kt,"%Int8Array%":typeof Int8Array=="undefined"?z:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?z:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?z:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":zt?It(It([][Symbol.iterator]())):z,"%JSON%":typeof JSON=="object"?JSON:z,"%Map%":typeof Map=="undefined"?z:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!zt?z:It(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?z:Promise,"%Proxy%":typeof Proxy=="undefined"?z:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?z:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?z:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!zt?z:It(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?z:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":zt?It(""[Symbol.iterator]()):z,"%Symbol%":zt?Symbol:z,"%SyntaxError%":se,"%ThrowTypeError%":Mo,"%TypedArray%":Io,"%TypeError%":Jt,"%Uint8Array%":typeof Uint8Array=="undefined"?z:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?z:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?z:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?z:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?z:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?z:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?z:WeakSet},Do=function e(t){var r;if(t==="%AsyncFunction%")r=xe("async function () {}");else if(t==="%GeneratorFunction%")r=xe("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=xe("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var o=e("%AsyncGenerator%");o&&(r=It(o.prototype))}return Yt[t]=r,r},Sr={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ee=Vr,be=Co,To=Ee.call(Function.call,Array.prototype.concat),xo=Ee.call(Function.apply,Array.prototype.splice),Or=Ee.call(Function.call,String.prototype.replace),_e=Ee.call(Function.call,String.prototype.slice),jo=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ko=/\\(\\)?/g,Ro=function(t){var r=_e(t,0,1),n=_e(t,-1);if(r==="%"&&n!=="%")throw new se("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new se("invalid intrinsic syntax, expected opening `%`");var o=[];return Or(t,jo,function(i,a,u,c){o[o.length]=u?Or(c,ko,"$1"):a||i}),o},Lo=function(t,r){var n=t,o;if(be(Sr,n)&&(o=Sr[n],n="%"+o[0]+"%"),be(Yt,n)){var i=Yt[n];if(i===Kt&&(i=Do(n)),typeof i=="undefined"&&!r)throw new Jt("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new se("intrinsic "+t+" does not exist!")},Fo=function(t,r){if(typeof t!="string"||t.length===0)throw new Jt("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Jt('"allowMissing" argument must be a boolean');var n=Ro(t),o=n.length>0?n[0]:"",i=Lo("%"+o+"%",r),a=i.name,u=i.value,c=!1,b=i.alias;b&&(o=b[0],xo(n,To([0,1],b)));for(var E=1,w=!0;E<n.length;E+=1){var P=n[E],S=_e(P,0,1),f=_e(P,-1);if((S==='"'||S==="'"||S==="`"||f==='"'||f==="'"||f==="`")&&S!==f)throw new se("property names with quotes must have matching quotes");if((P==="constructor"||!w)&&(c=!0),o+="."+P,a="%"+o+"%",be(Yt,a))u=Yt[a];else if(u!=null){if(!(P in u)){if(!r)throw new Jt("base intrinsic for "+t+" exists, but the property is not available.");return}if(Wt&&E+1>=n.length){var s=Wt(u,P);w=!!s,w&&"get"in s&&!("originalValue"in s.get)?u=s.get:u=u[P]}else w=be(u,P),u=u[P];w&&!c&&(Yt[a]=u)}}return u},Bo=Fo,Ue=Bo("%Object.defineProperty%",!0),Ge=function(){if(Ue)try{return Ue({},"a",{value:1}),!0}catch{return!1}return!1};Ge.hasArrayLengthDefineBug=function(){if(!Ge())return null;try{return Ue([],"length",{value:1}).length!==1}catch{return!0}};var qo=Ge,Wo=bo,Uo=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Go=Object.prototype.toString,Ho=Array.prototype.concat,Qr=Object.defineProperty,zo=function(e){return typeof e=="function"&&Go.call(e)==="[object Function]"},Ko=qo(),tn=Qr&&Ko,Jo=function(e,t,r,n){t in e&&(!zo(n)||!n())||(tn?Qr(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r)},en=function(e,t){var r=arguments.length>2?arguments[2]:{},n=Wo(t);Uo&&(n=Ho.call(n,Object.getOwnPropertySymbols(t)));for(var o=0;o<n.length;o+=1)Jo(e,n[o],t[n[o]],r[n[o]])};en.supportsDescriptors=!!tn;var rn=en,ie={exports:{}};typeof self!="undefined"?ie.exports=self:typeof window!="undefined"?ie.exports=window:ie.exports=Function("return this")();var Yo=ie.exports,nn=function(){return typeof bt!="object"||!bt||bt.Math!==Math||bt.Array!==Array?Yo:bt},Xo=rn,Vo=nn,Zo=function(){var t=Vo();if(Xo.supportsDescriptors){var r=Object.getOwnPropertyDescriptor(t,"globalThis");(!r||r.configurable&&(r.enumerable||!r.writable||globalThis!==t))&&Object.defineProperty(t,"globalThis",{configurable:!0,enumerable:!1,value:t,writable:!0})}else(typeof globalThis!="object"||globalThis!==t)&&(t.globalThis=t);return t},Qo=rn,ti=ie.exports,on=nn,ei=Zo,ri=on(),an=function(){return ri};Qo(an,{getPolyfill:on,implementation:ti,shim:ei});var ni=an,oi=bt&&bt.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(ut,"__esModule",{value:!0});ut.NO_IL=Ze=ut.NO=ut.MemoryStream=Pe=ut.Stream=void 0;var ii=uo,ai=ni,de=ii.default(ai.getPolyfill()),C={},Ze=ut.NO=C;function ht(){}function ve(e){for(var t=e.length,r=Array(t),n=0;n<t;++n)r[n]=e[n];return r}function si(e,t){return function(n){return e(n)&&t(n)}}function Qe(e,t,r){try{return e.f(t)}catch(n){return r._e(n),C}}var qt={_n:ht,_e:ht,_c:ht};ut.NO_IL=qt;function Ar(e){e._start=function(r){r.next=r._n,r.error=r._e,r.complete=r._c,this.start(r)},e._stop=e.stop}var ui=function(){function e(t,r){this._stream=t,this._listener=r}return e.prototype.unsubscribe=function(){this._stream._remove(this._listener)},e}(),fi=function(){function e(t){this._listener=t}return e.prototype.next=function(t){this._listener._n(t)},e.prototype.error=function(t){this._listener._e(t)},e.prototype.complete=function(){this._listener._c()},e}(),li=function(){function e(t){this.type="fromObservable",this.ins=t,this.active=!1}return e.prototype._start=function(t){this.out=t,this.active=!0,this._sub=this.ins.subscribe(new fi(t)),this.active||this._sub.unsubscribe()},e.prototype._stop=function(){this._sub&&this._sub.unsubscribe(),this.active=!1},e}(),ci=function(){function e(t){this.type="merge",this.insArr=t,this.out=C,this.ac=0}return e.prototype._start=function(t){this.out=t;var r=this.insArr,n=r.length;this.ac=n;for(var o=0;o<n;o++)r[o]._add(this)},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=0;n<r;n++)t[n]._remove(this);this.out=C},e.prototype._n=function(t){var r=this.out;r!==C&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==C&&r._e(t)},e.prototype._c=function(){if(--this.ac<=0){var t=this.out;if(t===C)return;t._c()}},e}(),pi=function(){function e(t,r,n){this.i=t,this.out=r,this.p=n,n.ils.push(this)}return e.prototype._n=function(t){var r=this.p,n=this.out;if(n!==C&&r.up(t,this.i)){var o=ve(r.vals);n._n(o)}},e.prototype._e=function(t){var r=this.out;r!==C&&r._e(t)},e.prototype._c=function(){var t=this.p;t.out!==C&&--t.Nc===0&&t.out._c()},e}(),di=function(){function e(t){this.type="combine",this.insArr=t,this.out=C,this.ils=[],this.Nc=this.Nn=0,this.vals=[]}return e.prototype.up=function(t,r){var n=this.vals[r],o=this.Nn?n===C?--this.Nn:this.Nn:0;return this.vals[r]=t,o===0},e.prototype._start=function(t){this.out=t;var r=this.insArr,n=this.Nc=this.Nn=r.length,o=this.vals=new Array(n);if(n===0)t._n([]),t._c();else for(var i=0;i<n;i++)o[i]=C,r[i]._add(new pi(i,t,this))},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=this.ils,o=0;o<r;o++)t[o]._remove(n[o]);this.out=C,this.ils=[],this.vals=[]},e}(),hi=function(){function e(t){this.type="fromArray",this.a=t}return e.prototype._start=function(t){for(var r=this.a,n=0,o=r.length;n<o;n++)t._n(r[n]);t._c()},e.prototype._stop=function(){},e}(),vi=function(){function e(t){this.type="fromPromise",this.on=!1,this.p=t}return e.prototype._start=function(t){var r=this;this.on=!0,this.p.then(function(n){r.on&&(t._n(n),t._c())},function(n){t._e(n)}).then(ht,function(n){setTimeout(function(){throw n})})},e.prototype._stop=function(){this.on=!1},e}(),yi=function(){function e(t){this.type="periodic",this.period=t,this.intervalID=-1,this.i=0}return e.prototype._start=function(t){var r=this;function n(){t._n(r.i++)}this.intervalID=setInterval(n,this.period)},e.prototype._stop=function(){this.intervalID!==-1&&clearInterval(this.intervalID),this.intervalID=-1,this.i=0},e}(),mi=function(){function e(t,r){this.type="debug",this.ins=t,this.out=C,this.s=ht,this.l="",typeof r=="string"?this.l=r:typeof r=="function"&&(this.s=r)}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=C},e.prototype._n=function(t){var r=this.out;if(r!==C){var n=this.s,o=this.l;if(n!==ht)try{n(t)}catch(i){r._e(i)}else o?console.log(o+":",t):console.log(t);r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==C&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==C&&t._c()},e}(),gi=function(){function e(t,r){this.type="drop",this.ins=r,this.out=C,this.max=t,this.dropped=0}return e.prototype._start=function(t){this.out=t,this.dropped=0,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=C},e.prototype._n=function(t){var r=this.out;r!==C&&this.dropped++>=this.max&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==C&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==C&&t._c()},e}(),bi=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(){this.op.end()},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.end()},e}(),_i=function(){function e(t,r){this.type="endWhen",this.ins=r,this.out=C,this.o=t,this.oil=qt}return e.prototype._start=function(t){this.out=t,this.o._add(this.oil=new bi(t,this)),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.o._remove(this.oil),this.out=C,this.oil=qt},e.prototype.end=function(){var t=this.out;t!==C&&t._c()},e.prototype._n=function(t){var r=this.out;r!==C&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==C&&r._e(t)},e.prototype._c=function(){this.end()},e}(),ke=function(){function e(t,r){this.type="filter",this.ins=r,this.out=C,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=C},e.prototype._n=function(t){var r=this.out;if(r!==C){var n=Qe(this,t,r);n===C||!n||r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==C&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==C&&t._c()},e}(),wi=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(t){this.out._n(t)},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.inner=C,this.op.less()},e}(),Si=function(){function e(t){this.type="flatten",this.ins=t,this.out=C,this.open=!0,this.inner=C,this.il=qt}return e.prototype._start=function(t){this.out=t,this.open=!0,this.inner=C,this.il=qt,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.inner!==C&&this.inner._remove(this.il),this.out=C,this.open=!0,this.inner=C,this.il=qt},e.prototype.less=function(){var t=this.out;t!==C&&!this.open&&this.inner===C&&t._c()},e.prototype._n=function(t){var r=this.out;if(r!==C){var n=this,o=n.inner,i=n.il;o!==C&&i!==qt&&o._remove(i),(this.inner=t)._add(this.il=new wi(r,this))}},e.prototype._e=function(t){var r=this.out;r!==C&&r._e(t)},e.prototype._c=function(){this.open=!1,this.less()},e}(),Oi=function(){function e(t,r,n){var o=this;this.type="fold",this.ins=n,this.out=C,this.f=function(i){return t(o.acc,i)},this.acc=this.seed=r}return e.prototype._start=function(t){this.out=t,this.acc=this.seed,t._n(this.acc),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=C,this.acc=this.seed},e.prototype._n=function(t){var r=this.out;if(r!==C){var n=Qe(this,t,r);n!==C&&r._n(this.acc=n)}},e.prototype._e=function(t){var r=this.out;r!==C&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==C&&t._c()},e}(),Ai=function(){function e(t){this.type="last",this.ins=t,this.out=C,this.has=!1,this.val=C}return e.prototype._start=function(t){this.out=t,this.has=!1,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=C,this.val=C},e.prototype._n=function(t){this.has=!0,this.val=t},e.prototype._e=function(t){var r=this.out;r!==C&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==C&&(this.has?(t._n(this.val),t._c()):t._e(new Error("last() failed because input stream completed")))},e}(),Ei=function(){function e(t,r){this.type="map",this.ins=r,this.out=C,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=C},e.prototype._n=function(t){var r=this.out;if(r!==C){var n=Qe(this,t,r);n!==C&&r._n(n)}},e.prototype._e=function(t){var r=this.out;r!==C&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==C&&t._c()},e}(),Pi=function(){function e(t){this.type="remember",this.ins=t,this.out=C}return e.prototype._start=function(t){this.out=t,this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=C},e}(),Ni=function(){function e(t,r){this.type="replaceError",this.ins=r,this.out=C,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=C},e.prototype._n=function(t){var r=this.out;r!==C&&r._n(t)},e.prototype._e=function(t){var r=this.out;if(r!==C)try{this.ins._remove(this),(this.ins=this.f(t))._add(this)}catch(n){r._e(n)}},e.prototype._c=function(){var t=this.out;t!==C&&t._c()},e}(),$i=function(){function e(t,r){this.type="startWith",this.ins=t,this.out=C,this.val=r}return e.prototype._start=function(t){this.out=t,this.out._n(this.val),this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=C},e}(),Ci=function(){function e(t,r){this.type="take",this.ins=r,this.out=C,this.max=t,this.taken=0}return e.prototype._start=function(t){this.out=t,this.taken=0,this.max<=0?t._c():this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=C},e.prototype._n=function(t){var r=this.out;if(r!==C){var n=++this.taken;n<this.max?r._n(t):n===this.max&&(r._n(t),r._c())}},e.prototype._e=function(t){var r=this.out;r!==C&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==C&&t._c()},e}(),tr=function(){function e(t){this._prod=t||C,this._ils=[],this._stopID=C,this._dl=C,this._d=!1,this._target=null,this._err=C}return e.prototype._n=function(t){var r=this._ils,n=r.length;if(this._d&&this._dl._n(t),n==1)r[0]._n(t);else{if(n==0)return;for(var o=ve(r),i=0;i<n;i++)o[i]._n(t)}},e.prototype._e=function(t){if(this._err===C){this._err=t;var r=this._ils,n=r.length;if(this._x(),this._d&&this._dl._e(t),n==1)r[0]._e(t);else{if(n==0)return;for(var o=ve(r),i=0;i<n;i++)o[i]._e(t)}if(!this._d&&n==0)throw this._err}},e.prototype._c=function(){var t=this._ils,r=t.length;if(this._x(),this._d&&this._dl._c(),r==1)t[0]._c();else{if(r==0)return;for(var n=ve(t),o=0;o<r;o++)n[o]._c()}},e.prototype._x=function(){this._ils.length!==0&&(this._prod!==C&&this._prod._stop(),this._err=C,this._ils=[])},e.prototype._stopNow=function(){this._prod._stop(),this._err=C,this._stopID=C},e.prototype._add=function(t){var r=this._target;if(r)return r._add(t);var n=this._ils;if(n.push(t),!(n.length>1))if(this._stopID!==C)clearTimeout(this._stopID),this._stopID=C;else{var o=this._prod;o!==C&&o._start(this)}},e.prototype._remove=function(t){var r=this,n=this._target;if(n)return n._remove(t);var o=this._ils,i=o.indexOf(t);i>-1&&(o.splice(i,1),this._prod!==C&&o.length<=0?(this._err=C,this._stopID=setTimeout(function(){return r._stopNow()})):o.length===1&&this._pruneCycles())},e.prototype._pruneCycles=function(){this._hasNoSinks(this,[])&&this._remove(this._ils[0])},e.prototype._hasNoSinks=function(t,r){if(r.indexOf(t)!==-1)return!0;if(t.out===this)return!0;if(t.out&&t.out!==C)return this._hasNoSinks(t.out,r.concat(t));if(t._ils){for(var n=0,o=t._ils.length;n<o;n++)if(!this._hasNoSinks(t._ils[n],r.concat(t)))return!1;return!0}else return!1},e.prototype.ctor=function(){return this instanceof Ct?Ct:e},e.prototype.addListener=function(t){t._n=t.next||ht,t._e=t.error||ht,t._c=t.complete||ht,this._add(t)},e.prototype.removeListener=function(t){this._remove(t)},e.prototype.subscribe=function(t){return this.addListener(t),new ui(this,t)},e.prototype[de]=function(){return this},e.create=function(t){if(t){if(typeof t.start!="function"||typeof t.stop!="function")throw new Error("producer requires both start and stop functions");Ar(t)}return new e(t)},e.createWithMemory=function(t){return t&&Ar(t),new Ct(t)},e.never=function(){return new e({_start:ht,_stop:ht})},e.empty=function(){return new e({_start:function(t){t._c()},_stop:ht})},e.throw=function(t){return new e({_start:function(r){r._e(t)},_stop:ht})},e.from=function(t){if(typeof t[de]=="function")return e.fromObservable(t);if(typeof t.then=="function")return e.fromPromise(t);if(Array.isArray(t))return e.fromArray(t);throw new TypeError("Type of input to from() must be an Array, Promise, or Observable")},e.of=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.fromArray(t)},e.fromArray=function(t){return new e(new hi(t))},e.fromPromise=function(t){return new e(new vi(t))},e.fromObservable=function(t){if(t.endWhen!==void 0)return t;var r=typeof t[de]=="function"?t[de]():t;return new e(new li(r))},e.periodic=function(t){return new e(new yi(t))},e.prototype._map=function(t){return new(this.ctor())(new Ei(t,this))},e.prototype.map=function(t){return this._map(t)},e.prototype.mapTo=function(t){var r=this.map(function(){return t}),n=r._prod;return n.type="mapTo",r},e.prototype.filter=function(t){var r=this._prod;return r instanceof ke?new e(new ke(si(r.f,t),r.ins)):new e(new ke(t,this))},e.prototype.take=function(t){return new(this.ctor())(new Ci(t,this))},e.prototype.drop=function(t){return new e(new gi(t,this))},e.prototype.last=function(){return new e(new Ai(this))},e.prototype.startWith=function(t){return new Ct(new $i(this,t))},e.prototype.endWhen=function(t){return new(this.ctor())(new _i(t,this))},e.prototype.fold=function(t,r){return new Ct(new Oi(t,r,this))},e.prototype.replaceError=function(t){return new(this.ctor())(new Ni(t,this))},e.prototype.flatten=function(){return new e(new Si(this))},e.prototype.compose=function(t){return t(this)},e.prototype.remember=function(){return new Ct(new Pi(this))},e.prototype.debug=function(t){return new(this.ctor())(new mi(this,t))},e.prototype.imitate=function(t){if(t instanceof Ct)throw new Error("A MemoryStream was given to imitate(), but it only supports a Stream. Read more about this restriction here: https://github.com/staltz/xstream#faq");this._target=t;for(var r=this._ils,n=r.length,o=0;o<n;o++)t._add(r[o]);this._ils=[]},e.prototype.shamefullySendNext=function(t){this._n(t)},e.prototype.shamefullySendError=function(t){this._e(t)},e.prototype.shamefullySendComplete=function(){this._c()},e.prototype.setDebugListener=function(t){t?(this._d=!0,t._n=t.next||ht,t._e=t.error||ht,t._c=t.complete||ht,this._dl=t):(this._d=!1,this._dl=C)},e.merge=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new ci(r))},e.combine=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new di(r))},e}(),Pe=ut.Stream=tr,Ct=function(e){oi(t,e);function t(r){var n=e.call(this,r)||this;return n._has=!1,n}return t.prototype._n=function(r){this._v=r,this._has=!0,e.prototype._n.call(this,r)},t.prototype._add=function(r){var n=this._target;if(n)return n._add(r);var o=this._ils;if(o.push(r),o.length>1){this._has&&r._n(this._v);return}if(this._stopID!==C)this._has&&r._n(this._v),clearTimeout(this._stopID),this._stopID=C;else if(this._has)r._n(this._v);else{var i=this._prod;i!==C&&i._start(this)}},t.prototype._stopNow=function(){this._has=!1,e.prototype._stopNow.call(this)},t.prototype._x=function(){this._has=!1,e.prototype._x.call(this)},t.prototype.map=function(r){return this._map(r)},t.prototype.mapTo=function(r){return e.prototype.mapTo.call(this,r)},t.prototype.take=function(r){return e.prototype.take.call(this,r)},t.prototype.endWhen=function(r){return e.prototype.endWhen.call(this,r)},t.prototype.replaceError=function(r){return e.prototype.replaceError.call(this,r)},t.prototype.remember=function(){return this},t.prototype.debug=function(r){return e.prototype.debug.call(this,r)},t}(tr);ut.MemoryStream=Ct;var Mi=tr,et=ut.default=Mi,Ne={};Object.defineProperty(Ne,"__esModule",{value:!0});function sn(){var e;return typeof window!="undefined"?e=window:typeof bt!="undefined"?e=bt:e=this,e.Cyclejs=e.Cyclejs||{},e=e.Cyclejs,e.adaptStream=e.adaptStream||function(t){return t},e}function Ii(e){sn().adaptStream=e}Ne.setAdapt=Ii;function Di(e){return sn().adaptStream(e)}var lt=Ne.adapt=Di;function Ti(e,t){if(typeof e!="function")throw new Error("First argument given to isolate() must be a 'dataflowComponent' function");if(t===null)throw new Error("Second argument given to isolate() must not be null")}function xi(e,t,r){var n={};return Object.keys(e).forEach(function(o){if(typeof t=="string"){n[o]=t;return}var i=t[o];if(typeof i!="undefined"){n[o]=i;return}var a=t["*"];if(typeof a!="undefined"){n[o]=a;return}n[o]=r}),n}function ji(e,t){var r={};for(var n in e){var o=e[n];e.hasOwnProperty(n)&&o&&t[n]!==null&&typeof o.isolateSource=="function"?r[n]=o.isolateSource(o,t[n]):e.hasOwnProperty(n)&&(r[n]=e[n])}return r}function ki(e,t,r){var n={};for(var o in t){var i=e[o],a=t[o];t.hasOwnProperty(o)&&i&&r[o]!==null&&typeof i.isolateSink=="function"?n[o]=lt(i.isolateSink(et.fromObservable(a),r[o])):t.hasOwnProperty(o)&&(n[o]=t[o])}return n}var un=0;function He(){return"cycle"+ ++un}function ue(e,t){t===void 0&&(t=He()),Ti(e,t);var r=typeof t=="object"?He():"",n=typeof t=="string"||typeof t=="object"?t:t.toString();return function(i){for(var a=[],u=1;u<arguments.length;u++)a[u-1]=arguments[u];var c=xi(i,n,r),b=ji(i,c),E=e.apply(void 0,[b].concat(a)),w=ki(i,E,c);return w}}ue.reset=function(){return un=0};function Ri(e){return e===void 0&&(e=He()),function(t){return ue(t,e)}}var Li=Object.freeze(Object.defineProperty({__proto__:null,default:ue,toIsolated:Ri},Symbol.toStringTag,{value:"Module"})),fn=Ae(Li),er={},Zt={};Object.defineProperty(Zt,"__esModule",{value:!0});Zt.DropRepeatsOperator=void 0;var Fi=ut,Re={},ln=function(){function e(t,r){this.ins=t,this.type="dropRepeats",this.out=null,this.v=Re,this.isEq=r||function(n,o){return n===o}}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.v=Re},e.prototype._n=function(t){var r=this.out;if(!!r){var n=this.v;n!==Re&&this.isEq(t,n)||(this.v=t,r._n(t))}},e.prototype._e=function(t){var r=this.out;!r||r._e(t)},e.prototype._c=function(){var t=this.out;!t||t._c()},e}();Zt.DropRepeatsOperator=ln;function Bi(e){return e===void 0&&(e=void 0),function(r){return new Fi.Stream(new ln(r,e))}}var qi=Zt.default=Bi,ze=globalThis&&globalThis.__assign||function(){return ze=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ze.apply(this,arguments)};function Wi(e,t,r){if(r===e[t])return e;var n=parseInt(t);return typeof r=="undefined"?e.filter(function(o,i){return i!==n}):e.map(function(o,i){return i===n?r:o})}function cn(e){return typeof e=="string"||typeof e=="number"?function(r){if(typeof r!="undefined")return r[e]}:e.get}function Ui(e){return typeof e=="string"||typeof e=="number"?function(r,n){var o,i;return Array.isArray(r)?Wi(r,e,n):typeof r=="undefined"?(o={},o[e]=n,o):ze({},r,(i={},i[e]=n,i))}:e.set}function pn(e,t){return e.select(t)}function dn(e,t){var r=cn(t),n=Ui(t);return e.map(function(o){return function(a){var u=r(a),c=o(u);return u===c?a:n(a,c)}})}var hn=function(){function e(t,r){this.isolateSource=pn,this.isolateSink=dn,this._stream=t.filter(function(n){return typeof n!="undefined"}).compose(qi()).remember(),this._name=r,this.stream=lt(this._stream),this._stream._isCycleSource=r}return e.prototype.select=function(t){var r=cn(t);return new e(this._stream.map(r),this._name)},e}(),Gi=function(){function e(t,r,n){this.ins=n,this.out=t,this.p=r}return e.prototype._n=function(t){this.p;var r=this.out;r!==null&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){},e}(),Hi=function(){function e(t,r){this.type="pickMerge",this.ins=r,this.out=null,this.sel=t,this.ils=new Map,this.inst=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this);var t=this.ils;t.forEach(function(r,n){r.ins._remove(r),r.ins=null,r.out=null,t.delete(n)}),t.clear(),this.out=null,this.ils=new Map,this.inst=null},e.prototype._n=function(t){this.inst=t;for(var r=t.arr,n=this.ils,o=this.out,i=this.sel,a=r.length,u=0;u<a;++u){var c=r[u],b=c._key,E=et.fromObservable(c[i]||et.never());n.has(b)||(n.set(b,new Gi(o,this,E)),E._add(n.get(b)))}n.forEach(function(w,P){(!t.dict.has(P)||!t.dict.get(P))&&(w.ins._remove(w),w.ins=null,w.out=null,n.delete(P))})},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==null&&t._c()},e}();function zi(e){return function(r){return new Pe(new Hi(e,r))}}var Ki=function(){function e(t,r,n,o){this.key=t,this.out=r,this.p=n,this.val=Ze,this.ins=o}return e.prototype._n=function(t){this.p;var r=this.out;this.val=t,r!==null&&this.p.up()},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){},e}(),Ji=function(){function e(t,r){this.type="combine",this.ins=r,this.sel=t,this.out=null,this.ils=new Map,this.inst=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this);var t=this.ils;t.forEach(function(r){r.ins._remove(r),r.ins=null,r.out=null,r.val=null}),t.clear(),this.out=null,this.ils=new Map,this.inst=null},e.prototype.up=function(){for(var t=this.inst.arr,r=t.length,n=this.ils,o=Array(r),i=0;i<r;++i){var a=t[i],u=a._key;if(!n.has(u))return;var c=n.get(u).val;if(c===Ze)return;o[i]=c}this.out._n(o)},e.prototype._n=function(t){this.inst=t;var r=t.arr,n=this.ils,o=this.out,i=this.sel,a=t.dict,u=r.length,c=!1;if(n.forEach(function(S,f){a.has(f)||(S.ins._remove(S),S.ins=null,S.out=null,S.val=null,n.delete(f),c=!0)}),u===0){o._n([]);return}for(var b=0;b<u;++b){var E=r[b],w=E._key;if(!E[i])throw new Error("pickCombine found an undefined child sink stream");var P=et.fromObservable(E[i]);n.has(w)||(n.set(w,new Ki(w,o,this,P)),P._add(n.get(w)))}c&&this.up()},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==null&&t._c()},e}();function Yi(e){return function(r){return new Pe(new Ji(e,r))}}var we=globalThis&&globalThis.__assign||function(){return we=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},we.apply(this,arguments)},vn=function(){function e(t){this._instances$=t}return e.prototype.pickMerge=function(t){return lt(this._instances$.compose(zi(t)))},e.prototype.pickCombine=function(t){return lt(this._instances$.compose(Yi(t)))},e}();function Xi(e){return{"*":null}}function Vi(e,t){return{get:function(r){if(typeof r!="undefined"){for(var n=0,o=r.length;n<o;++n)if(""+e(r[n],n)===t)return r[n];return}},set:function(r,n){return typeof r=="undefined"?[n]:typeof n=="undefined"?r.filter(function(o,i){return""+e(o,i)!==t}):r.map(function(o,i){return""+e(o,i)===t?n:o})}}}var Zi={get:function(e){return e},set:function(e,t){return t}};function Qi(e){return function(r){var n=e.channel||"state",o=e.itemKey,i=e.itemScope||Xi,a=et.fromObservable(r[n].stream),u=a.fold(function(c,b){var E,w,P,S,f=c.dict;if(Array.isArray(b)){for(var s=Array(b.length),_=new Set,l=0,y=b.length;l<y;++l){var p=""+(o?o(b[l],l):l);if(_.add(p),f.has(p))s[l]=f.get(p);else{var m=o?Vi(o,p):""+l,O=i(p),d=typeof O=="string"?(E={"*":O},E[n]=m,E):we({},O,(w={},w[n]=m,w)),g=e.itemFactory?e.itemFactory(b[l],l):e.item,A=ue(g,d)(r);f.set(p,A),s[l]=A}s[l]._key=p}return f.forEach(function(I,D){_.has(D)||f.delete(D)}),_.clear(),{dict:f,arr:s}}else{f.clear();var p=""+(o?o(b,0):"this"),m=Zi,O=i(p),d=typeof O=="string"?(P={"*":O},P[n]=m,P):we({},O,(S={},S[n]=m,S)),g=e.itemFactory?e.itemFactory(b,0):e.item,A=ue(g,d)(r);return f.set(p,A),{dict:f,arr:[A]}}},{dict:new Map,arr:[]});return e.collectSinks(new vn(u))}}var rr={};Object.defineProperty(rr,"__esModule",{value:!0});var ta=ut,ea=function(){function e(t){this.streams=t,this.type="concat",this.out=null,this.i=0}return e.prototype._start=function(t){this.out=t,this.streams[this.i]._add(this)},e.prototype._stop=function(){var t=this.streams;this.i<t.length&&t[this.i]._remove(this),this.i=0,this.out=null},e.prototype._n=function(t){var r=this.out;!r||r._n(t)},e.prototype._e=function(t){var r=this.out;!r||r._e(t)},e.prototype._c=function(){var t=this.out;if(!!t){var r=this.streams;r[this.i]._remove(this),++this.i<r.length?r[this.i]._add(this):t._c()}},e}();function ra(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new ta.Stream(new ea(e))}var yn=rr.default=ra,mn={};Object.defineProperty(mn,"__esModule",{value:!0});function na(){return typeof queueMicrotask!="undefined"?queueMicrotask:typeof setImmediate!="undefined"?setImmediate:typeof process!="undefined"?process.nextTick:setTimeout}var gn=mn.default=na,Le=gn();function oa(e,t){return t===void 0&&(t="state"),function(n){var o=et.create(),i=o.fold(function(b,E){return E(b)},void 0).drop(1),a=n;a[t]=new hn(i,t);var u=e(a);if(u[t]){var c=yn(et.fromObservable(u[t]),et.never());c.subscribe({next:function(b){return Le(function(){return o._n(b)})},error:function(b){return Le(function(){return o._e(b)})},complete:function(){return Le(function(){return o._c()})}})}return u}}var ia=Object.freeze(Object.defineProperty({__proto__:null,StateSource:hn,isolateSource:pn,isolateSink:dn,Instances:vn,withState:oa,makeCollection:Qi},Symbol.toStringTag,{value:"Module"})),nr=Ae(ia);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=w;var t=n(fn),r=nr;function n(S){return S&&S.__esModule?S:{default:S}}function o(S,f,s){return f in S?Object.defineProperty(S,f,{value:s,enumerable:!0,configurable:!0,writable:!0}):S[f]=s,S}function i(S,f){return E(S)||b(S,f)||u(S,f)||a()}function a(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u(S,f){if(!!S){if(typeof S=="string")return c(S,f);var s=Object.prototype.toString.call(S).slice(8,-1);if(s==="Object"&&S.constructor&&(s=S.constructor.name),s==="Map"||s==="Set")return Array.from(S);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return c(S,f)}}function c(S,f){(f==null||f>S.length)&&(f=S.length);for(var s=0,_=new Array(f);s<f;s++)_[s]=S[s];return _}function b(S,f){var s=S==null?null:typeof Symbol!="undefined"&&S[Symbol.iterator]||S["@@iterator"];if(s!=null){var _=[],l=!0,y=!1,p,m;try{for(s=s.call(S);!(l=(p=s.next()).done)&&(_.push(p.value),!(f&&_.length===f));l=!0);}catch(O){y=!0,m=O}finally{try{!l&&s.return!=null&&s.return()}finally{if(y)throw m}}return _}}function E(S){if(Array.isArray(S))return S}function w(S,f){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:["DOM"],_=arguments.length>3&&arguments[3]!==void 0?arguments[3]:["EVENTS"],l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"STATE";return function(y){var p={item:S,itemKey:function(d){return d.id},itemScope:function(d){return d},channel:l,collectSinks:function(d){return Object.entries(y).reduce(function(g,A){var I=i(A,2),D=I[0];return I[1],s.includes(D)?g[D]=d.pickCombine(D):g[D]=d.pickMerge(D),g},{})}},m=o({},l,f);return _.forEach(function(O){return m[O]=null}),s.forEach(function(O){return m[O]=null}),P(p,m,y)}}function P(S,f,s){return(0,t.default)((0,r.makeCollection)(S),f)(s)}})(er);var or={};Object.defineProperty(or,"__esModule",{value:!0});var aa=ut,sa=function(){function e(t,r){this.dt=t,this.ins=r,this.type="delay",this.out=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null},e.prototype._n=function(t){var r=this.out;if(!!r)var n=setInterval(function(){r._n(t),clearInterval(n)},this.dt)},e.prototype._e=function(t){var r=this.out;if(!!r)var n=setInterval(function(){r._e(t),clearInterval(n)},this.dt)},e.prototype._c=function(){var t=this.out;if(!!t)var r=setInterval(function(){t._c(),clearInterval(r)},this.dt)},e}();function ua(e){return function(r){return new aa.Stream(new sa(e,r))}}or.default=ua;var ir={};Object.defineProperty(ir,"__esModule",{value:!0});var ne=ut,fa=function(){function e(t,r){this.dt=t,this.ins=r,this.type="debounce",this.out=null,this.id=null,this.t=ne.NO}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.clearInterval()},e.prototype.clearInterval=function(){var t=this.id;t!==null&&clearInterval(t),this.id=null},e.prototype._n=function(t){var r=this,n=this.out;!n||(this.clearInterval(),this.t=t,this.id=setInterval(function(){r.clearInterval(),n._n(t),r.t=ne.NO},this.dt))},e.prototype._e=function(t){var r=this.out;!r||(this.clearInterval(),r._e(t))},e.prototype._c=function(){var t=this.out;!t||(this.clearInterval(),this.t!=ne.NO&&t._n(this.t),this.t=ne.NO,t._c())},e}();function la(e){return function(r){return new ne.Stream(new fa(e,r))}}ir.default=la;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ABORT=void 0,e.default=Dt;var t=w(fn),r=w(er),n=nr,o=E(ut),i=w(or),a=w(rr),u=w(ir),c=w(Zt);function b(v){if(typeof WeakMap!="function")return null;var M=new WeakMap,h=new WeakMap;return(b=function(T){return T?h:M})(v)}function E(v,M){if(!M&&v&&v.__esModule)return v;if(v===null||F(v)!=="object"&&typeof v!="function")return{default:v};var h=b(M);if(h&&h.has(v))return h.get(v);var $={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var x in v)if(x!=="default"&&Object.prototype.hasOwnProperty.call(v,x)){var R=T?Object.getOwnPropertyDescriptor(v,x):null;R&&(R.get||R.set)?Object.defineProperty($,x,R):$[x]=v[x]}return $.default=v,h&&h.set(v,$),$}function w(v){return v&&v.__esModule?v:{default:v}}function P(v){return s(v)||f(v)||y(v)||S()}function S(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f(v){if(typeof Symbol!="undefined"&&v[Symbol.iterator]!=null||v["@@iterator"]!=null)return Array.from(v)}function s(v){if(Array.isArray(v))return p(v)}function _(v,M){return O(v)||m(v,M)||y(v,M)||l()}function l(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y(v,M){if(!!v){if(typeof v=="string")return p(v,M);var h=Object.prototype.toString.call(v).slice(8,-1);if(h==="Object"&&v.constructor&&(h=v.constructor.name),h==="Map"||h==="Set")return Array.from(v);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return p(v,M)}}function p(v,M){(M==null||M>v.length)&&(M=v.length);for(var h=0,$=new Array(M);h<M;h++)$[h]=v[h];return $}function m(v,M){var h=v==null?null:typeof Symbol!="undefined"&&v[Symbol.iterator]||v["@@iterator"];if(h!=null){var $=[],T=!0,x=!1,R,G;try{for(h=h.call(v);!(T=(R=h.next()).done)&&($.push(R.value),!(M&&$.length===M));T=!0);}catch(j){x=!0,G=j}finally{try{!T&&h.return!=null&&h.return()}finally{if(x)throw G}}return $}}function O(v){if(Array.isArray(v))return v}function d(v,M){if(!(v instanceof M))throw new TypeError("Cannot call a class as a function")}function g(v,M){for(var h=0;h<M.length;h++){var $=M[h];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(v,$.key,$)}}function A(v,M,h){return M&&g(v.prototype,M),h&&g(v,h),Object.defineProperty(v,"prototype",{writable:!1}),v}function I(v,M){var h=Object.keys(v);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(v);M&&($=$.filter(function(T){return Object.getOwnPropertyDescriptor(v,T).enumerable})),h.push.apply(h,$)}return h}function D(v){for(var M=1;M<arguments.length;M++){var h=arguments[M]!=null?arguments[M]:{};M%2?I(Object(h),!0).forEach(function($){L(v,$,h[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(h)):I(Object(h)).forEach(function($){Object.defineProperty(v,$,Object.getOwnPropertyDescriptor(h,$))})}return v}function L(v,M,h){return M in v?Object.defineProperty(v,M,{value:h,enumerable:!0,configurable:!0,writable:!0}):v[M]=h,v}function F(v){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},F(v)}var Z=typeof window!="undefined"&&window||process&&process.env||{},H="request",ct="BOOTSTRAP",at="INITIALIZE",pt="HYDRATE",mt=!0,_t="~#~#~ABORT~#~#~";e.ABORT=_t;function Dt(v){var M=v.name,h=v.sources,$=v.isolateOpts,T=v.stateSourceName,x=T===void 0?"STATE":T;if(h&&F(h)!=="object")throw new Error("Sources must be a Cycle.js sources object:",M);var R;typeof $=="string"?R=L({},x,$):$===!0?R={}:R=$;var G=typeof h=="undefined";if(F(R)=="object"){var j=function(q){var k=D(D({},v),{},{sources:q});return new Et(k).sinks};return G?(0,t.default)(j,R):(0,t.default)(j,R)(h)}else return G?function(B){return new Et(D(D({},v),{},{sources:B})).sinks}:new Et(v).sinks}var Et=function(){function v(M){var h=this,$=M.name,T=$===void 0?"NO NAME":$,x=M.sources,R=M.intent,G=M.request,j=M.model,B=M.response,q=M.view,k=M.children,W=k===void 0?{}:k,U=M.components,X=U===void 0?{}:U,rt=M.initialState,it=M.calculated,ot=M.storeCalculatedInState,K=ot===void 0?!0:ot,Q=M.DOMSourceName,tt=Q===void 0?"DOM":Q,J=M.stateSourceName,st=J===void 0?"STATE":J,ft=M.requestSourceName,V=ft===void 0?"HTTP":ft;if(d(this,v),!x||F(x)!="object")throw new Error("Missing or invalid sources");this.name=T,this.sources=x,this.intent=R,this.request=G,this.model=j,this.response=B,this.view=q,this.children=W,this.components=X,this.initialState=rt,this.calculated=it,this.storeCalculatedInState=K,this.DOMSourceName=tt,this.stateSourceName=st,this.requestSourceName=V,this.sourceNames=Object.keys(x),this.isSubComponent=this.sourceNames.includes("props$");var gt=x[st]&&x[st].stream;gt&&(this.currentState=rt||{},this.sources[this.stateSourceName]=new n.StateSource(gt.map(function(Pt){return h.currentState=Pt,Pt}))),mt&&typeof this.intent=="undefined"&&typeof this.model=="undefined"&&(this.initialState=rt||!0,this.intent=function(Pt){return{__NOOP_ACTION__:o.default.never()}},this.model={__NOOP_ACTION__:function(Ut){return Ut}}),mt=!1,this.log=Qt(T),this.initIntent$(),this.initAction$(),this.initResponse$(),this.initState(),this.initModel$(),this.initSendResponse$(),this.initChildren$(),this.initSubComponentSink$(),this.initVdom$(),this.initSinks()}return A(v,[{key:"initIntent$",value:function(){if(!!this.intent){if(typeof this.intent!="function")throw new Error("Intent must be a function");if(this.intent$=this.intent(this.sources),!(this.intent$ instanceof o.Stream)&&F(this.intent$)!="object")throw new Error("Intent must return either an action$ stream or map of event streams")}}},{key:"initAction$",value:function(){var h=this.sources&&this.sources[this.requestSourceName]||null;if(!this.intent$){this.action$=o.default.never();return}var $;if(this.intent$ instanceof o.Stream)$=this.intent$;else{var T=Object.entries(this.intent$).map(function(B){var q=_(B,2),k=q[0],W=q[1];return W.map(function(U){return{type:k,data:U}})});$=o.default.merge.apply(o.default,[o.default.never()].concat(P(T)))}var x=$ instanceof o.Stream?$:$.apply&&$(this.sources)||o.default.never(),R=(0,a.default)(o.default.of({type:ct}),x).compose((0,i.default)(10)),G;h&&typeof h.select=="function"?G=h.select("initial").flatten():G=o.default.never();var j=G.map(function(B){return{type:pt,data:B}});this.action$=o.default.merge(R,j).compose(this.log(function(B){var q=B.type;return"Action triggered: <".concat(q,">")}))}},{key:"initResponse$",value:function(){var h=this;if(typeof this.request!="undefined"){if(F(this.request)!="object")throw new Error("The request parameter must be an object");var $=this.sources[this.requestSourceName],T=Object.entries(this.request),x=T.reduce(function(R,G){var j=_(G,2),B=j[0],q=j[1],k=B.toLowerCase();if(typeof $[k]!="function")throw new Error("Invalid method in request object:",B);var W=Object.entries(q),U=W.reduce(function(rt,it){var ot=_(it,2),K=ot[0],Q=ot[1],tt="[".concat(k.toUpperCase(),"]:").concat(K||"none"),J=F(Q);if(J==="undefined")throw new Error("Action for '".concat(K,"' route in request object not specified"));if(J!=="string"&&J!=="function")throw new Error("Invalid action for '".concat(K,"' route: expecting string or function"));var st=J==="function"?"[ FUNCTION ]":"< ".concat(Q," >");console.log("[".concat(h.name,"] Adding ").concat(h.requestSourceName," route:"),k.toUpperCase(),"'".concat(K,"' <").concat(st,">"));var ft=$[k](K).compose((0,c.default)(function(V,gt){return V.id==gt.id})).map(function(V){if(!V||!V.id)throw new Error("No id found in request: ".concat(tt));try{var gt=V.id,Pt=V.params,Ut=V.body,Ce=V.cookies,Gt=J==="function"?"FUNCTION":Q,cr={params:Pt,body:Ut,cookies:Ce,req:V},$t={type:Gt,data:Ut,req:V,_reqId:gt,_action:Gt},te=new Date().toISOString(),Tt=V.get?V.get("host"):"0.0.0.0";if(console.log("".concat(te," ").concat(Tt," ").concat(V.method," ").concat(V.url)),Z.DEBUG&&h.action$.setDebugListener({next:function(Nt){var Ht=Nt.type;return console.log("[".concat(h.name,"] Action from ").concat(h.requestSourceName," request: <").concat(Ht,">"))}}),J==="function"){var xt=h.addCalculated(h.currentState),jt=Q(xt,V);return o.default.of(D(D({},$t),{},{data:jt}))}else{h.action$.shamefullySendNext($t);var Me=Object.entries(h.sources),Ie=Me.reduce(function(kt,Nt){var Ht=_(Nt,2),pr=Ht[0],ee=Ht[1];if(!ee||typeof ee[H]!="function")return kt;var Rt=ee[H](gt);return[].concat(P(kt),[Rt])},[]);return o.default.merge.apply(o.default,P(Ie))}}catch(kt){console.error(kt)}}).flatten();return[].concat(P(rt),[ft])},[]),X=o.default.merge.apply(o.default,P(U));return[].concat(P(R),[X])},[]);if(this.response$=o.default.merge.apply(o.default,P(x)).compose(this.log(function(R){return R._action?"[".concat(h.requestSourceName,"] response data received for Action: <").concat(R._action,">"):"[".concat(h.requestSourceName,"] response data received from FUNCTION")})),typeof this.response!="undefined"&&typeof this.response$=="undefined")throw new Error("Cannot have a response parameter without a request parameter")}}},{key:"initState",value:function(){var h=this;this.model!=null&&(this.model[at]===void 0?this.model[at]=L({},this.stateSourceName,function($,T){return D({},h.addCalculated(T))}):Object.keys(this.model[at]).forEach(function($){$!==h.stateSourceName&&(console.warn("".concat(at," can only be used with the ").concat(h.stateSourceName," source... disregarding ").concat($)),delete h.model[at][$])}))}},{key:"initModel$",value:function(){var h=this;if(typeof this.model=="undefined"){this.model$=this.sourceNames.reduce(function(q,k){return q[k]=o.default.never(),q},{});return}var $={type:at,data:this.initialState},T=this.initialState?(0,a.default)(o.default.of($),this.action$).compose((0,i.default)(0)):this.action$,x=this.makeOnAction(T,!0,this.action$),R=this.makeOnAction(this.action$,!1,this.action$),G=Object.entries(this.model),j={};G.forEach(function(q){var k=_(q,2),W=k[0],U=k[1];if(typeof U=="function"&&(U=L({},h.stateSourceName,U)),F(U)!=="object")throw new Error("Entry for each action must be an object: ".concat(h.name," ").concat(W));var X=Object.entries(U);X.forEach(function(rt){var it=_(rt,2),ot=it[0],K=it[1],Q=ot==h.stateSourceName,tt=Q?x:R,J=tt(W,K),st=J.compose(h.log(function(ft){if(Q)return"State reducer added: <".concat(W,">");var V=ft&&(ft.type||ft.command||ft.name||ft.key||Array.isArray(ft)&&"Array"||ft);return"Data sent to [".concat(ot,"]: <").concat(W,"> ").concat(V)}));Array.isArray(j[ot])?j[ot].push(st):j[ot]=[st]})});var B=Object.entries(j).reduce(function(q,k){var W=_(k,2),U=W[0],X=W[1];return q[U]=o.default.merge.apply(o.default,[o.default.never()].concat(P(X))),q},{});this.model$=B}},{key:"initSendResponse$",value:function(){var h=this,$=F(this.response);if($!="function"&&$!="undefined")throw new Error("The response parameter must be a function");if($=="undefined"){this.response$&&this.response$.subscribe({next:this.log(function(j){var B=j._reqId,q=j._action;return"Unhandled response for request: ".concat(q," ").concat(B)})}),this.sendResponse$=o.default.never();return}var T={select:function(B){return typeof B=="undefined"?h.response$:(Array.isArray(B)||(B=[B]),h.response$.filter(function(q){var k=q._action;return B.length>0?k==="FUNCTION"||B.includes(k):!0}))}},x=this.response(T);if(F(x)!="object")throw new Error("The response function must return an object");var R=Object.entries(x),G=R.reduce(function(j,B){var q=_(B,2),k=q[0],W=q[1],U=W.map(function(X){var rt=X._reqId,it=X._action,ot=X.data;if(!rt)throw new Error("No request id found for response for: ".concat(k));return{_reqId:rt,_action:it,command:k,data:ot}});return[].concat(P(j),[U])},[]);this.sendResponse$=o.default.merge.apply(o.default,P(G)).compose(this.log(function(j){j._reqId;var B=j._action;return"[".concat(h.requestSourceName,"] response sent for: <").concat(B,">")}))}},{key:"initChildren$",value:function(){var h=this,$=this.sourceNames.reduce(function(T,x){return x==h.DOMSourceName?T[x]={}:T[x]=[],T},{});this.children$=Object.entries(this.children).reduce(function(T,x){var R=_(x,2),G=R[0],j=R[1],B=j(h.sources);return h.sourceNames.forEach(function(q){q==h.DOMSourceName?T[q][G]=B[q]:T[q].push(B[q])}),T},$)}},{key:"initSubComponentSink$",value:function(){var h=this,$=o.default.create({start:function(x){h.newSubComponentSinks=x.next.bind(x)},stop:function(x){}});$.subscribe({next:function(x){return x}}),this.subComponentSink$=$.filter(function(T){return Object.keys(T).length>0})}},{key:"initVdom$",value:function(){var h=this;if(typeof this.view!="function"){this.vdom$=o.default.of(null);return}var $=this.sources[this.stateSourceName],T=D({},this.children$[this.DOMSourceName]),x=$&&$.isolateSource($,{get:function(W){return h.addCalculated(W)}}),R=x&&x.stream||o.default.never();T.state=R,T[this.stateSourceName]=R,this.sources.props$&&(T.props=this.sources.props$),this.sources.children$&&(T.children=this.sources.children$);var G=Object.entries(T).reduce(function(k,W){var U=_(W,2),X=U[0],rt=U[1];return k.names.push(X),k.streams.push(rt),k},{names:[],streams:[]}),j=o.default.combine.apply(o.default,P(G.streams)),B=j.compose((0,u.default)(1)).map(function(k){return G.names.reduce(function(W,U,X){return W[U]=k[X],W},{})}),q=Object.keys(this.components);this.vdom$=B.fold(function(k,W){var U=h.view(W)||{sel:"div",data:{},children:[]},X=ur(U,q),rt=Object.entries(X),it={"::ROOT::":U};if(rt.length===0)return it;var ot=rt.reduce(function(K,Q){var tt=_(Q,2),J=tt[0],st=tt[1],ft=st.sel,V=st.data,gt=V.props||{},Pt=st.children||[],Ut=V.isCollection||!1,Ce=V.isSwitchable||!1;if(k[J]){var Gt=k[J];return K[J]=Gt,Gt.props$.shamefullySendNext(gt),Gt.children$.shamefullySendNext(Pt),K}var cr=h.components[ft],$t=o.default.create().startWith(gt),te=o.default.create().startWith(Pt),Tt,xt;if(Ut){var jt;Tt=new n.StateSource($t.map(function(Rt){return Rt.value}).remember());var Me=D(D({},h.sources),{},(jt={},L(jt,h.stateSourceName,Tt),L(jt,"props$",$t),L(jt,"children$",te),jt)),Ie=h.components[V.component],kt={get:function(Lt){return Lt},set:function(Lt){return Lt}};xt=(0,r.default)(Ie,kt)(Me)}else if(!Ce){var Nt,Ht=function(Lt){var le=Lt.state;if(typeof le=="undefined")return Lt;if(F(le)!=="object")return le;var dr=D({},Lt);return delete dr.state,D(D({},dr),le)};Tt=new n.StateSource($t.map(Ht));var pr=D(D({},h.sources),{},(Nt={},L(Nt,h.stateSourceName,Tt),L(Nt,"props$",$t),L(Nt,"children$",te),Nt));xt=cr(pr)}var ee=xt[h.DOMSourceName];return xt[h.DOMSourceName]=Tt.stream.map(function(Rt){return ee.compose((0,u.default)(10))}).flatten(),K[J]={sink$:xt,props$:$t,children$:te},K},it);return ot},{}).map(function(k){var W=k["::ROOT::"],U=[],X=Object.entries(k).filter(function(K){var Q=_(K,1),tt=Q[0];return tt!=="::ROOT::"});if(X.length===0)return o.default.of(W);var rt=X.reduce(function(K,Q){var tt=_(Q,2);tt[0];var J=tt[1];return Object.entries(J.sink$).forEach(function(st){var ft=_(st,2),V=ft[0],gt=ft[1];K[V]||(K[V]=[]),V!==h.DOMSourceName&&K[V].push(gt)}),K},{}),it=Object.entries(rt).reduce(function(K,Q){var tt=_(Q,2),J=tt[0],st=tt[1];return K[J]=o.default.merge.apply(o.default,P(st)),K},{});h.newSubComponentSinks(it);var ot=X.map(function(K){var Q=_(K,2),tt=Q[0],J=Q[1];return U.push(tt),J.sink$[h.DOMSourceName]});return ot.length===0?o.default.of(W):o.default.combine.apply(o.default,P(ot)).map(function(K){var Q=K.reduce(function(J,st,ft){return J[U[ft]]=st,J},{}),tt=fr(W,Q,q);return tt})}).flatten().filter(function(k){return!!k}).remember().compose(this.log("View Rendered"))}},{key:"initSinks",value:function(){var h=this;this.sinks=this.sourceNames.reduce(function($,T){if(T==h.DOMSourceName)return $;var x=h.subComponentSink$?h.subComponentSink$.map(function(R){return R[T]}).filter(function(R){return!!R}).flatten():o.default.never();return T===h.stateSourceName?$[T]=o.default.merge.apply(o.default,[h.model$[T]||o.default.never(),h.sources[h.stateSourceName].stream.filter(function(R){return!1})].concat(P(h.children$[T]))):$[T]=o.default.merge.apply(o.default,[h.model$[T]||o.default.never(),x].concat(P(h.children$[T]))),$},{}),this.sinks[this.DOMSourceName]=this.vdom$,this.sinks[this.requestSourceName]=o.default.merge(this.sendResponse$,this.sinks[this.requestSourceName])}},{key:"makeOnAction",value:function(h){var $=this,T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,x=arguments.length>2?arguments[2]:void 0;return x=x||h,function(R,G){var j=h.filter(function(k){var W=k.type;return W==R}),B;if(typeof G=="function")B=j.map(function(k){var W=function(Q,tt){var J=k._reqId||k.req&&k.req.id,st=J?F(tt)=="object"?D(D({},tt),{},{_reqId:J,_action:R}):{data:tt,_reqId:J,_action:R}:tt;setTimeout(function(){x.shamefullySendNext({type:Q,data:st})},10)},U=k.data;if(U&&U.data&&U._reqId&&(U=U.data),T)return function(K){var Q=$.isSubComponent?$.currentState:K,tt=$.addCalculated(Q),J=G(tt,U,W,k.req);return J==_t?Q:$.cleanupCalculated(J)};var X=$.addCalculated($.currentState),rt=G(X,U,W,k.req),it=F(rt),ot=k._reqId||k.req&&k.req.id;if(["string","number","boolean","function"].includes(it))return rt;if(it=="object")return D(D({},rt),{},{_reqId:ot,_action:R});if(it=="undefined")return console.warn("'undefined' value sent to ".concat(R)),rt;throw new Error("Invalid reducer type for ".concat(R," ").concat(it))}).filter(function(k){return k!=_t});else if(G===void 0||G===!0)B=j.map(function(k){var W=k.data;return W});else{var q=G;B=j.mapTo(q)}return B}}},{key:"addCalculated",value:function(h){if(!this.calculated||F(h)!=="object")return h;if(F(this.calculated)!=="object")throw new Error("'calculated' parameter must be an object mapping calculated state field named to functions");var $=Object.entries(this.calculated),T=$.reduce(function(x,R){var G=_(R,2),j=G[0],B=G[1];if(typeof B!="function")throw new Error("Missing or invalid calculator function for calculated field '".concat(j));try{x[j]=B(h)}catch(q){console.warn("Calculated field '".concat(j,"' threw an error during calculation: ").concat(q.message))}return x},{});return D(D({},h),T)}},{key:"cleanupCalculated",value:function(h){var $=this;if(this.storeCalculatedInState)return this.addCalculated(h);if(!this.calculated||!h||F(h)!=="object")return h;var T=Object.keys(this.calculated),x=D({},h);return T.forEach(function(R){$.initialState&&typeof $.initialState[R]!="undefined"?x[R]=$.initialState[R]:delete x[R]}),x}}]),v}();function Qt(v){return function(M){var h=typeof M=="function"?M:function($){return M};return function($){return $.debug(function(T){(Z.DEBUG=="true"||Z.DEBUG===!0)&&console.log("[".concat(v,"] ").concat(h(T)))})}}}function ur(v,M){var h,$=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!v)return{};if((h=v.data)!==null&&h!==void 0&&h.componentsProcessed)return{};$||(v.data.componentsProcessed=!0);var T=v.sel,x=T&&T.toLowerCase()==="collection",R=T&&T.toLowerCase()==="switchable",G=T&&["collection","swtichable"].concat(P(M)).includes(v.sel),j=v.data&&v.data.props||{},B=v.children||[],q={};if(G){var k=lr(v);if(x){if(!j.component)throw new Error("Collection element missing required 'component' property");if(typeof j.component!="string")throw new Error("Invalid 'component' property of collection element: found ".concat(F(j.component)," requires string"));if(!M.includes(j.component))throw new Error("Specified component for collection not found: ".concat(j.component));(!j.value||!Array.isArray(j.value))&&console.warn("No valid array found in the 'value' property of collection ".concat(j.component,": no collection components will be created")),v.data.isCollection=!0,v.data.component=j.component}else if(R){if(!j.components)throw new Error("Switchable element missing required 'components' property");if(F(j.components)!=="object")throw new Error("Invalid 'components' property of switchable element: found ".concat(F(j.components)," requires object mapping names to component factories"));var W=Object.values(j.components);if(!W.every(function(X){return typeof X=="function"}))throw new Error("One or more invalid component factories for switchable element is not a valid component factory");if(!j.current||typeof j.current!="string")throw new Error("Missing or invalid 'current' property for switchable element: found ".concat(F(j.current)," requires string"));var U=Object.keys(j.components);if(!U.includes(j.current))throw new Error("Component '".concat(j.current,"' not found in switchable element"));v.data.isSwitchable=!0,v.data.components=j.components,v.data.currentComponent=j.current}q[k]=v}return B.length>0&&B.map(function(X){return ur(X,M,!0)}).forEach(function(X){Object.entries(X).forEach(function(rt){var it=_(rt,2),ot=it[0],K=it[1];return q[ot]=K})}),q}function fr(v,M,h){var $,T,x,R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!!v){if(($=v.data)!==null&&$!==void 0&&$.componentsInjected)return v;!R&&v.data&&(v.data.componentsInjected=!0);var G=v.sel||"NO SELECTOR",j=["collection","swtichable"].concat(P(h)).includes(G),B=v==null||(T=v.data)===null||T===void 0?void 0:T.isCollection;v==null||(x=v.data)===null||x===void 0||x.isSwitchable,v.data&&v.data.props;var q=v.children||[];if(j){var k=lr(v),W=M[k];return B?(v.sel="div",delete v.elm,v.children=W,v):W}else return q.length>0&&(v.children=q.map(function(U){return fr(U,M,h)}).flat()),v}}function lr(v){var M=v.sel,h=v.data&&v.data.props||{},$=h.id&&JSON.stringify(h.id)||JSON.stringify(h);return"".concat(M,"::").concat($)}})(Kr);var bn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=m;var t=i(ut),r=n(Zt);function n(d){return d&&d.__esModule?d:{default:d}}function o(d){if(typeof WeakMap!="function")return null;var g=new WeakMap,A=new WeakMap;return(o=function(D){return D?A:g})(d)}function i(d,g){if(!g&&d&&d.__esModule)return d;if(d===null||p(d)!=="object"&&typeof d!="function")return{default:d};var A=o(g);if(A&&A.has(d))return A.get(d);var I={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var L in d)if(L!=="default"&&Object.prototype.hasOwnProperty.call(d,L)){var F=D?Object.getOwnPropertyDescriptor(d,L):null;F&&(F.get||F.set)?Object.defineProperty(I,L,F):I[L]=d[L]}return I.default=d,A&&A.set(d,I),I}function a(d){return b(d)||c(d)||s(d)||u()}function u(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c(d){if(typeof Symbol!="undefined"&&d[Symbol.iterator]!=null||d["@@iterator"]!=null)return Array.from(d)}function b(d){if(Array.isArray(d))return _(d)}function E(d,g){var A=Object.keys(d);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(d);g&&(I=I.filter(function(D){return Object.getOwnPropertyDescriptor(d,D).enumerable})),A.push.apply(A,I)}return A}function w(d){for(var g=1;g<arguments.length;g++){var A=arguments[g]!=null?arguments[g]:{};g%2?E(Object(A),!0).forEach(function(I){P(d,I,A[I])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(A)):E(Object(A)).forEach(function(I){Object.defineProperty(d,I,Object.getOwnPropertyDescriptor(A,I))})}return d}function P(d,g,A){return g in d?Object.defineProperty(d,g,{value:A,enumerable:!0,configurable:!0,writable:!0}):d[g]=A,d}function S(d,g){return y(d)||l(d,g)||s(d,g)||f()}function f(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s(d,g){if(!!d){if(typeof d=="string")return _(d,g);var A=Object.prototype.toString.call(d).slice(8,-1);if(A==="Object"&&d.constructor&&(A=d.constructor.name),A==="Map"||A==="Set")return Array.from(d);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return _(d,g)}}function _(d,g){(g==null||g>d.length)&&(g=d.length);for(var A=0,I=new Array(g);A<g;A++)I[A]=d[A];return I}function l(d,g){var A=d==null?null:typeof Symbol!="undefined"&&d[Symbol.iterator]||d["@@iterator"];if(A!=null){var I=[],D=!0,L=!1,F,Z;try{for(A=A.call(d);!(D=(F=A.next()).done)&&(I.push(F.value),!(g&&I.length===g));D=!0);}catch(H){L=!0,Z=H}finally{try{!D&&A.return!=null&&A.return()}finally{if(L)throw Z}}return I}}function y(d){if(Array.isArray(d))return d}function p(d){return p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},p(d)}function m(d,g,A){var I=arguments.length>3&&arguments[3]!==void 0?arguments[3]:["DOM"],D=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"STATE",L=p(g);if(!g)throw new Error("Missing 'name$' parameter for switchable()");if(!(L==="string"||L==="function"||g instanceof t.Stream))throw new Error("Invalid 'name$' parameter for switchable(): expects Stream, String, or Function");if(g instanceof t.Stream){var F=g.compose((0,r.default)()).startWith(A).remember();return function(H){return O(d,H,F,I)}}else{var Z=L==="function"&&g||function(H){return H[g]};return function(H){var ct=H&&(typeof D=="string"&&H[D]||H.STATE||H.state).stream;if(!ct instanceof t.Stream)throw new Error("Could not find the state source: ".concat(D));var at=ct.map(Z).filter(function(pt){return typeof pt=="string"}).compose((0,r.default)()).startWith(A).remember();return O(d,H,at,I,D)}}}function O(d,g,A){var I=arguments.length>3&&arguments[3]!==void 0?arguments[3]:["DOM"],D=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"STATE";typeof I=="string"&&(I=[I]);var L=Object.entries(d).map(function(Z){var H=S(Z,2),ct=H[0],at=H[1];if(g[D]){var pt=g[D].stream,mt=t.default.combine(A,pt).filter(function(Dt){var Et=S(Dt,2),Qt=Et[0];return Et[1],Qt==ct}).map(function(Dt){var Et=S(Dt,2);Et[0];var Qt=Et[1];return Qt}).remember(),_t=new g[D].constructor(mt,g[D]._name);return[ct,at(w(w({},g),{},{state:_t}))]}return[ct,at(g)]}),F=Object.keys(g).reduce(function(Z,H){if(I.includes(H))Z[H]=A.map(function(at){var pt=L.find(function(mt){var _t=S(mt,2),Dt=_t[0];return _t[1],Dt===at});return pt&&pt[1][H]||t.default.never()}).flatten().remember().startWith("");else{var ct=L.filter(function(at){var pt=S(at,2);pt[0];var mt=pt[1];return mt[H]!==void 0}).map(function(at){var pt=S(at,2);pt[0];var mt=pt[1];return mt[H]});Z[H]=t.default.merge.apply(t.default,a(ct))}return Z},{});return F}})(bn);var _n={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=f;var t=r(ut);function r(s){return s&&s.__esModule?s:{default:s}}function n(s,_){return a(s)||i(s,_)||E(s,_)||o()}function o(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i(s,_){var l=s==null?null:typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(l!=null){var y=[],p=!0,m=!1,O,d;try{for(l=l.call(s);!(p=(O=l.next()).done)&&(y.push(O.value),!(_&&y.length===_));p=!0);}catch(g){m=!0,d=g}finally{try{!p&&l.return!=null&&l.return()}finally{if(m)throw d}}return y}}function a(s){if(Array.isArray(s))return s}function u(s,_){var l=typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(!l){if(Array.isArray(s)||(l=E(s))||_&&s&&typeof s.length=="number"){l&&(s=l);var y=0,p=function(){};return{s:p,n:function(){return y>=s.length?{done:!0}:{done:!1,value:s[y++]}},e:function(A){throw A},f:p}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var m=!0,O=!1,d;return{s:function(){l=l.call(s)},n:function(){var A=l.next();return m=A.done,A},e:function(A){O=!0,d=A},f:function(){try{!m&&l.return!=null&&l.return()}finally{if(O)throw d}}}}function c(s){return P(s)||w(s)||E(s)||b()}function b(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E(s,_){if(!!s){if(typeof s=="string")return S(s,_);var l=Object.prototype.toString.call(s).slice(8,-1);if(l==="Object"&&s.constructor&&(l=s.constructor.name),l==="Map"||l==="Set")return Array.from(s);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return S(s,_)}}function w(s){if(typeof Symbol!="undefined"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function P(s){if(Array.isArray(s))return S(s)}function S(s,_){(_==null||_>s.length)&&(_=s.length);for(var l=0,y=new Array(_);l<_;l++)y[l]=s[l];return y}function f(s){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=_.events,y=l===void 0?["input","submit"]:l,p=_.preventDefault,m=p===void 0?!0:p;typeof y=="string"&&(y=[y]);var O=y.map(function(g){return s.events(g)}),d=t.default.merge.apply(t.default,c(O));return d.map(function(g){m&&g.preventDefault();var A=g.type==="submit"?g.srcElement:g.currentTarget,I=new FormData(A),D={};D.event=g,D.eventType=g.type;var L=A.querySelector("input[type=submit]:focus");if(L){var F=L.name,Z=L.value;D[F||"submit"]=Z}var H=u(I.entries()),ct;try{for(H.s();!(ct=H.n()).done;){var at=n(ct.value,2),pt=at[0],mt=at[1];D[pt]=mt}}catch(_t){H.e(_t)}finally{H.f()}return D})}})(_n);var wn={};function ca(){var e;return typeof window!="undefined"?e=window:typeof global!="undefined"?e=global:e=this,e.Cyclejs=e.Cyclejs||{},e=e.Cyclejs,e.adaptStream=e.adaptStream||function(t){return t},e}function pa(e){return ca().adaptStream(e)}function da(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=et.create());return t}function ha(e,t){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n](t[n],n),r[n]&&typeof r[n]=="object"&&(r[n]._isCycleSource=n));return r}function va(e){for(var t in e)e.hasOwnProperty(t)&&e[t]&&typeof e[t].shamefullySendNext=="function"&&(e[t]=pa(e[t]));return e}function ya(e,t){var r=gn(),n=Object.keys(e).filter(function(u){return!!t[u]}),o={},i={};n.forEach(function(u){o[u]={_n:[],_e:[]},i[u]={next:function(c){return o[u]._n.push(c)},error:function(c){return o[u]._e.push(c)},complete:function(){}}});var a=n.map(function(u){return et.fromObservable(e[u]).subscribe(i[u])});return n.forEach(function(u){var c=t[u],b=function(w){r(function(){return c._n(w)})},E=function(w){r(function(){(console.error||console.log)(w),c._e(w)})};o[u]._n.forEach(b),o[u]._e.forEach(E),i[u].next=b,i[u].error=E,i[u]._n=b,i[u]._e=E}),o=null,function(){a.forEach(function(c){return c.unsubscribe()})}}function ma(e){Object.keys(e).forEach(function(t){return e[t]._c()})}function ga(e){for(var t in e)e.hasOwnProperty(t)&&e[t]&&e[t].dispose&&e[t].dispose()}function Sn(e){return Object.keys(e).length===0}function On(e,t){if(typeof e!="function")throw new Error("First argument given to Cycle must be the 'main' function.");if(typeof t!="object"||t===null)throw new Error("Second argument given to Cycle must be an object with driver functions as properties.");if(Sn(t))throw new Error("Second argument given to Cycle must be an object with at least one driver function declared as a property.");var r=An(t),n=e(r.sources);typeof window!="undefined"&&(window.Cyclejs=window.Cyclejs||{},window.Cyclejs.sinks=n);function o(){var i=r.run(n);return function(){i(),r.dispose()}}return{sinks:n,sources:r.sources,run:o}}function An(e){if(typeof e!="object"||e===null)throw new Error("Argument given to setupReusable must be an object with driver functions as properties.");if(Sn(e))throw new Error("Argument given to setupReusable must be an object with at least one driver function declared as a property.");var t=da(e),r=ha(e,t),n=va(r);function o(a){return ya(a,t)}function i(){ga(n),ma(t)}return{sources:n,run:o,dispose:i}}function Er(e,t){var r=On(e,t);return typeof window!="undefined"&&window.CyclejsDevTool_startGraphSerializer&&window.CyclejsDevTool_startGraphSerializer(r.sinks),r.run()}var ba=Object.freeze(Object.defineProperty({__proto__:null,setup:On,setupReusable:An,run:Er,default:Er},Symbol.toStringTag,{value:"Module"})),_a=Ae(ba);function wa(e,t){return document.createElement(e,t)}function Sa(e,t,r){return document.createElementNS(e,t,r)}function Oa(){return document.createDocumentFragment()}function Aa(e){return document.createTextNode(e)}function Ea(e){return document.createComment(e)}function Pa(e,t,r){e.insertBefore(t,r)}function Na(e,t){e.removeChild(t)}function $a(e,t){e.appendChild(t)}function Ca(e){return e.parentNode}function Ma(e){return e.nextSibling}function Ia(e){return e.tagName}function Da(e,t){e.textContent=t}function Ta(e){return e.textContent}function xa(e){return e.nodeType===1}function ja(e){return e.nodeType===3}function ka(e){return e.nodeType===8}function Ra(e){return e.nodeType===11}const En={createElement:wa,createElementNS:Sa,createTextNode:Aa,createDocumentFragment:Oa,createComment:Ea,insertBefore:Pa,removeChild:Na,appendChild:$a,parentNode:Ca,nextSibling:Ma,tagName:Ia,setTextContent:Da,getTextContent:Ta,isElement:xa,isText:ja,isComment:ka,isDocumentFragment:Ra};function At(e,t,r,n,o){const i=t===void 0?void 0:t.key;return{sel:e,data:t,children:r,text:n,elm:o,key:i}}const Ke=Array.isArray;function ye(e){return typeof e=="string"||typeof e=="number"||e instanceof String||e instanceof Number}function Fe(e){return e===void 0}function yt(e){return e!==void 0}const Be=At("",{},[],void 0,void 0);function re(e,t){var r,n;const o=e.key===t.key,i=((r=e.data)===null||r===void 0?void 0:r.is)===((n=t.data)===null||n===void 0?void 0:n.is);return e.sel===t.sel&&o&&i}function La(){throw new Error("The document fragment is not supported on this platform.")}function Fa(e,t){return e.isElement(t)}function Ba(e,t){return e.isDocumentFragment(t)}function qa(e,t,r){var n;const o={};for(let i=t;i<=r;++i){const a=(n=e[i])===null||n===void 0?void 0:n.key;a!==void 0&&(o[a]=i)}return o}const Wa=["create","update","remove","destroy","pre","post"];function Ua(e,t,r){const n={create:[],update:[],remove:[],destroy:[],pre:[],post:[]},o=t!==void 0?t:En;for(const f of Wa)for(const s of e){const _=s[f];_!==void 0&&n[f].push(_)}function i(f){const s=f.id?"#"+f.id:"",_=f.getAttribute("class"),l=_?"."+_.split(" ").join("."):"";return At(o.tagName(f).toLowerCase()+s+l,{},[],void 0,f)}function a(f){return At(void 0,{},[],void 0,f)}function u(f,s){return function(){if(--s===0){const l=o.parentNode(f);o.removeChild(l,f)}}}function c(f,s){var _,l,y,p;let m,O=f.data;if(O!==void 0){const A=(_=O.hook)===null||_===void 0?void 0:_.init;yt(A)&&(A(f),O=f.data)}const d=f.children,g=f.sel;if(g==="!")Fe(f.text)&&(f.text=""),f.elm=o.createComment(f.text);else if(g!==void 0){const A=g.indexOf("#"),I=g.indexOf(".",A),D=A>0?A:g.length,L=I>0?I:g.length,F=A!==-1||I!==-1?g.slice(0,Math.min(D,L)):g,Z=f.elm=yt(O)&&yt(m=O.ns)?o.createElementNS(m,F,O):o.createElement(F,O);for(D<L&&Z.setAttribute("id",g.slice(D+1,L)),I>0&&Z.setAttribute("class",g.slice(L+1).replace(/\./g," ")),m=0;m<n.create.length;++m)n.create[m](Be,f);if(Ke(d))for(m=0;m<d.length;++m){const ct=d[m];ct!=null&&o.appendChild(Z,c(ct,s))}else ye(f.text)&&o.appendChild(Z,o.createTextNode(f.text));const H=f.data.hook;yt(H)&&((l=H.create)===null||l===void 0||l.call(H,Be,f),H.insert&&s.push(f))}else if(((y=r==null?void 0:r.experimental)===null||y===void 0?void 0:y.fragments)&&f.children){const A=f.children;for(f.elm=((p=o.createDocumentFragment)!==null&&p!==void 0?p:La)(),m=0;m<n.create.length;++m)n.create[m](Be,f);for(m=0;m<A.length;++m){const I=A[m];I!=null&&o.appendChild(f.elm,c(I,s))}}else f.elm=o.createTextNode(f.text);return f.elm}function b(f,s,_,l,y,p){for(;l<=y;++l){const m=_[l];m!=null&&o.insertBefore(f,c(m,p),s)}}function E(f){var s,_;const l=f.data;if(l!==void 0){(_=(s=l==null?void 0:l.hook)===null||s===void 0?void 0:s.destroy)===null||_===void 0||_.call(s,f);for(let y=0;y<n.destroy.length;++y)n.destroy[y](f);if(f.children!==void 0)for(let y=0;y<f.children.length;++y){const p=f.children[y];p!=null&&typeof p!="string"&&E(p)}}}function w(f,s,_,l){for(var y,p;_<=l;++_){let m,O;const d=s[_];if(d!=null)if(yt(d.sel)){E(d),m=n.remove.length+1,O=u(d.elm,m);for(let A=0;A<n.remove.length;++A)n.remove[A](d,O);const g=(p=(y=d==null?void 0:d.data)===null||y===void 0?void 0:y.hook)===null||p===void 0?void 0:p.remove;yt(g)?g(d,O):O()}else o.removeChild(f,d.elm)}}function P(f,s,_,l){let y=0,p=0,m=s.length-1,O=s[0],d=s[m],g=_.length-1,A=_[0],I=_[g],D,L,F,Z;for(;y<=m&&p<=g;)O==null?O=s[++y]:d==null?d=s[--m]:A==null?A=_[++p]:I==null?I=_[--g]:re(O,A)?(S(O,A,l),O=s[++y],A=_[++p]):re(d,I)?(S(d,I,l),d=s[--m],I=_[--g]):re(O,I)?(S(O,I,l),o.insertBefore(f,O.elm,o.nextSibling(d.elm)),O=s[++y],I=_[--g]):re(d,A)?(S(d,A,l),o.insertBefore(f,d.elm,O.elm),d=s[--m],A=_[++p]):(D===void 0&&(D=qa(s,y,m)),L=D[A.key],Fe(L)?o.insertBefore(f,c(A,l),O.elm):(F=s[L],F.sel!==A.sel?o.insertBefore(f,c(A,l),O.elm):(S(F,A,l),s[L]=void 0,o.insertBefore(f,F.elm,O.elm))),A=_[++p]);p<=g&&(Z=_[g+1]==null?null:_[g+1].elm,b(f,Z,_,p,g,l)),y<=m&&w(f,s,y,m)}function S(f,s,_){var l,y,p,m,O,d,g,A;const I=(l=s.data)===null||l===void 0?void 0:l.hook;(y=I==null?void 0:I.prepatch)===null||y===void 0||y.call(I,f,s);const D=s.elm=f.elm,L=f.children,F=s.children;if(f!==s){if(s.data!==void 0||yt(s.text)&&s.text!==f.text){(p=s.data)!==null&&p!==void 0||(s.data={}),(m=f.data)!==null&&m!==void 0||(f.data={});for(let Z=0;Z<n.update.length;++Z)n.update[Z](f,s);(g=(d=(O=s.data)===null||O===void 0?void 0:O.hook)===null||d===void 0?void 0:d.update)===null||g===void 0||g.call(d,f,s)}Fe(s.text)?yt(L)&&yt(F)?L!==F&&P(D,L,F,_):yt(F)?(yt(f.text)&&o.setTextContent(D,""),b(D,null,F,0,F.length-1,_)):yt(L)?w(D,L,0,L.length-1):yt(f.text)&&o.setTextContent(D,""):f.text!==s.text&&(yt(L)&&w(D,L,0,L.length-1),o.setTextContent(D,s.text)),(A=I==null?void 0:I.postpatch)===null||A===void 0||A.call(I,f,s)}}return function(s,_){let l,y,p;const m=[];for(l=0;l<n.pre.length;++l)n.pre[l]();for(Fa(o,s)?s=i(s):Ba(o,s)&&(s=a(s)),re(s,_)?S(s,_,m):(y=s.elm,p=o.parentNode(y),c(_,m),p!==null&&(o.insertBefore(p,_.elm,o.nextSibling(y)),w(p,[s],0,0))),l=0;l<m.length;++l)m[l].data.hook.insert(m[l]);for(l=0;l<n.post.length;++l)n.post[l]();return _}}function ar(e,t,r){if(e.ns="http://www.w3.org/2000/svg",r!=="foreignObject"&&t!==void 0)for(let n=0;n<t.length;++n){const o=t[n];if(typeof o=="string")continue;const i=o.data;i!==void 0&&ar(i,o.children,o.sel)}}function Ot(e,t,r){let n={},o,i,a;if(r!==void 0?(t!==null&&(n=t),Ke(r)?o=r:ye(r)?i=r.toString():r&&r.sel&&(o=[r])):t!=null&&(Ke(t)?o=t:ye(t)?i=t.toString():t&&t.sel?o=[t]:n=t),o!==void 0)for(a=0;a<o.length;++a)ye(o[a])&&(o[a]=At(void 0,void 0,void 0,o[a],void 0));return e[0]==="s"&&e[1]==="v"&&e[2]==="g"&&(e.length===3||e[3]==="."||e[3]==="#")&&ar(n,o,e),At(e,n,o,i,void 0)}function Je(e,t){const r=t!==void 0?t:En;let n;if(r.isElement(e)){const o=e.id?"#"+e.id:"",i=e.getAttribute("class"),a=i?"."+i.split(" ").join("."):"",u=r.tagName(e).toLowerCase()+o+a,c={},b={},E={},w=[];let P,S,f;const s=e.attributes,_=e.childNodes;for(S=0,f=s.length;S<f;S++)P=s[S].nodeName,P[0]==="d"&&P[1]==="a"&&P[2]==="t"&&P[3]==="a"&&P[4]==="-"?b[P.slice(5)]=s[S].nodeValue||"":P!=="id"&&P!=="class"&&(c[P]=s[S].nodeValue);for(S=0,f=_.length;S<f;S++)w.push(Je(_[S],t));return Object.keys(c).length>0&&(E.attrs=c),Object.keys(b).length>0&&(E.datasets=b),u[0]==="s"&&u[1]==="v"&&u[2]==="g"&&(u.length===3||u[3]==="."||u[3]==="#")&&ar(E,w,u),At(u,E,w,void 0,e)}else return r.isText(e)?(n=r.getTextContent(e),At(void 0,void 0,void 0,n,e)):r.isComment(e)?(n=r.getTextContent(e),At("!",{},[],n,e)):At("",{},[],void 0,e)}const Ga="http://www.w3.org/1999/xlink",Ha="http://www.w3.org/XML/1998/namespace",Pr=58,za=120;function Nr(e,t){let r;const n=t.elm;let o=e.data.attrs,i=t.data.attrs;if(!(!o&&!i)&&o!==i){o=o||{},i=i||{};for(r in i){const a=i[r];o[r]!==a&&(a===!0?n.setAttribute(r,""):a===!1?n.removeAttribute(r):r.charCodeAt(0)!==za?n.setAttribute(r,a):r.charCodeAt(3)===Pr?n.setAttributeNS(Ha,r,a):r.charCodeAt(5)===Pr?n.setAttributeNS(Ga,r,a):n.setAttribute(r,a))}for(r in o)r in i||n.removeAttribute(r)}}const Ka={create:Nr,update:Nr};function $r(e,t){let r,n;const o=t.elm;let i=e.data.class,a=t.data.class;if(!(!i&&!a)&&i!==a){i=i||{},a=a||{};for(n in i)i[n]&&!Object.prototype.hasOwnProperty.call(a,n)&&o.classList.remove(n);for(n in a)r=a[n],r!==i[n]&&o.classList[r?"add":"remove"](n)}}const Ja={create:$r,update:$r},Cr=/[A-Z]/g;function Mr(e,t){const r=t.elm;let n=e.data.dataset,o=t.data.dataset,i;if(!n&&!o||n===o)return;n=n||{},o=o||{};const a=r.dataset;for(i in n)o[i]||(a?i in a&&delete a[i]:r.removeAttribute("data-"+i.replace(Cr,"-$&").toLowerCase()));for(i in o)n[i]!==o[i]&&(a?a[i]=o[i]:r.setAttribute("data-"+i.replace(Cr,"-$&").toLowerCase(),o[i]))}const Ya={create:Mr,update:Mr};function Ir(e,t){let r,n,o;const i=t.elm;let a=e.data.props,u=t.data.props;if(!(!a&&!u)&&a!==u){a=a||{},u=u||{};for(r in u)n=u[r],o=a[r],o!==n&&(r!=="value"||i[r]!==n)&&(i[r]=n)}}const Xa={create:Ir,update:Ir},Dr=typeof window!="undefined"&&window.requestAnimationFrame.bind(window)||setTimeout,Va=function(e){Dr(function(){Dr(e)})};let Ye=!1;function Za(e,t,r){Va(function(){e[t]=r})}function Tr(e,t){let r,n;const o=t.elm;let i=e.data.style,a=t.data.style;if(!i&&!a||i===a)return;i=i||{},a=a||{};const u="delayed"in i;for(n in i)a[n]||(n[0]==="-"&&n[1]==="-"?o.style.removeProperty(n):o.style[n]="");for(n in a)if(r=a[n],n==="delayed"&&a.delayed)for(const c in a.delayed)r=a.delayed[c],(!u||r!==i.delayed[c])&&Za(o.style,c,r);else n!=="remove"&&r!==i[n]&&(n[0]==="-"&&n[1]==="-"?o.style.setProperty(n,r):o.style[n]=r)}function Qa(e){let t,r;const n=e.elm,o=e.data.style;if(!(!o||!(t=o.destroy)))for(r in t)n.style[r]=t[r]}function ts(e,t){const r=e.data.style;if(!r||!r.remove){t();return}Ye||(e.elm.offsetLeft,Ye=!0);let n;const o=e.elm;let i=0;const a=r.remove;let u=0;const c=[];for(n in a)c.push(n),o.style[n]=a[n];const E=getComputedStyle(o)["transition-property"].split(", ");for(;i<E.length;++i)c.indexOf(E[i])!==-1&&u++;o.addEventListener("transitionend",function(w){w.target===o&&--u,u===0&&t()})}function es(){Ye=!1}const rs={pre:es,create:Tr,update:Tr,destroy:Qa,remove:ts};function me(e,t){t.elm=e.elm,e.data.fn=t.data.fn,e.data.args=t.data.args,e.data.isolate=t.data.isolate,t.data=e.data,t.children=e.children,t.text=e.text,t.elm=e.elm}function ns(e){var t=e.data,r=t.fn.apply(void 0,t.args);me(r,e)}function os(e,t){var r=e.data,n=t.data,o,i=r.args,a=n.args;for((r.fn!==n.fn||i.length!==a.length)&&me(n.fn.apply(void 0,a),t),o=0;o<a.length;++o)if(i[o]!==a[o]){me(n.fn.apply(void 0,a),t);return}me(e,t)}function is(e,t,r,n){return n===void 0&&(n=r,r=t,t=void 0),Ot(e,{key:t,hook:{init:ns,prepatch:os},fn:r,args:n})}function Se(e,t,r,n,o){r===void 0&&(r=!1),n===void 0&&(n=!1),o===void 0&&(o=!1);var i=null;return Pe.create({start:function(u){n?i=function(b){Nn(b,n),u.next(b)}:i=function(b){u.next(b)},e.addEventListener(t,i,{capture:r,passive:o})},stop:function(){e.removeEventListener(t,i,r),i=null}})}function Pn(e,t){for(var r=Object.keys(e),n=r.length,o=0;o<n;o++){var i=r[o];if(typeof e[i]=="object"&&typeof t[i]=="object"){if(!Pn(e[i],t[i]))return!1}else if(e[i]!==t[i])return!1}return!0}function Nn(e,t){if(t)if(typeof t=="boolean")e.preventDefault();else if(as(t))t(e)&&e.preventDefault();else if(typeof t=="object")Pn(t,e)&&e.preventDefault();else throw new Error("preventDefault has to be either a boolean, predicate function or object")}function as(e){return typeof e=="function"}var ss=function(){function e(t){this._name=t}return e.prototype.select=function(t){return this},e.prototype.elements=function(){var t=lt(et.of([document]));return t._isCycleSource=this._name,t},e.prototype.element=function(){var t=lt(et.of(document));return t._isCycleSource=this._name,t},e.prototype.events=function(t,r,n){r===void 0&&(r={});var o;o=Se(document,t,r.useCapture,r.preventDefault);var i=lt(o);return i._isCycleSource=this._name,i},e}(),us=function(){function e(t){this._name=t}return e.prototype.select=function(t){return this},e.prototype.elements=function(){var t=lt(et.of([document.body]));return t._isCycleSource=this._name,t},e.prototype.element=function(){var t=lt(et.of(document.body));return t._isCycleSource=this._name,t},e.prototype.events=function(t,r,n){r===void 0&&(r={});var o;o=Se(document.body,t,r.useCapture,r.preventDefault);var i=lt(o);return i._isCycleSource=this._name,i},e}();function fs(e){var t=1,r=11;return typeof HTMLElement=="object"?e instanceof HTMLElement||e instanceof DocumentFragment:e&&typeof e=="object"&&e!==null&&(e.nodeType===t||e.nodeType===r)&&typeof e.nodeName=="string"}function ls(e){return e.length>1&&(e[0]==="."||e[0]==="#")}function cs(e){return e.nodeType===11}function ps(e){if(typeof e!="string"&&!fs(e))throw new Error("Given container is not a DOM element neither a selector string.")}function ds(e){var t=typeof e=="string"?document.querySelector(e):e;if(typeof e=="string"&&t===null)throw new Error("Cannot render into unknown element `"+e+"`");return t}function $n(e){for(var t="",r=e.length-1;r>=0&&e[r].type==="selector";r--)t=e[r].scope+" "+t;return t.trim()}function sr(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==t[r].type||e[r].scope!==t[r].scope)return!1;return!0}var Cn=function(){function e(t,r){this.namespace=t,this.isolateModule=r,this._namespace=t.filter(function(n){return n.type!=="selector"})}return e.prototype.isDirectlyInScope=function(t){var r=this.isolateModule.getNamespace(t);if(!r||this._namespace.length>r.length||!sr(this._namespace,r.slice(0,this._namespace.length)))return!1;for(var n=this._namespace.length;n<r.length;n++)if(r[n].type==="total")return!1;return!0},e}();function hs(e){return Array.prototype.slice.call(e)}var Mn=function(){function e(t,r){this.namespace=t,this.isolateModule=r}return e.prototype.call=function(){var t=this.namespace,r=$n(t),n=new Cn(t,this.isolateModule),o=this.isolateModule.getElement(t.filter(function(i){return i.type!=="selector"}));return o===void 0?[]:r===""?[o]:hs(o.querySelectorAll(r)).filter(n.isDirectlyInScope,n).concat(o.matches(r)?[o]:[])},e}(),ae=globalThis&&globalThis.__assign||function(){return ae=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ae.apply(this,arguments)};function vs(e){return function(t,r){return r===":root"?t:t.map(function(n){if(!n)return n;var o=In(r),i=ae({},n,{data:ae({},n.data,{isolate:!n.data||!Array.isArray(n.data.isolate)?e.concat([o]):n.data.isolate})});return ae({},i,{key:i.key!==void 0?i.key:JSON.stringify(i.data.isolate)})})}}function In(e){return{type:ls(e)?"sibling":"total",scope:e}}var Dn=function(){function e(t,r,n,o,i,a){n===void 0&&(n=[]),this._rootElement$=t,this._sanitation$=r,this._namespace=n,this._isolateModule=o,this._eventDelegator=i,this._name=a,this.isolateSource=function(u,c){return new e(u._rootElement$,u._sanitation$,u._namespace.concat(In(c)),u._isolateModule,u._eventDelegator,u._name)},this.isolateSink=vs(this._namespace)}return e.prototype._elements=function(){if(this._namespace.length===0)return this._rootElement$.map(function(r){return[r]});var t=new Mn(this._namespace,this._isolateModule);return this._rootElement$.map(function(){return t.call()})},e.prototype.elements=function(){var t=lt(this._elements().remember());return t._isCycleSource=this._name,t},e.prototype.element=function(){var t=lt(this._elements().filter(function(r){return r.length>0}).map(function(r){return r[0]}).remember());return t._isCycleSource=this._name,t},Object.defineProperty(e.prototype,"namespace",{get:function(){return this._namespace},enumerable:!0,configurable:!0}),e.prototype.select=function(t){if(typeof t!="string")throw new Error("DOM driver's select() expects the argument to be a string as a CSS selector");if(t==="document")return new ss(this._name);if(t==="body")return new us(this._name);var r=t===":root"?[]:this._namespace.concat({type:"selector",scope:t.trim()});return new e(this._rootElement$,this._sanitation$,r,this._isolateModule,this._eventDelegator,this._name)},e.prototype.events=function(t,r,n){if(r===void 0&&(r={}),typeof t!="string")throw new Error("DOM driver's events() expects argument to be a string representing the event type to listen for.");var o=this._eventDelegator.addEventListener(t,this._namespace,r,n),i=lt(o);return i._isCycleSource=this._name,i},e.prototype.dispose=function(){this._sanitation$.shamefullySendNext(null)},e}(),Vt={},ys=bt&&bt.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var i=arguments[t],a=0,u=i.length;a<u;a++,o++)n[o]=i[a];return n};Object.defineProperty(Vt,"__esModule",{value:!0});Vt.SampleCombineOperator=Vt.SampleCombineListener=void 0;var ms=ut,Mt={},Tn=function(){function e(t,r){this.i=t,this.p=r,r.ils[t]=this}return e.prototype._n=function(t){var r=this.p;r.out!==Mt&&r.up(t,this.i)},e.prototype._e=function(t){this.p._e(t)},e.prototype._c=function(){this.p.down(this.i,this)},e}();Vt.SampleCombineListener=Tn;var xn=function(){function e(t,r){this.type="sampleCombine",this.ins=t,this.others=r,this.out=Mt,this.ils=[],this.Nn=0,this.vals=[]}return e.prototype._start=function(t){this.out=t;for(var r=this.others,n=this.Nn=r.length,o=this.vals=new Array(n),i=0;i<n;i++)o[i]=Mt,r[i]._add(new Tn(i,this));this.ins._add(this)},e.prototype._stop=function(){var t=this.others,r=t.length,n=this.ils;this.ins._remove(this);for(var o=0;o<r;o++)t[o]._remove(n[o]);this.out=Mt,this.vals=[],this.ils=[]},e.prototype._n=function(t){var r=this.out;r!==Mt&&(this.Nn>0||r._n(ys([t],this.vals)))},e.prototype._e=function(t){var r=this.out;r!==Mt&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==Mt&&t._c()},e.prototype.up=function(t,r){var n=this.vals[r];this.Nn>0&&n===Mt&&this.Nn--,this.vals[r]=t},e.prototype.down=function(t,r){this.others[t]._remove(r)},e}();Vt.SampleCombineOperator=xn;var jn;jn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return function(o){return new ms.Stream(new xn(o,t))}};var gs=Vt.default=jn;globalThis&&globalThis.__assign;function kn(e){if(!e.sel)return{tagName:"",id:"",className:""};var t=e.sel,r=t.indexOf("#"),n=t.indexOf(".",r),o=r>0?r:t.length,i=n>0?n:t.length,a=r!==-1||n!==-1?t.slice(0,Math.min(o,i)):t,u=o<i?t.slice(o+1,i):void 0,c=n>0?t.slice(i+1).replace(/\./g," "):void 0;return{tagName:a,id:u,className:c}}function bs(e){var t=kn(e).className,r=t===void 0?"":t;if(!e.data)return r;var n=e.data,o=n.class,i=n.props;if(o){var a=Object.keys(o).filter(function(u){return o[u]});r+=" "+a.join(" ")}return i&&i.className&&(r+=" "+i.className),r&&r.trim()}var oe;typeof self!="undefined"?oe=self:typeof window!="undefined"?oe=window:typeof global!="undefined"?oe=global:oe=Function("return this")();var xr=oe.Symbol;typeof xr=="function"&&xr("parent");var _s=function(){function e(t){this.rootElement=t}return e.prototype.call=function(t){if(cs(this.rootElement))return this.wrapDocFrag(t===null?[]:[t]);if(t===null)return this.wrap([]);var r=kn(t),n=r.tagName,o=r.id,i=bs(t),a=t.data||{},u=a.props||{},c=u.id,b=c===void 0?o:c,E=typeof b=="string"&&b.toUpperCase()===this.rootElement.id.toUpperCase()&&n.toUpperCase()===this.rootElement.tagName.toUpperCase()&&i.toUpperCase()===this.rootElement.className.toUpperCase();return E?t:this.wrap([t])},e.prototype.wrapDocFrag=function(t){return At("",{isolate:[]},t,void 0,this.rootElement)},e.prototype.wrap=function(t){var r=this.rootElement,n=r.tagName,o=r.id,i=r.className,a=o?"#"+o:"",u=i?"."+i.split(" ").join("."):"",c=Ot(""+n.toLowerCase()+a+u,{},t);return c.data=c.data||{},c.data.isolate=c.data.isolate||[],c},e}(),ws=[rs,Ja,Xa,Ka,Ya],Rn=function(){function e(t){this.mapper=t,this.tree=[void 0,{}]}return e.prototype.set=function(t,r,n){for(var o=this.tree,i=n!==void 0?n:t.length,a=0;a<i;a++){var u=this.mapper(t[a]),c=o[1][u];c||(c=[void 0,{}],o[1][u]=c),o=c}o[0]=r},e.prototype.getDefault=function(t,r,n){return this.get(t,r,n)},e.prototype.get=function(t,r,n){for(var o=this.tree,i=n!==void 0?n:t.length,a=0;a<i;a++){var u=this.mapper(t[a]),c=o[1][u];if(!c)if(r)c=[void 0,{}],o[1][u]=c;else return;o=c}return r&&!o[0]&&(o[0]=r()),o[0]},e.prototype.delete=function(t){for(var r=this.tree,n=0;n<t.length-1;n++){var o=r[1][this.mapper(t[n])];if(!o)return;r=o}delete r[1][this.mapper(t[t.length-1])]},e}(),Ss=function(){function e(){this.namespaceTree=new Rn(function(t){return t.scope}),this.namespaceByElement=new Map,this.vnodesBeingRemoved=[]}return e.prototype.setEventDelegator=function(t){this.eventDelegator=t},e.prototype.insertElement=function(t,r){this.namespaceByElement.set(r,t),this.namespaceTree.set(t,r)},e.prototype.removeElement=function(t){this.namespaceByElement.delete(t);var r=this.getNamespace(t);r&&this.namespaceTree.delete(r)},e.prototype.getElement=function(t,r){return this.namespaceTree.get(t,void 0,r)},e.prototype.getRootElement=function(t){if(this.namespaceByElement.has(t))return t;for(var r=t;!this.namespaceByElement.has(r);)if(r=r.parentNode,r){if(r.tagName==="HTML")throw new Error("No root element found, this should not happen at all")}else return;return r},e.prototype.getNamespace=function(t){var r=this.getRootElement(t);if(!!r)return this.namespaceByElement.get(r)},e.prototype.createModule=function(){var t=this;return{create:function(r,n){var o=n.elm,i=n.data,a=i===void 0?{}:i,u=a.isolate;Array.isArray(u)&&t.insertElement(u,o)},update:function(r,n){var o=r.elm,i=r.data,a=i===void 0?{}:i,u=n.elm,c=n.data,b=c===void 0?{}:c,E=a.isolate,w=b.isolate;sr(E,w)||Array.isArray(E)&&t.removeElement(o),Array.isArray(w)&&t.insertElement(w,u)},destroy:function(r){t.vnodesBeingRemoved.push(r)},remove:function(r,n){t.vnodesBeingRemoved.push(r),n()},post:function(){for(var r=t.vnodesBeingRemoved,n=r.length-1;n>=0;n--){var o=r[n],i=o.data!==void 0?o.data.isolation:void 0;i!==void 0&&t.removeElement(i),t.eventDelegator.removeElement(o.elm,i)}t.vnodesBeingRemoved=[]}}},e}(),Os=function(){function e(){this.arr=[],this.prios=[]}return e.prototype.add=function(t,r){for(var n=0;n<this.arr.length;n++)if(this.prios[n]<r){this.arr.splice(n,0,t),this.prios.splice(n,0,r);return}this.arr.push(t),this.prios.push(r)},e.prototype.forEach=function(t){for(var r=0;r<this.arr.length;r++)t(this.arr[r],r,this.arr)},e.prototype.delete=function(t){for(var r=0;r<this.arr.length;r++)if(this.arr[r]===t){this.arr.splice(r,1),this.prios.splice(r,1);return}},e}(),Oe=globalThis&&globalThis.__assign||function(){return Oe=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Oe.apply(this,arguments)},As=["blur","canplay","canplaythrough","durationchange","emptied","ended","focus","load","loadeddata","loadedmetadata","mouseenter","mouseleave","pause","play","playing","ratechange","reset","scroll","seeked","seeking","stalled","submit","suspend","timeupdate","unload","volumechange","waiting"],Es=function(){function e(t,r){var n=this;this.rootElement$=t,this.isolateModule=r,this.virtualListeners=new Rn(function(o){return o.scope}),this.nonBubblingListenersToAdd=new Set,this.virtualNonBubblingListener=[],this.isolateModule.setEventDelegator(this),this.domListeners=new Map,this.domListenersToAdd=new Map,this.nonBubblingListeners=new Map,t.addListener({next:function(o){n.origin!==o&&(n.origin=o,n.resetEventListeners(),n.domListenersToAdd.forEach(function(i,a){return n.setupDOMListener(a,i)}),n.domListenersToAdd.clear()),n.nonBubblingListenersToAdd.forEach(function(i){n.setupNonBubblingListener(i)})}})}return e.prototype.addEventListener=function(t,r,n,o){var i=et.never(),a,u=new Cn(r,this.isolateModule),c=o===void 0?As.indexOf(t)===-1:o;if(c)return this.domListeners.has(t)||this.setupDOMListener(t,!!n.passive),a=this.insertListener(i,u,t,n),i;var b=[];this.nonBubblingListenersToAdd.forEach(function(O){return b.push(O)});for(var E=void 0,w=0,P=b.length,S=function(O){O[0];var d=O[1],g=O[2];return O[3],t===d&&sr(g.namespace,r)};!E&&w<P;){var f=b[w];E=S(f)?f:E,w++}var s=E,_;if(s){var y=s[0];_=y}else{var l=new Mn(r,this.isolateModule);a=this.insertListener(i,u,t,n),s=[i,t,l,a],_=i,this.nonBubblingListenersToAdd.add(s),this.setupNonBubblingListener(s)}var p=this,m=null;return et.create({start:function(O){m=_.subscribe(O)},stop:function(){s[0];var O=s[1],d=s[2];s[3];var g=d.call();g.forEach(function(A){var I=A.subs;I&&I[O]&&(I[O].unsubscribe(),delete I[O])}),p.nonBubblingListenersToAdd.delete(s),m.unsubscribe()}})},e.prototype.removeElement=function(t,r){r!==void 0&&this.virtualListeners.delete(r);var n=[];this.nonBubblingListeners.forEach(function(a,u){if(a.has(t)){n.push([u,t]);var c=t.subs;c&&Object.keys(c).forEach(function(b){c[b].unsubscribe()})}});for(var o=0;o<n.length;o++){var i=this.nonBubblingListeners.get(n[o][0]);!i||(i.delete(n[o][1]),i.size===0?this.nonBubblingListeners.delete(n[o][0]):this.nonBubblingListeners.set(n[o][0],i))}},e.prototype.insertListener=function(t,r,n,o){var i=[],a=r._namespace,u=a.length;do i.push(this.getVirtualListeners(n,a,!0,u)),u--;while(u>=0&&a[u].type!=="total");for(var c=Oe({},o,{scopeChecker:r,subject:t,bubbles:!!o.bubbles,useCapture:!!o.useCapture,passive:!!o.passive}),b=0;b<i.length;b++)i[b].add(c,a.length);return c},e.prototype.getVirtualListeners=function(t,r,n,o){n===void 0&&(n=!1);var i=o!==void 0?o:r.length;if(!n)for(var a=i-1;a>=0;a--){if(r[a].type==="total"){i=a+1;break}i=a}var u=this.virtualListeners.getDefault(r,function(){return new Map},i);return u.has(t)||u.set(t,new Os),u.get(t)},e.prototype.setupDOMListener=function(t,r){var n=this;if(this.origin){var o=Se(this.origin,t,!1,!1,r).subscribe({next:function(i){return n.onEvent(t,i,r)},error:function(){},complete:function(){}});this.domListeners.set(t,{sub:o,passive:r})}else this.domListenersToAdd.set(t,r)},e.prototype.setupNonBubblingListener=function(t){t[0];var r=t[1],n=t[2],o=t[3];if(!!this.origin){var i=n.call();if(i.length){var a=this;i.forEach(function(u){var c,b=u.subs;if(!b||!b[r]){var E=Se(u,r,!1,!1,o.passive).subscribe({next:function(P){return a.onEvent(r,P,!!o.passive,!1)},error:function(){},complete:function(){}});a.nonBubblingListeners.has(r)||a.nonBubblingListeners.set(r,new Map);var w=a.nonBubblingListeners.get(r);if(!w)return;w.set(u,{sub:E,destination:o}),u.subs=Oe({},b,(c={},c[r]=E,c))}})}}},e.prototype.resetEventListeners=function(){for(var t=this.domListeners.entries(),r=t.next();!r.done;){var n=r.value,o=n[0],i=n[1],a=i.sub,u=i.passive;a.unsubscribe(),this.setupDOMListener(o,u),r=t.next()}},e.prototype.putNonBubblingListener=function(t,r,n,o){var i=this.nonBubblingListeners.get(t);if(!!i){var a=i.get(r);a&&a.destination.passive===o&&a.destination.useCapture===n&&(this.virtualNonBubblingListener[0]=a.destination)}},e.prototype.onEvent=function(t,r,n,o){o===void 0&&(o=!0);var i=this.patchEvent(r),a=this.isolateModule.getRootElement(r.target);if(o){var u=this.isolateModule.getNamespace(r.target);if(!u)return;var c=this.getVirtualListeners(t,u);this.bubble(t,r.target,a,i,c,u,u.length-1,!0,n),this.bubble(t,r.target,a,i,c,u,u.length-1,!1,n)}else this.putNonBubblingListener(t,r.target,!0,n),this.doBubbleStep(t,r.target,a,i,this.virtualNonBubblingListener,!0,n),this.putNonBubblingListener(t,r.target,!1,n),this.doBubbleStep(t,r.target,a,i,this.virtualNonBubblingListener,!1,n),r.stopPropagation()},e.prototype.bubble=function(t,r,n,o,i,a,u,c,b){!c&&!o.propagationHasBeenStopped&&this.doBubbleStep(t,r,n,o,i,c,b);var E=n,w=u;if(r===n)if(u>=0&&a[u].type==="sibling")E=this.isolateModule.getElement(a,u),w--;else return;r.parentNode&&E&&this.bubble(t,r.parentNode,E,o,i,a,w,c,b),c&&!o.propagationHasBeenStopped&&this.doBubbleStep(t,r,n,o,i,c,b)},e.prototype.doBubbleStep=function(t,r,n,o,i,a,u){!n||(this.mutateEventCurrentTarget(o,r),i.forEach(function(c){if(c.passive===u&&c.useCapture===a){var b=$n(c.scopeChecker.namespace);!o.propagationHasBeenStopped&&c.scopeChecker.isDirectlyInScope(r)&&(b!==""&&r.matches(b)||b===""&&r===n)&&(Nn(o,c.preventDefault),c.subject.shamefullySendNext(o))}}))},e.prototype.patchEvent=function(t){var r=t;r.propagationHasBeenStopped=!1;var n=r.stopPropagation;return r.stopPropagation=function(){n.call(this),this.propagationHasBeenStopped=!0},r},e.prototype.mutateEventCurrentTarget=function(t,r){try{Object.defineProperty(t,"currentTarget",{value:r,configurable:!0})}catch{console.log("please use event.ownerTarget")}t.ownerTarget=r},e}();function Ps(e){if(!Array.isArray(e))throw new Error("Optional modules option must be an array for snabbdom modules")}function Ns(e){if(!e||typeof e.addListener!="function"||typeof e.fold!="function")throw new Error("The DOM driver function expects as input a Stream of virtual DOM elements")}function $s(e){return et.merge(e,et.never())}function Cs(e){return e.elm}function Ms(e){(console.error||console.log)(e)}function Is(){return et.create({start:function(e){document.readyState==="loading"?document.addEventListener("readystatechange",function(){var t=document.readyState;(t==="interactive"||t==="complete")&&(e.next(null),e.complete())}):(e.next(null),e.complete())},stop:function(){}})}function Ds(e){return e.data=e.data||{},e.data.isolate=[],e}function Ts(e,t){t===void 0&&(t={}),ps(e);var r=t.modules||ws;Ps(r);var n=new Ss,o=t&&t.snabbdomOptions||void 0,i=Ua([n.createModule()].concat(r),void 0,o),a=Is(),u,c,b=et.create({start:function(w){c=new MutationObserver(function(){return w.next(null)})},stop:function(){c.disconnect()}});function E(w,P){P===void 0&&(P="DOM"),Ns(w);var S=et.create(),f=a.map(function(){var p=ds(e)||document.body;return u=new _s(p),p}),s=w.remember();s.addListener({}),b.addListener({});var _=f.map(function(p){return et.merge(s.endWhen(S),S).map(function(m){return u.call(m)}).startWith(Ds(Je(p))).fold(i,Je(p)).drop(1).map(Cs).startWith(p).map(function(m){return c.observe(m,{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0}),m}).compose($s)}).flatten(),l=yn(a,b).endWhen(S).compose(gs(_)).map(function(p){return p[1]}).remember();l.addListener({error:t.reportSnabbdomError||Ms});var y=new Es(l,n);return new Dn(l,S,[],n,y,P)}return E}var qe="___",Ln=function(){function e(t){this._mockConfig=t,t.elements?this._elements=t.elements:this._elements=lt(et.empty())}return e.prototype.elements=function(){var t=this._elements;return t._isCycleSource="MockedDOM",t},e.prototype.element=function(){var t=this.elements().filter(function(n){return n.length>0}).map(function(n){return n[0]}).remember(),r=lt(t);return r._isCycleSource="MockedDOM",r},e.prototype.events=function(t,r,n){var o=this._mockConfig[t],i=lt(o||et.empty());return i._isCycleSource="MockedDOM",i},e.prototype.select=function(t){var r=this._mockConfig[t]||{};return new e(r)},e.prototype.isolateSource=function(t,r){return t.select("."+qe+r)},e.prototype.isolateSink=function(t,r){return lt(et.fromObservable(t).map(function(n){return n.sel&&n.sel.indexOf(qe+r)!==-1||(n.sel+="."+qe+r),n}))},e}();function xs(e){return new Ln(e)}function js(e){return typeof e=="string"&&e.length>0}function Fn(e){return js(e)&&(e[0]==="."||e[0]==="#")}function $e(e){return function(r,n,o){var i=typeof r!="undefined",a=typeof n!="undefined",u=typeof o!="undefined";return Fn(r)?a&&u?Ot(e+r,n,o):a?Ot(e+r,n):Ot(e+r,{}):u?Ot(e+r,n,o):a?Ot(e,r,n):i?Ot(e,r):Ot(e,{})}}var Bn=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","colorProfile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotlight","feTile","feTurbulence","filter","font","fontFace","fontFaceFormat","fontFaceName","fontFaceSrc","fontFaceUri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missingGlyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],qn=$e("svg");Bn.forEach(function(e){qn[e]=$e(e)});var Wn=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","meta","nav","noscript","object","ol","optgroup","option","p","param","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","u","ul","video"],N={SVG_TAG_NAMES:Bn,TAG_NAMES:Wn,svg:qn,isSelector:Fn,createTagFunction:$e};Wn.forEach(function(e){N[e]=$e(e)});var ks=N.svg,Rs=N.a,Ls=N.abbr,Fs=N.address,Bs=N.area,qs=N.article,Ws=N.aside,Us=N.audio,Gs=N.b,Hs=N.base,zs=N.bdi,Ks=N.bdo,Js=N.blockquote,Ys=N.body,Xs=N.br,Vs=N.button,Zs=N.canvas,Qs=N.caption,tu=N.cite,eu=N.code,ru=N.col,nu=N.colgroup,ou=N.dd,iu=N.del,au=N.dfn,su=N.dir,uu=N.div,fu=N.dl,lu=N.dt,cu=N.em,pu=N.embed,du=N.fieldset,hu=N.figcaption,vu=N.figure,yu=N.footer,mu=N.form,gu=N.h1,bu=N.h2,_u=N.h3,wu=N.h4,Su=N.h5,Ou=N.h6,Au=N.head,Eu=N.header,Pu=N.hgroup,Nu=N.hr,$u=N.html,Cu=N.i,Mu=N.iframe,Iu=N.img,Du=N.input,Tu=N.ins,xu=N.kbd,ju=N.keygen,ku=N.label,Ru=N.legend,Lu=N.li,Fu=N.link,Bu=N.main,qu=N.map,Wu=N.mark,Uu=N.menu,Gu=N.meta,Hu=N.nav,zu=N.noscript,Ku=N.object,Ju=N.ol,Yu=N.optgroup,Xu=N.option,Vu=N.p,Zu=N.param,Qu=N.pre,tf=N.progress,ef=N.q,rf=N.rp,nf=N.rt,of=N.ruby,af=N.s,sf=N.samp,uf=N.script,ff=N.section,lf=N.select,cf=N.small,pf=N.source,df=N.span,hf=N.strong,vf=N.style,yf=N.sub,mf=N.sup,gf=N.table,bf=N.tbody,_f=N.td,wf=N.textarea,Sf=N.tfoot,Of=N.th,Af=N.thead,Ef=N.title,Pf=N.tr,Nf=N.u,$f=N.ul,Cf=N.video,Mf=Object.freeze(Object.defineProperty({__proto__:null,svg:ks,a:Rs,abbr:Ls,address:Fs,area:Bs,article:qs,aside:Ws,audio:Us,b:Gs,base:Hs,bdi:zs,bdo:Ks,blockquote:Js,body:Ys,br:Xs,button:Vs,canvas:Zs,caption:Qs,cite:tu,code:eu,col:ru,colgroup:nu,dd:ou,del:iu,dfn:au,dir:su,div:uu,dl:fu,dt:lu,em:cu,embed:pu,fieldset:du,figcaption:hu,figure:vu,footer:yu,form:mu,h1:gu,h2:bu,h3:_u,h4:wu,h5:Su,h6:Ou,head:Au,header:Eu,hgroup:Pu,hr:Nu,html:$u,i:Cu,iframe:Mu,img:Iu,input:Du,ins:Tu,kbd:xu,keygen:ju,label:ku,legend:Ru,li:Lu,link:Fu,main:Bu,map:qu,mark:Wu,menu:Uu,meta:Gu,nav:Hu,noscript:zu,object:Ku,ol:Ju,optgroup:Yu,option:Xu,p:Vu,param:Zu,pre:Qu,progress:tf,q:ef,rp:rf,rt:nf,ruby:of,s:af,samp:sf,script:uf,section:ff,select:lf,small:cf,source:pf,span:df,strong:hf,style:vf,sub:yf,sup:mf,table:gf,tbody:bf,td:_f,textarea:wf,tfoot:Sf,th:Of,thead:Af,title:Ef,tr:Pf,u:Nf,ul:$f,video:Cf,thunk:is,MainDOMSource:Dn,makeDOMDriver:Ts,mockDOMSource:xs,MockedDOMSource:Ln,h:Ot},Symbol.toStringTag,{value:"Module"})),Un=Ae(Mf),Gn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=n(ut),r=Ne;function n(i){return i&&i.__esModule?i:{default:i}}function o(i){var a=new EventTarget;return i.subscribe({next:function(c){return a.dispatchEvent(new CustomEvent("data",{detail:c}))}}),{select:function(c){var b=!c,E=Array.isArray(c)?c:[c],w,P=t.default.create({start:function(f){w=function(_){var l=_.detail,y=l&&l.data||null;(b||E.includes(l.type))&&f.next(y)},a.addEventListener("data",w)},stop:function(f){return a.removeEventListener("data",w)}});return(0,r.adapt)(P)}}}})(Gn);var Hn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r){r.addListener({next:function(o){console.log(o)}})}})(Hn);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=E;var t=_a,r=nr,n=Un,o=a(Gn),i=a(Hn);function a(w){return w&&w.__esModule?w:{default:w}}function u(w,P){var S=Object.keys(w);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(w);P&&(f=f.filter(function(s){return Object.getOwnPropertyDescriptor(w,s).enumerable})),S.push.apply(S,f)}return S}function c(w){for(var P=1;P<arguments.length;P++){var S=arguments[P]!=null?arguments[P]:{};P%2?u(Object(S),!0).forEach(function(f){b(w,f,S[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(S)):u(Object(S)).forEach(function(f){Object.defineProperty(w,f,Object.getOwnPropertyDescriptor(S,f))})}return w}function b(w,P,S){return P in w?Object.defineProperty(w,P,{value:S,enumerable:!0,configurable:!0,writable:!0}):w[P]=S,w}function E(w){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},S=(0,r.withState)(w,"STATE"),f={EVENTS:o.default,DOM:(0,n.makeDOMDriver)("#root"),LOG:i.default},s=c(c({},f),P);return(0,t.run)(S,s)}})(wn);var zn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=P;function t(l,y){return o(l)||n(l,y)||c(l,y)||r()}function r(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n(l,y){var p=l==null?null:typeof Symbol!="undefined"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var m=[],O=!0,d=!1,g,A;try{for(p=p.call(l);!(O=(g=p.next()).done)&&(m.push(g.value),!(y&&m.length===y));O=!0);}catch(I){d=!0,A=I}finally{try{!O&&p.return!=null&&p.return()}finally{if(d)throw A}}return m}}function o(l){if(Array.isArray(l))return l}function i(l){return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},i(l)}function a(l){return E(l)||b(l)||c(l)||u()}function u(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c(l,y){if(!!l){if(typeof l=="string")return w(l,y);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return w(l,y)}}function b(l){if(typeof Symbol!="undefined"&&l[Symbol.iterator]!=null||l["@@iterator"]!=null)return Array.from(l)}function E(l){if(Array.isArray(l))return w(l)}function w(l,y){(y==null||y>l.length)&&(y=l.length);for(var p=0,m=new Array(y);p<y;p++)m[p]=l[p];return m}function P(){for(var l=arguments.length,y=new Array(l),p=0;p<l;p++)y[p]=arguments[p];return y.reduce(function(m,O){return typeof O=="string"&&!m.includes(O)?m.push.apply(m,a(f(O))):Array.isArray(O)?m.push.apply(m,a(s(O))):i(O)==="object"&&m.push.apply(m,a(_(O))),m},[]).join(" ")}function S(l){return/^[a-zA-Z0-9-_]+$/.test(l)}function f(l){if(typeof l!="string")throw new Error("Class name must be a string");return l.trim().split(" ").reduce(function(y,p){if(p.trim().length===0)return y;if(!S(p))throw new Error("".concat(p," is not a valid CSS class name"));return y.push(p),y},[])}function s(l){return l.map(f).flat()}function _(l){var y=Object.entries(l).filter(function(p){var m=t(p,2);m[0];var O=m[1];return typeof O=="function"?O():!!O}).map(function(p){var m=t(p,2),O=m[0];m[1];var d=O.trim();if(!S(d))throw new Error("".concat(d," is not a valid CSS class name"));return d});return y}})(zn);(function(e){function t(f){return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},t(f)}Object.defineProperty(e,"__esModule",{value:!0});var r={component:!0,ABORT:!0,collection:!0,switchable:!0,processForm:!0,run:!0,classes:!0,xs:!0};Object.defineProperty(e,"ABORT",{enumerable:!0,get:function(){return n.ABORT}}),Object.defineProperty(e,"classes",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"collection",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"component",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"processForm",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"run",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"switchable",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"xs",{enumerable:!0,get:function(){return E.default}});var n=S(Kr),o=w(er),i=w(bn),a=w(_n),u=w(wn),c=w(zn),b=Un;Object.keys(b).forEach(function(f){f==="default"||f==="__esModule"||Object.prototype.hasOwnProperty.call(r,f)||f in e&&e[f]===b[f]||Object.defineProperty(e,f,{enumerable:!0,get:function(){return b[f]}})});var E=w(ut);function w(f){return f&&f.__esModule?f:{default:f}}function P(f){if(typeof WeakMap!="function")return null;var s=new WeakMap,_=new WeakMap;return(P=function(y){return y?_:s})(f)}function S(f,s){if(!s&&f&&f.__esModule)return f;if(f===null||t(f)!=="object"&&typeof f!="function")return{default:f};var _=P(s);if(_&&_.has(f))return _.get(f);var l={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in f)if(p!=="default"&&Object.prototype.hasOwnProperty.call(f,p)){var m=y?Object.getOwnPropertyDescriptor(f,p):null;m&&(m.get||m.set)?Object.defineProperty(l,p,m):l[p]=f[p]}return l.default=f,_&&_.set(f,l),l}})(dt);var Y={},Kn={},nt={};Object.defineProperty(nt,"__esModule",{value:!0});nt.vnode=nt.undefinedv=nt.text=nt.svg=nt.string=nt.object=nt.number=nt.nullv=nt.fun=nt.array=void 0;function Xe(e){return Xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xe(e)}var If=function(t){return t===null};nt.nullv=If;var Df=function(t){return t===void 0};nt.undefinedv=Df;var Jn=function(t){return typeof t=="number"};nt.number=Jn;var Yn=function(t){return typeof t=="string"};nt.string=Yn;var Tf=function(t){return Yn(t)||Jn(t)};nt.text=Tf;var xf=function(t){return Array.isArray(t)};nt.array=xf;var Xn=function(t){return Xe(t)==="object"&&t!==null};nt.object=Xn;var jf=function(t){return typeof t=="function"};nt.fun=jf;var kf=function(t){return Xn(t)&&"sel"in t&&"data"in t&&"children"in t&&"text"in t};nt.vnode=kf;var Rf={svg:1,circle:1,ellipse:1,line:1,polygon:1,polyline:1,rect:1,g:1,path:1,text:1},Lf=function(t){return t.sel in Rf};nt.svg=Lf;var vt={},ge=Object.prototype.hasOwnProperty,Vn=Object.prototype.toString,jr=Object.defineProperty,kr=Object.getOwnPropertyDescriptor,Rr=function(t){return typeof Array.isArray=="function"?Array.isArray(t):Vn.call(t)==="[object Array]"},Lr=function(t){if(!t||Vn.call(t)!=="[object Object]")return!1;var r=ge.call(t,"constructor"),n=t.constructor&&t.constructor.prototype&&ge.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!r&&!n)return!1;var o;for(o in t);return typeof o=="undefined"||ge.call(t,o)},Fr=function(t,r){jr&&r.name==="__proto__"?jr(t,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):t[r.name]=r.newValue},Br=function(t,r){if(r==="__proto__")if(ge.call(t,r)){if(kr)return kr(t,r).value}else return;return t[r]},Ff=function e(){var t,r,n,o,i,a,u=arguments[0],c=1,b=arguments.length,E=!1;for(typeof u=="boolean"&&(E=u,u=arguments[1]||{},c=2),(u==null||typeof u!="object"&&typeof u!="function")&&(u={});c<b;++c)if(t=arguments[c],t!=null)for(r in t)n=Br(u,r),o=Br(t,r),u!==o&&(E&&o&&(Lr(o)||(i=Rr(o)))?(i?(i=!1,a=n&&Rr(n)?n:[]):a=n&&Lr(n)?n:{},Fr(u,{name:r,newValue:e(E,a,o)})):typeof o!="undefined"&&Fr(u,{name:r,newValue:o}));return u};function Ve(e){return Ve=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ve(e)}Object.defineProperty(vt,"__esModule",{value:!0});vt.reduceDeep=vt.omit=vt.mapObject=vt.flatifyKeys=vt.extend=vt.deepifyKeys=vt.assign=void 0;var Zn=qf(Ff),Qn=Bf(nt);function to(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(to=function(o){return o?r:t})(e)}function Bf(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||Ve(e)!=="object"&&typeof e!="function")return{default:e};var r=to(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function qf(e){return e&&e.__esModule?e:{default:e}}function Xt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var eo=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Zn.default.apply(void 0,[!0].concat(r))};vt.extend=eo;var Wf=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Zn.default.apply(void 0,[!1].concat(r))};vt.assign=Wf;var Uf=function e(t,r,n){for(var o=n,i=0;i<t.length;i++){var a=t[i];Qn.array(a)?o=e(a,r,o):o=r(o,a)}return o};vt.reduceDeep=Uf;var fe=function(t,r){return Object.keys(t).map(function(n){return r(n,t[n])}).reduce(function(n,o){return eo(n,o)},{})};vt.mapObject=fe;var Gf=function(t,r){return fe(t,function(n,o){var i=n.indexOf("-");if(i>-1&&r[n.slice(0,i)]!==void 0){var a=Xt({},n.slice(i+1),o);return Xt({},n.slice(0,i),a)}return Xt({},n,o)})};vt.deepifyKeys=Gf;var Hf=function e(t){return fe(t,function(r,n){return Qn.object(n)?fe(e(n),function(o,i){return Xt({},"".concat(r,"-").concat(o),i)}):Xt({},r,n)})};vt.flatifyKeys=Hf;var zf=function(t,r){return fe(r,function(n,o){return n!==t?Xt({},n,o):{}})};vt.omit=zf;(function(e){function t(y){return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},t(y)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.createElementWithModules=e.createElement=void 0;var r=i(nt),n=i(vt);function o(y){if(typeof WeakMap!="function")return null;var p=new WeakMap,m=new WeakMap;return(o=function(d){return d?m:p})(y)}function i(y,p){if(!p&&y&&y.__esModule)return y;if(y===null||t(y)!=="object"&&typeof y!="function")return{default:y};var m=o(p);if(m&&m.has(y))return m.get(y);var O={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in y)if(g!=="default"&&Object.prototype.hasOwnProperty.call(y,g)){var A=d?Object.getOwnPropertyDescriptor(y,g):null;A&&(A.get||A.set)?Object.defineProperty(O,g,A):O[g]=y[g]}return O.default=y,m&&m.set(y,O),O}function a(y,p,m){return p in y?Object.defineProperty(y,p,{value:m,enumerable:!0,configurable:!0,writable:!0}):y[p]=m,y}var u=function(p){return r.text(p)?{text:p,sel:void 0,data:void 0,children:void 0,elm:void 0,key:void 0}:void 0},c=function y(p){return r.svg(p)?n.assign(p,{data:n.omit("props",n.extend(p.data,{ns:"http://www.w3.org/2000/svg",attrs:n.omit("className",n.extend(p.data.props,{class:p.data.props?p.data.props.className:void 0}))}))},{children:r.undefinedv(p.children)?void 0:p.children.map(function(m){return y(m)})}):p},b={for:"attrs",role:"attrs",tabindex:"attrs","aria-*":"attrs",key:null},E=function(p,m){return n.mapObject(p,function(O,d){var g=a({},O,d);if(b[O]&&m[b[O]]!==void 0)return a({},b[O],g);if(b[O]===null)return{};for(var A=Object.keys(b),I=0;I<A.length;I++){var D=A[I];if(D.charAt(D.length-1)==="*"&&O.indexOf(D.slice(0,-1))===0&&m[b[D]]!==void 0)return a({},b[D],g)}return m[O]!==void 0?a({},m[O]?m[O]:O,d):m.props!==void 0?{props:g}:g})},w=function(p,m){return c(E(n.deepifyKeys(p,m),m))},P=function(p){return p.length>1||!r.text(p[0])?void 0:p[0].toString()},S=function(p){return n.reduceDeep(p,function(m,O){var d=r.vnode(O)?O:u(O);return m.push(d),m},[])},f={attrs:"",props:"",class:"",data:"dataset",style:"",hook:"",on:""},s=function(p){return function(m,O){r.fun(m)&&(m=m.name||"unnamed",console.error("JSX Error: A capitalized tag name was used, but was transpiled to a nameless function.  Either use a named function or a lower case tag name to avoid this problem"));for(var d=arguments.length,g=new Array(d>2?d-2:0),A=2;A<d;A++)g[A-2]=arguments[A];var I=P(g);return c({sel:m,data:O?w(O,p):{},children:I?void 0:S(g),text:I,elm:void 0,key:O?O.key:void 0})}};e.createElementWithModules=s;var _=s(f);e.createElement=_;var l={createElement:_,createElementWithModules:s};e.default=l})(Kn);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"jsx",{enumerable:!0,get:function(){return t.createElement}});var t=Kn})(Y);const Kf={0:"1111110",1:"0110000",2:"1101101",3:"1111001",4:"0110011",5:"1011011",6:"1011111",7:"1110000",8:"1111111",9:"1111011","-":"0000001",".":"0000000"};var Jf=dt.component({name:"DIGIT",calculated:{segments:e=>Kf[e.digit].split("").map(t=>t==="1")},view:({state:e})=>{let{digit:t,segments:r,fill:n,background:o,padding:i,skew:a,transition:u,id:c}=e;if(i||(i="0.1em"),o||(o="transparent"),t===".")return Y.jsx("span",{style:{fontSize:`calc(1em + ${i} * 2)`,color:n}},".");const b=w=>dt.classes("segment",`segment-${w}`,{on:r[w]}),E={fill:n,transition:u};return Y.jsx("div",{className:"digit",style:{height:"1em",backgroundColor:o,padding:i,transform:`skew(${a||"0"})`},id:c},Y.jsx("svg",{style:{height:"1em"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 292.06 585.99"},Y.jsx("defs",null,Y.jsx("style",null,`
              .segment {opacity: 0.1;}
              .segment.on {opacity: 1;}
            `)),Y.jsx("polygon",{style:E,className:b(0),points:"230.47 58.07 61.27 58.23 61.27 58.07 32.39 29.04 61.27 0.15 230.47 0 259.36 29.04 230.47 57.92 230.47 58.07"}),Y.jsx("polygon",{style:E,className:b(1),points:"292.06 61.95 292.06 259.88 291.9 259.88 262.87 288.76 233.98 259.88 233.98 61.95 263.02 33.07 291.9 61.95 292.06 61.95"}),Y.jsx("polygon",{style:E,className:b(2),points:"292.06 325.72 292.06 523.65 291.9 523.65 262.87 552.52 233.98 523.65 233.98 325.72 263.02 296.83 291.9 325.72 292.06 325.72"}),Y.jsx("polygon",{style:E,className:b(3),points:"230.47 585.84 61.27 585.99 61.27 585.84 32.39 556.8 61.27 527.92 230.47 527.76 259.36 556.8 230.47 585.68 230.47 585.84"}),Y.jsx("polygon",{style:E,className:b(4),points:"58.07 325.72 58.07 523.65 57.92 523.65 28.89 552.52 0 523.65 0 325.72 29.04 296.83 57.92 325.72 58.07 325.72"}),Y.jsx("polygon",{style:E,className:b(5),points:"58.07 61.95 58.07 259.88 57.92 259.88 28.89 288.76 0 259.88 0 61.95 29.04 33.07 57.92 61.95 58.07 61.95"}),Y.jsx("polygon",{style:E,className:b(6),points:"230.47 321.75 61.27 321.9 61.27 321.75 32.39 292.72 61.27 263.83 230.47 263.68 259.36 292.72 230.47 321.59 230.47 321.75"})))}});const qr={"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,x:(e,t)=>e*t},Wr=["1","2","3","4","5","6","7","8","9","0"],Ur=["/","x","-","+"],Yf="AC",Xf="+/-",Gr="%",Hr=".",zr="=",Ft="num",We="op",Bt="eq";var Vf=dt.component({name:"CALCULATOR",initialState:{display:"",register:"",mode:Ft,operation:null},calculated:{displayFloat:e=>{const t=parseFloat(e.display);return isNaN(t)?"":t},registerFloat:e=>{const t=parseFloat(e.register);return isNaN(t)?"":t}},model:{NUMBER_INPUT:(e,t)=>{if(t==="0"&&e.display==="0")return dt.ABORT;const r=e.mode===Ft?e.display:"",n=e.mode!==Bt?e.register:"",o=e.mode!==Bt?e.operation:"",i=r+t;return St(wt({},e),{display:i,register:n,operation:o,mode:Ft})},ADD_DECIMAL:(e,t)=>{if(e.mode===Bt)return St(wt({},e),{display:"0.",register:"",operation:null,mode:Ft});if(e.display.includes("."))return dt.ABORT;if(e.display==="")return St(wt({},e),{mode:Ft,display:"0."});const r=e.display+".";return St(wt({},e),{display:r})},RUN_CALC:e=>{if(!e.operation||e.display==="")return dt.ABORT;let t,r,n;e.mode===Bt?(t=e.register,r=e.displayFloat,n=e.registerFloat):(t=e.display,r=e.registerFloat,n=e.displayFloat);const o=qr[e.operation](r,n).toString();return St(wt({},e),{display:o,register:t,mode:Bt})},SET_OPERATOR:(e,t)=>{if(e.mode!==We&&e.display==="")return dt.ABORT;const n=e.mode==Ft&&e.operation?qr[e.operation](e.registerFloat,e.displayFloat).toString():e.display;if(e.mode===We&&e.display==="")return St(wt({},e),{operation:t});const o="";return St(wt({},e),{display:o,register:n,mode:We,operation:t})},CLEAR_ALL:(e,t)=>({display:"",register:"",mode:Ft,operation:null}),SWITCH_SIGN:(e,t)=>St(wt({},e),{display:e.display[0]==="-"?e.display.slice(1):"-"+e.display}),MAKE_PERCENT:(e,t)=>St(wt({},e),{display:(e.displayFloat/100).toString()})},intent:({DOM:e})=>{const t=P=>S=>S.target.dataset[P],r=P=>e.select(P).events("click").map(t("value")),n=e.select("document").events("keydown").map(P=>P.key),o=P=>S=>P.includes(S),i=n.filter(o(Wr)),a=n.filter(o([Hr])),u=n.filter(o([zr,"Enter"])),c=n.filter(o([...Ur,"*"])).map(P=>P==="*"?"x":P),b=n.filter(o(["Backspace"])),E=n.filter(o(["~"])),w=n.filter(o([Gr]));return{NUMBER_INPUT:dt.xs.merge(r(".number"),i),ADD_DECIMAL:dt.xs.merge(r(".decimal"),a),RUN_CALC:dt.xs.merge(r(".equal"),u),SET_OPERATOR:dt.xs.merge(r(".operator"),c),CLEAR_ALL:dt.xs.merge(r(".clear"),b),SWITCH_SIGN:dt.xs.merge(r(".sign"),E),MAKE_PERCENT:dt.xs.merge(r(".percent"),w)}},components:{digit:Jf},view:({state:e})=>{const{display:t,register:r,operation:n,mode:o}=e,i=E=>Y.jsx("div",{className:"button number","data-value":`${E}`},E),a=E=>Y.jsx("div",{className:"button operator","data-value":E},E),u=o===Bt?" ":r.split("").slice(0,10).map((E,w)=>Y.jsx("digit",{digit:E,fill:"#999",skew:"-7deg",transition:"100ms",id:"reg"+(10-r.length+w)})),c=o===Bt?" ":n,b=t.split("").slice(0,10).map((E,w)=>Y.jsx("digit",{digit:E,fill:"#AAA",skew:"-7deg",transition:"100ms",id:"disp"+(10-t.length+w)}))||" ";return Y.jsx("div",{className:"calculator"},Y.jsx("div",{className:"display"},Y.jsx("div",{className:"previous"},u,Y.jsx("span",{className:"operation"},c)),Y.jsx("div",{className:"current-container"},b)),Y.jsx("div",{className:"keypad"},Y.jsx("div",{className:"numbers"},Y.jsx("div",{className:"button clear"},Yf),Y.jsx("div",{className:"button sign"},Xf),Y.jsx("div",{className:"button percent"},Gr),Wr.map(i),Y.jsx("div",{className:"button decimal"},Hr)),Y.jsx("div",{className:"operators"},Ur.map(a),Y.jsx("div",{className:"button equal"},zr))))}});dt.run(Vf);
