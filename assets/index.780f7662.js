var _o=Object.defineProperty,bo=Object.defineProperties;var wo=Object.getOwnPropertyDescriptors;var Ut=Object.getOwnPropertySymbols;var Ze=Object.prototype.hasOwnProperty,Qe=Object.prototype.propertyIsEnumerable;var Xe=(e,t,r)=>t in e?_o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,x=(e,t)=>{for(var r in t||(t={}))Ze.call(t,r)&&Xe(e,r,t[r]);if(Ut)for(var r of Ut(t))Qe.call(t,r)&&Xe(e,r,t[r]);return e},F=(e,t)=>bo(e,wo(t));var tr=(e,t)=>{var r={};for(var n in e)Ze.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&Ut)for(var n of Ut(e))t.indexOf(n)<0&&Qe.call(e,n)&&(r[n]=e[n]);return r};const So=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}};So();var J=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},q={},Jr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r){var n,o=r.Symbol;if(typeof o=="function")if(o.observable)n=o.observable;else{n=o.for("https://github.com/benlesh/symbol-observable");try{o.observable=n}catch{}}else n="@@observable";return n}})(Jr);var $o=Jr,er=Object.prototype.toString,Kr=function(t){var r=er.call(t),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&er.call(t.callee)==="[object Function]"),n},Yr;if(!Object.keys){var Wt=Object.prototype.hasOwnProperty,rr=Object.prototype.toString,Ao=Kr,nr=Object.prototype.propertyIsEnumerable,Oo=!nr.call({toString:null},"toString"),Eo=nr.call(function(){},"prototype"),Gt=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],de=function(e){var t=e.constructor;return t&&t.prototype===e},Po={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},No=function(){if(typeof window=="undefined")return!1;for(var e in window)try{if(!Po["$"+e]&&Wt.call(window,e)&&window[e]!==null&&typeof window[e]=="object")try{de(window[e])}catch{return!0}}catch{return!0}return!1}(),Co=function(e){if(typeof window=="undefined"||!No)return de(e);try{return de(e)}catch{return!1}};Yr=function(t){var r=t!==null&&typeof t=="object",n=rr.call(t)==="[object Function]",o=Ao(t),i=r&&rr.call(t)==="[object String]",s=[];if(!r&&!n&&!o)throw new TypeError("Object.keys called on a non-object");var a=Eo&&n;if(i&&t.length>0&&!Wt.call(t,0))for(var u=0;u<t.length;++u)s.push(String(u));if(o&&t.length>0)for(var c=0;c<t.length;++c)s.push(String(c));else for(var l in t)!(a&&l==="prototype")&&Wt.call(t,l)&&s.push(String(l));if(Oo)for(var p=Co(t),y=0;y<Gt.length;++y)!(p&&Gt[y]==="constructor")&&Wt.call(t,Gt[y])&&s.push(Gt[y]);return s}}var Io=Yr,xo=Array.prototype.slice,ko=Kr,or=Object.keys,Jt=or?function(t){return or(t)}:Io,ir=Object.keys;Jt.shim=function(){if(Object.keys){var t=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);t||(Object.keys=function(n){return ko(n)?ir(xo.call(n)):ir(n)})}else Object.keys=Jt;return Object.keys||Jt};var Do=Jt,To=Error,Mo=EvalError,Fo=RangeError,jo=ReferenceError,Xr=SyntaxError,Zr=TypeError,Lo=URIError,Ro=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var o=42;t[r]=o;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var i=Object.getOwnPropertySymbols(t);if(i.length!==1||i[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(t,r);if(s.value!==o||s.enumerable!==!0)return!1}return!0},sr=typeof Symbol!="undefined"&&Symbol,Bo=Ro,Uo=function(){return typeof sr!="function"||typeof Symbol!="function"||typeof sr("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Bo()},ye={__proto__:null,foo:{}},Wo=Object,Go=function(){return{__proto__:ye}.foo===ye.foo&&!(ye instanceof Wo)},zo="Function.prototype.bind called on incompatible ",qo=Object.prototype.toString,Ho=Math.max,Vo="[object Function]",ar=function(t,r){for(var n=[],o=0;o<t.length;o+=1)n[o]=t[o];for(var i=0;i<r.length;i+=1)n[i+t.length]=r[i];return n},Jo=function(t,r){for(var n=[],o=r||0,i=0;o<t.length;o+=1,i+=1)n[i]=t[o];return n},Ko=function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r},Yo=function(t){var r=this;if(typeof r!="function"||qo.apply(r)!==Vo)throw new TypeError(zo+r);for(var n=Jo(arguments,1),o,i=function(){if(this instanceof o){var l=r.apply(this,ar(n,arguments));return Object(l)===l?l:this}return r.apply(t,ar(n,arguments))},s=Ho(0,r.length-n.length),a=[],u=0;u<s;u++)a[u]="$"+u;if(o=Function("binder","return function ("+Ko(a,",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var c=function(){};c.prototype=r.prototype,o.prototype=new c,c.prototype=null}return o},Xo=Yo,Qr=Function.prototype.bind||Xo,Zo=Function.prototype.call,Qo=Object.prototype.hasOwnProperty,ti=Qr,ei=ti.call(Zo,Qo),C,ri=To,ni=Mo,oi=Fo,ii=jo,Pt=Xr,Ot=Zr,si=Lo,tn=Function,me=function(e){try{return tn('"use strict"; return ('+e+").constructor;")()}catch{}},pt=Object.getOwnPropertyDescriptor;if(pt)try{pt({},"")}catch{pt=null}var ve=function(){throw new Ot},ai=pt?function(){try{return arguments.callee,ve}catch{try{return pt(arguments,"callee").get}catch{return ve}}}():ve,gt=Uo(),ui=Go(),L=Object.getPrototypeOf||(ui?function(e){return e.__proto__}:null),St={},ci=typeof Uint8Array=="undefined"||!L?C:L(Uint8Array),ht={__proto__:null,"%AggregateError%":typeof AggregateError=="undefined"?C:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?C:ArrayBuffer,"%ArrayIteratorPrototype%":gt&&L?L([][Symbol.iterator]()):C,"%AsyncFromSyncIteratorPrototype%":C,"%AsyncFunction%":St,"%AsyncGenerator%":St,"%AsyncGeneratorFunction%":St,"%AsyncIteratorPrototype%":St,"%Atomics%":typeof Atomics=="undefined"?C:Atomics,"%BigInt%":typeof BigInt=="undefined"?C:BigInt,"%BigInt64Array%":typeof BigInt64Array=="undefined"?C:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array=="undefined"?C:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?C:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":ri,"%eval%":eval,"%EvalError%":ni,"%Float32Array%":typeof Float32Array=="undefined"?C:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?C:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?C:FinalizationRegistry,"%Function%":tn,"%GeneratorFunction%":St,"%Int8Array%":typeof Int8Array=="undefined"?C:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?C:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?C:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":gt&&L?L(L([][Symbol.iterator]())):C,"%JSON%":typeof JSON=="object"?JSON:C,"%Map%":typeof Map=="undefined"?C:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!gt||!L?C:L(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?C:Promise,"%Proxy%":typeof Proxy=="undefined"?C:Proxy,"%RangeError%":oi,"%ReferenceError%":ii,"%Reflect%":typeof Reflect=="undefined"?C:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?C:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!gt||!L?C:L(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?C:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":gt&&L?L(""[Symbol.iterator]()):C,"%Symbol%":gt?Symbol:C,"%SyntaxError%":Pt,"%ThrowTypeError%":ai,"%TypedArray%":ci,"%TypeError%":Ot,"%Uint8Array%":typeof Uint8Array=="undefined"?C:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?C:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?C:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?C:Uint32Array,"%URIError%":si,"%WeakMap%":typeof WeakMap=="undefined"?C:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?C:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?C:WeakSet};if(L)try{null.error}catch(e){var fi=L(L(e));ht["%Error.prototype%"]=fi}var li=function e(t){var r;if(t==="%AsyncFunction%")r=me("async function () {}");else if(t==="%GeneratorFunction%")r=me("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=me("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var o=e("%AsyncGenerator%");o&&L&&(r=L(o.prototype))}return ht[t]=r,r},ur={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Lt=Qr,oe=ei,pi=Lt.call(Function.call,Array.prototype.concat),hi=Lt.call(Function.apply,Array.prototype.splice),cr=Lt.call(Function.call,String.prototype.replace),ie=Lt.call(Function.call,String.prototype.slice),di=Lt.call(Function.call,RegExp.prototype.exec),yi=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,mi=/\\(\\)?/g,vi=function(t){var r=ie(t,0,1),n=ie(t,-1);if(r==="%"&&n!=="%")throw new Pt("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Pt("invalid intrinsic syntax, expected opening `%`");var o=[];return cr(t,yi,function(i,s,a,u){o[o.length]=a?cr(u,mi,"$1"):s||i}),o},gi=function(t,r){var n=t,o;if(oe(ur,n)&&(o=ur[n],n="%"+o[0]+"%"),oe(ht,n)){var i=ht[n];if(i===St&&(i=li(n)),typeof i=="undefined"&&!r)throw new Ot("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new Pt("intrinsic "+t+" does not exist!")},en=function(t,r){if(typeof t!="string"||t.length===0)throw new Ot("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Ot('"allowMissing" argument must be a boolean');if(di(/^%?[^%]*%?$/,t)===null)throw new Pt("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=vi(t),o=n.length>0?n[0]:"",i=gi("%"+o+"%",r),s=i.name,a=i.value,u=!1,c=i.alias;c&&(o=c[0],hi(n,pi([0,1],c)));for(var l=1,p=!0;l<n.length;l+=1){var y=n[l],d=ie(y,0,1),f=ie(y,-1);if((d==='"'||d==="'"||d==="`"||f==='"'||f==="'"||f==="`")&&d!==f)throw new Pt("property names with quotes must have matching quotes");if((y==="constructor"||!p)&&(u=!0),o+="."+y,s="%"+o+"%",oe(ht,s))a=ht[s];else if(a!=null){if(!(y in a)){if(!r)throw new Ot("base intrinsic for "+t+" exists, but the property is not available.");return}if(pt&&l+1>=n.length){var h=pt(a,y);p=!!h,p&&"get"in h&&!("originalValue"in h.get)?a=h.get:a=a[y]}else p=oe(a,y),a=a[y];p&&!u&&(ht[s]=a)}}return a},_i=en,Kt=_i("%Object.defineProperty%",!0)||!1;if(Kt)try{Kt({},"a",{value:1})}catch{Kt=!1}var rn=Kt,bi=en,Yt=bi("%Object.getOwnPropertyDescriptor%",!0);if(Yt)try{Yt([],"length")}catch{Yt=null}var nn=Yt,fr=rn,wi=Xr,_t=Zr,lr=nn,Si=function(t,r,n){if(!t||typeof t!="object"&&typeof t!="function")throw new _t("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new _t("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new _t("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new _t("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new _t("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new _t("`loose`, if provided, must be a boolean");var o=arguments.length>3?arguments[3]:null,i=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,u=!!lr&&lr(t,r);if(fr)fr(t,r,{configurable:s===null&&u?u.configurable:!s,enumerable:o===null&&u?u.enumerable:!o,value:n,writable:i===null&&u?u.writable:!i});else if(a||!o&&!i&&!s)t[r]=n;else throw new wi("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},ke=rn,on=function(){return!!ke};on.hasArrayLengthDefineBug=function(){if(!ke)return null;try{return ke([],"length",{value:1}).length!==1}catch{return!0}};var $i=on,Ai=Do,Oi=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Ei=Object.prototype.toString,Pi=Array.prototype.concat,pr=Si,Ni=function(e){return typeof e=="function"&&Ei.call(e)==="[object Function]"},sn=$i(),Ci=function(e,t,r,n){if(t in e){if(n===!0){if(e[t]===r)return}else if(!Ni(n)||!n())return}sn?pr(e,t,r,!0):pr(e,t,r)},an=function(e,t){var r=arguments.length>2?arguments[2]:{},n=Ai(t);Oi&&(n=Pi.call(n,Object.getOwnPropertySymbols(t)));for(var o=0;o<n.length;o+=1)Ci(e,n[o],t[n[o]],r[n[o]])};an.supportsDescriptors=!!sn;var un=an,Ft={exports:{}};typeof self!="undefined"?Ft.exports=self:typeof window!="undefined"?Ft.exports=window:Ft.exports=Function("return this")();var Ii=Ft.exports,cn=function(){return typeof J!="object"||!J||J.Math!==Math||J.Array!==Array?Ii:J},xi=un,ki=nn,Di=cn,Ti=function(){var t=Di();if(xi.supportsDescriptors){var r=ki(t,"globalThis");(!r||r.configurable&&(r.enumerable||!r.writable||globalThis!==t))&&Object.defineProperty(t,"globalThis",{configurable:!0,enumerable:!1,value:t,writable:!0})}else(typeof globalThis!="object"||globalThis!==t)&&(t.globalThis=t);return t},Mi=un,Fi=Ft.exports,fn=cn,ji=Ti,Li=fn(),ln=function(){return Li};Mi(ln,{getPolyfill:fn,implementation:Fi,shim:ji});var Ri=ln,Bi=J&&J.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(q,"__esModule",{value:!0});q.NO_IL=Be=q.NO=q.MemoryStream=Z=q.Stream=void 0;var Ui=$o,Wi=Ri,zt=Ui.default(Wi.getPolyfill()),b={},Be=q.NO=b;function B(){}function Xt(e){for(var t=e.length,r=Array(t),n=0;n<t;++n)r[n]=e[n];return r}function Gi(e,t){return function(n){return e(n)&&t(n)}}function Ue(e,t,r){try{return e.f(t)}catch(n){return r._e(n),b}}var ft={_n:B,_e:B,_c:B};q.NO_IL=ft;function hr(e){e._start=function(r){r.next=r._n,r.error=r._e,r.complete=r._c,this.start(r)},e._stop=e.stop}var zi=function(){function e(t,r){this._stream=t,this._listener=r}return e.prototype.unsubscribe=function(){this._stream._remove(this._listener)},e}(),qi=function(){function e(t){this._listener=t}return e.prototype.next=function(t){this._listener._n(t)},e.prototype.error=function(t){this._listener._e(t)},e.prototype.complete=function(){this._listener._c()},e}(),Hi=function(){function e(t){this.type="fromObservable",this.ins=t,this.active=!1}return e.prototype._start=function(t){this.out=t,this.active=!0,this._sub=this.ins.subscribe(new qi(t)),this.active||this._sub.unsubscribe()},e.prototype._stop=function(){this._sub&&this._sub.unsubscribe(),this.active=!1},e}(),Vi=function(){function e(t){this.type="merge",this.insArr=t,this.out=b,this.ac=0}return e.prototype._start=function(t){this.out=t;var r=this.insArr,n=r.length;this.ac=n;for(var o=0;o<n;o++)r[o]._add(this)},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=0;n<r;n++)t[n]._remove(this);this.out=b},e.prototype._n=function(t){var r=this.out;r!==b&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==b&&r._e(t)},e.prototype._c=function(){if(--this.ac<=0){var t=this.out;if(t===b)return;t._c()}},e}(),Ji=function(){function e(t,r,n){this.i=t,this.out=r,this.p=n,n.ils.push(this)}return e.prototype._n=function(t){var r=this.p,n=this.out;if(n!==b&&r.up(t,this.i)){var o=Xt(r.vals);n._n(o)}},e.prototype._e=function(t){var r=this.out;r!==b&&r._e(t)},e.prototype._c=function(){var t=this.p;t.out!==b&&--t.Nc===0&&t.out._c()},e}(),Ki=function(){function e(t){this.type="combine",this.insArr=t,this.out=b,this.ils=[],this.Nc=this.Nn=0,this.vals=[]}return e.prototype.up=function(t,r){var n=this.vals[r],o=this.Nn?n===b?--this.Nn:this.Nn:0;return this.vals[r]=t,o===0},e.prototype._start=function(t){this.out=t;var r=this.insArr,n=this.Nc=this.Nn=r.length,o=this.vals=new Array(n);if(n===0)t._n([]),t._c();else for(var i=0;i<n;i++)o[i]=b,r[i]._add(new Ji(i,t,this))},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=this.ils,o=0;o<r;o++)t[o]._remove(n[o]);this.out=b,this.ils=[],this.vals=[]},e}(),Yi=function(){function e(t){this.type="fromArray",this.a=t}return e.prototype._start=function(t){for(var r=this.a,n=0,o=r.length;n<o;n++)t._n(r[n]);t._c()},e.prototype._stop=function(){},e}(),Xi=function(){function e(t){this.type="fromPromise",this.on=!1,this.p=t}return e.prototype._start=function(t){var r=this;this.on=!0,this.p.then(function(n){r.on&&(t._n(n),t._c())},function(n){t._e(n)}).then(B,function(n){setTimeout(function(){throw n})})},e.prototype._stop=function(){this.on=!1},e}(),Zi=function(){function e(t){this.type="periodic",this.period=t,this.intervalID=-1,this.i=0}return e.prototype._start=function(t){var r=this;function n(){t._n(r.i++)}this.intervalID=setInterval(n,this.period)},e.prototype._stop=function(){this.intervalID!==-1&&clearInterval(this.intervalID),this.intervalID=-1,this.i=0},e}(),Qi=function(){function e(t,r){this.type="debug",this.ins=t,this.out=b,this.s=B,this.l="",typeof r=="string"?this.l=r:typeof r=="function"&&(this.s=r)}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=b},e.prototype._n=function(t){var r=this.out;if(r!==b){var n=this.s,o=this.l;if(n!==B)try{n(t)}catch(i){r._e(i)}else o?console.log(o+":",t):console.log(t);r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==b&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==b&&t._c()},e}(),ts=function(){function e(t,r){this.type="drop",this.ins=r,this.out=b,this.max=t,this.dropped=0}return e.prototype._start=function(t){this.out=t,this.dropped=0,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=b},e.prototype._n=function(t){var r=this.out;r!==b&&this.dropped++>=this.max&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==b&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==b&&t._c()},e}(),es=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(){this.op.end()},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.end()},e}(),rs=function(){function e(t,r){this.type="endWhen",this.ins=r,this.out=b,this.o=t,this.oil=ft}return e.prototype._start=function(t){this.out=t,this.o._add(this.oil=new es(t,this)),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.o._remove(this.oil),this.out=b,this.oil=ft},e.prototype.end=function(){var t=this.out;t!==b&&t._c()},e.prototype._n=function(t){var r=this.out;r!==b&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==b&&r._e(t)},e.prototype._c=function(){this.end()},e}(),ge=function(){function e(t,r){this.type="filter",this.ins=r,this.out=b,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=b},e.prototype._n=function(t){var r=this.out;if(r!==b){var n=Ue(this,t,r);n===b||!n||r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==b&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==b&&t._c()},e}(),ns=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(t){this.out._n(t)},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.inner=b,this.op.less()},e}(),os=function(){function e(t){this.type="flatten",this.ins=t,this.out=b,this.open=!0,this.inner=b,this.il=ft}return e.prototype._start=function(t){this.out=t,this.open=!0,this.inner=b,this.il=ft,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.inner!==b&&this.inner._remove(this.il),this.out=b,this.open=!0,this.inner=b,this.il=ft},e.prototype.less=function(){var t=this.out;t!==b&&!this.open&&this.inner===b&&t._c()},e.prototype._n=function(t){var r=this.out;if(r!==b){var n=this,o=n.inner,i=n.il;o!==b&&i!==ft&&o._remove(i),(this.inner=t)._add(this.il=new ns(r,this))}},e.prototype._e=function(t){var r=this.out;r!==b&&r._e(t)},e.prototype._c=function(){this.open=!1,this.less()},e}(),is=function(){function e(t,r,n){var o=this;this.type="fold",this.ins=n,this.out=b,this.f=function(i){return t(o.acc,i)},this.acc=this.seed=r}return e.prototype._start=function(t){this.out=t,this.acc=this.seed,t._n(this.acc),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=b,this.acc=this.seed},e.prototype._n=function(t){var r=this.out;if(r!==b){var n=Ue(this,t,r);n!==b&&r._n(this.acc=n)}},e.prototype._e=function(t){var r=this.out;r!==b&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==b&&t._c()},e}(),ss=function(){function e(t){this.type="last",this.ins=t,this.out=b,this.has=!1,this.val=b}return e.prototype._start=function(t){this.out=t,this.has=!1,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=b,this.val=b},e.prototype._n=function(t){this.has=!0,this.val=t},e.prototype._e=function(t){var r=this.out;r!==b&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==b&&(this.has?(t._n(this.val),t._c()):t._e(new Error("last() failed because input stream completed")))},e}(),as=function(){function e(t,r){this.type="map",this.ins=r,this.out=b,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=b},e.prototype._n=function(t){var r=this.out;if(r!==b){var n=Ue(this,t,r);n!==b&&r._n(n)}},e.prototype._e=function(t){var r=this.out;r!==b&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==b&&t._c()},e}(),us=function(){function e(t){this.type="remember",this.ins=t,this.out=b}return e.prototype._start=function(t){this.out=t,this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=b},e}(),cs=function(){function e(t,r){this.type="replaceError",this.ins=r,this.out=b,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=b},e.prototype._n=function(t){var r=this.out;r!==b&&r._n(t)},e.prototype._e=function(t){var r=this.out;if(r!==b)try{this.ins._remove(this),(this.ins=this.f(t))._add(this)}catch(n){r._e(n)}},e.prototype._c=function(){var t=this.out;t!==b&&t._c()},e}(),fs=function(){function e(t,r){this.type="startWith",this.ins=t,this.out=b,this.val=r}return e.prototype._start=function(t){this.out=t,this.out._n(this.val),this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=b},e}(),ls=function(){function e(t,r){this.type="take",this.ins=r,this.out=b,this.max=t,this.taken=0}return e.prototype._start=function(t){this.out=t,this.taken=0,this.max<=0?t._c():this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=b},e.prototype._n=function(t){var r=this.out;if(r!==b){var n=++this.taken;n<this.max?r._n(t):n===this.max&&(r._n(t),r._c())}},e.prototype._e=function(t){var r=this.out;r!==b&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==b&&t._c()},e}(),We=function(){function e(t){this._prod=t||b,this._ils=[],this._stopID=b,this._dl=b,this._d=!1,this._target=null,this._err=b}return e.prototype._n=function(t){var r=this._ils,n=r.length;if(this._d&&this._dl._n(t),n==1)r[0]._n(t);else{if(n==0)return;for(var o=Xt(r),i=0;i<n;i++)o[i]._n(t)}},e.prototype._e=function(t){if(this._err===b){this._err=t;var r=this._ils,n=r.length;if(this._x(),this._d&&this._dl._e(t),n==1)r[0]._e(t);else{if(n==0)return;for(var o=Xt(r),i=0;i<n;i++)o[i]._e(t)}if(!this._d&&n==0)throw this._err}},e.prototype._c=function(){var t=this._ils,r=t.length;if(this._x(),this._d&&this._dl._c(),r==1)t[0]._c();else{if(r==0)return;for(var n=Xt(t),o=0;o<r;o++)n[o]._c()}},e.prototype._x=function(){this._ils.length!==0&&(this._prod!==b&&this._prod._stop(),this._err=b,this._ils=[])},e.prototype._stopNow=function(){this._prod._stop(),this._err=b,this._stopID=b},e.prototype._add=function(t){var r=this._target;if(r)return r._add(t);var n=this._ils;if(n.push(t),!(n.length>1))if(this._stopID!==b)clearTimeout(this._stopID),this._stopID=b;else{var o=this._prod;o!==b&&o._start(this)}},e.prototype._remove=function(t){var r=this,n=this._target;if(n)return n._remove(t);var o=this._ils,i=o.indexOf(t);i>-1&&(o.splice(i,1),this._prod!==b&&o.length<=0?(this._err=b,this._stopID=setTimeout(function(){return r._stopNow()})):o.length===1&&this._pruneCycles())},e.prototype._pruneCycles=function(){this._hasNoSinks(this,[])&&this._remove(this._ils[0])},e.prototype._hasNoSinks=function(t,r){if(r.indexOf(t)!==-1)return!0;if(t.out===this)return!0;if(t.out&&t.out!==b)return this._hasNoSinks(t.out,r.concat(t));if(t._ils){for(var n=0,o=t._ils.length;n<o;n++)if(!this._hasNoSinks(t._ils[n],r.concat(t)))return!1;return!0}else return!1},e.prototype.ctor=function(){return this instanceof et?et:e},e.prototype.addListener=function(t){t._n=t.next||B,t._e=t.error||B,t._c=t.complete||B,this._add(t)},e.prototype.removeListener=function(t){this._remove(t)},e.prototype.subscribe=function(t){return this.addListener(t),new zi(this,t)},e.prototype[zt]=function(){return this},e.create=function(t){if(t){if(typeof t.start!="function"||typeof t.stop!="function")throw new Error("producer requires both start and stop functions");hr(t)}return new e(t)},e.createWithMemory=function(t){return t&&hr(t),new et(t)},e.never=function(){return new e({_start:B,_stop:B})},e.empty=function(){return new e({_start:function(t){t._c()},_stop:B})},e.throw=function(t){return new e({_start:function(r){r._e(t)},_stop:B})},e.from=function(t){if(typeof t[zt]=="function")return e.fromObservable(t);if(typeof t.then=="function")return e.fromPromise(t);if(Array.isArray(t))return e.fromArray(t);throw new TypeError("Type of input to from() must be an Array, Promise, or Observable")},e.of=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.fromArray(t)},e.fromArray=function(t){return new e(new Yi(t))},e.fromPromise=function(t){return new e(new Xi(t))},e.fromObservable=function(t){if(t.endWhen!==void 0)return t;var r=typeof t[zt]=="function"?t[zt]():t;return new e(new Hi(r))},e.periodic=function(t){return new e(new Zi(t))},e.prototype._map=function(t){return new(this.ctor())(new as(t,this))},e.prototype.map=function(t){return this._map(t)},e.prototype.mapTo=function(t){var r=this.map(function(){return t}),n=r._prod;return n.type="mapTo",r},e.prototype.filter=function(t){var r=this._prod;return r instanceof ge?new e(new ge(Gi(r.f,t),r.ins)):new e(new ge(t,this))},e.prototype.take=function(t){return new(this.ctor())(new ls(t,this))},e.prototype.drop=function(t){return new e(new ts(t,this))},e.prototype.last=function(){return new e(new ss(this))},e.prototype.startWith=function(t){return new et(new fs(this,t))},e.prototype.endWhen=function(t){return new(this.ctor())(new rs(t,this))},e.prototype.fold=function(t,r){return new et(new is(t,r,this))},e.prototype.replaceError=function(t){return new(this.ctor())(new cs(t,this))},e.prototype.flatten=function(){return new e(new os(this))},e.prototype.compose=function(t){return t(this)},e.prototype.remember=function(){return new et(new us(this))},e.prototype.debug=function(t){return new(this.ctor())(new Qi(this,t))},e.prototype.imitate=function(t){if(t instanceof et)throw new Error("A MemoryStream was given to imitate(), but it only supports a Stream. Read more about this restriction here: https://github.com/staltz/xstream#faq");this._target=t;for(var r=this._ils,n=r.length,o=0;o<n;o++)t._add(r[o]);this._ils=[]},e.prototype.shamefullySendNext=function(t){this._n(t)},e.prototype.shamefullySendError=function(t){this._e(t)},e.prototype.shamefullySendComplete=function(){this._c()},e.prototype.setDebugListener=function(t){t?(this._d=!0,t._n=t.next||B,t._e=t.error||B,t._c=t.complete||B,this._dl=t):(this._d=!1,this._dl=b)},e.merge=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new Vi(r))},e.combine=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new Ki(r))},e}(),Z=q.Stream=We,et=function(e){Bi(t,e);function t(r){var n=e.call(this,r)||this;return n._has=!1,n}return t.prototype._n=function(r){this._v=r,this._has=!0,e.prototype._n.call(this,r)},t.prototype._add=function(r){var n=this._target;if(n)return n._add(r);var o=this._ils;if(o.push(r),o.length>1){this._has&&r._n(this._v);return}if(this._stopID!==b)this._has&&r._n(this._v),clearTimeout(this._stopID),this._stopID=b;else if(this._has)r._n(this._v);else{var i=this._prod;i!==b&&i._start(this)}},t.prototype._stopNow=function(){this._has=!1,e.prototype._stopNow.call(this)},t.prototype._x=function(){this._has=!1,e.prototype._x.call(this)},t.prototype.map=function(r){return this._map(r)},t.prototype.mapTo=function(r){return e.prototype.mapTo.call(this,r)},t.prototype.take=function(r){return e.prototype.take.call(this,r)},t.prototype.endWhen=function(r){return e.prototype.endWhen.call(this,r)},t.prototype.replaceError=function(r){return e.prototype.replaceError.call(this,r)},t.prototype.remember=function(){return this},t.prototype.debug=function(r){return e.prototype.debug.call(this,r)},t}(We);q.MemoryStream=et;var ps=We,$=q.default=ps,Ge={};Object.defineProperty(Ge,"__esModule",{value:!0});function pn(){var e;return typeof window!="undefined"?e=window:typeof J!="undefined"?e=J:e=this,e.Cyclejs=e.Cyclejs||{},e=e.Cyclejs,e.adaptStream=e.adaptStream||function(t){return t},e}function hs(e){pn().adaptStream=e}Ge.setAdapt=hs;function ds(e){return pn().adaptStream(e)}var H=Ge.adapt=ds;function ys(e,t){if(typeof e!="function")throw new Error("First argument given to isolate() must be a 'dataflowComponent' function");if(t===null)throw new Error("Second argument given to isolate() must not be null")}function ms(e,t,r){var n={};return Object.keys(e).forEach(function(o){if(typeof t=="string"){n[o]=t;return}var i=t[o];if(typeof i!="undefined"){n[o]=i;return}var s=t["*"];if(typeof s!="undefined"){n[o]=s;return}n[o]=r}),n}function vs(e,t){var r={};for(var n in e){var o=e[n];e.hasOwnProperty(n)&&o&&t[n]!==null&&typeof o.isolateSource=="function"?r[n]=o.isolateSource(o,t[n]):e.hasOwnProperty(n)&&(r[n]=e[n])}return r}function gs(e,t,r){var n={};for(var o in t){var i=e[o],s=t[o];t.hasOwnProperty(o)&&i&&r[o]!==null&&typeof i.isolateSink=="function"?n[o]=H(i.isolateSink($.fromObservable(s),r[o])):t.hasOwnProperty(o)&&(n[o]=t[o])}return n}var hn=0;function dr(){return"cycle"+ ++hn}function st(e,t){t===void 0&&(t=dr()),ys(e,t);var r=typeof t=="object"?dr():"",n=typeof t=="string"||typeof t=="object"?t:t.toString();return function(i){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];var u=ms(i,n,r),c=vs(i,u),l=e.apply(void 0,[c].concat(s)),p=gs(i,l,u);return p}}st.reset=function(){return hn=0};var pe={};Object.defineProperty(pe,"__esModule",{value:!0});pe.DropRepeatsOperator=void 0;var _s=q,_e={},dn=function(){function e(t,r){this.ins=t,this.type="dropRepeats",this.out=null,this.v=_e,this.isEq=r||function(n,o){return n===o}}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.v=_e},e.prototype._n=function(t){var r=this.out;if(!!r){var n=this.v;n!==_e&&this.isEq(t,n)||(this.v=t,r._n(t))}},e.prototype._e=function(t){var r=this.out;!r||r._e(t)},e.prototype._c=function(){var t=this.out;!t||t._c()},e}();pe.DropRepeatsOperator=dn;function bs(e){return e===void 0&&(e=void 0),function(r){return new _s.Stream(new dn(r,e))}}var ws=pe.default=bs,De=globalThis&&globalThis.__assign||function(){return De=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},De.apply(this,arguments)};function Ss(e,t,r){if(r===e[t])return e;var n=parseInt(t);return typeof r=="undefined"?e.filter(function(o,i){return i!==n}):e.map(function(o,i){return i===n?r:o})}function yn(e){return typeof e=="string"||typeof e=="number"?function(r){if(typeof r!="undefined")return r[e]}:e.get}function $s(e){return typeof e=="string"||typeof e=="number"?function(r,n){var o,i;return Array.isArray(r)?Ss(r,e,n):typeof r=="undefined"?(o={},o[e]=n,o):De({},r,(i={},i[e]=n,i))}:e.set}function As(e,t){return e.select(t)}function Os(e,t){var r=yn(t),n=$s(t);return e.map(function(o){return function(s){var a=r(s),u=o(a);return a===u?s:n(s,u)}})}var Dt=function(){function e(t,r){this.isolateSource=As,this.isolateSink=Os,this._stream=t.filter(function(n){return typeof n!="undefined"}).compose(ws()).remember(),this._name=r,this.stream=H(this._stream),this._stream._isCycleSource=r}return e.prototype.select=function(t){var r=yn(t);return new e(this._stream.map(r),this._name)},e}(),Es=function(){function e(t,r,n){this.ins=n,this.out=t,this.p=r}return e.prototype._n=function(t){this.p;var r=this.out;r!==null&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){},e}(),Ps=function(){function e(t,r){this.type="pickMerge",this.ins=r,this.out=null,this.sel=t,this.ils=new Map,this.inst=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this);var t=this.ils;t.forEach(function(r,n){r.ins._remove(r),r.ins=null,r.out=null,t.delete(n)}),t.clear(),this.out=null,this.ils=new Map,this.inst=null},e.prototype._n=function(t){this.inst=t;for(var r=t.arr,n=this.ils,o=this.out,i=this.sel,s=r.length,a=0;a<s;++a){var u=r[a],c=u._key,l=$.fromObservable(u[i]||$.never());n.has(c)||(n.set(c,new Es(o,this,l)),l._add(n.get(c)))}n.forEach(function(p,y){(!t.dict.has(y)||!t.dict.get(y))&&(p.ins._remove(p),p.ins=null,p.out=null,n.delete(y))})},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==null&&t._c()},e}();function Ns(e){return function(r){return new Z(new Ps(e,r))}}var Cs=function(){function e(t,r,n,o){this.key=t,this.out=r,this.p=n,this.val=Be,this.ins=o}return e.prototype._n=function(t){this.p;var r=this.out;this.val=t,r!==null&&this.p.up()},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){},e}(),Is=function(){function e(t,r){this.type="combine",this.ins=r,this.sel=t,this.out=null,this.ils=new Map,this.inst=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this);var t=this.ils;t.forEach(function(r){r.ins._remove(r),r.ins=null,r.out=null,r.val=null}),t.clear(),this.out=null,this.ils=new Map,this.inst=null},e.prototype.up=function(){for(var t=this.inst.arr,r=t.length,n=this.ils,o=Array(r),i=0;i<r;++i){var s=t[i],a=s._key;if(!n.has(a))return;var u=n.get(a).val;if(u===Be)return;o[i]=u}this.out._n(o)},e.prototype._n=function(t){this.inst=t;var r=t.arr,n=this.ils,o=this.out,i=this.sel,s=t.dict,a=r.length,u=!1;if(n.forEach(function(d,f){s.has(f)||(d.ins._remove(d),d.ins=null,d.out=null,d.val=null,n.delete(f),u=!0)}),a===0){o._n([]);return}for(var c=0;c<a;++c){var l=r[c],p=l._key;if(!l[i])throw new Error("pickCombine found an undefined child sink stream");var y=$.fromObservable(l[i]);n.has(p)||(n.set(p,new Cs(p,o,this,y)),y._add(n.get(p)))}u&&this.up()},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==null&&t._c()},e}();function xs(e){return function(r){return new Z(new Is(e,r))}}var se=globalThis&&globalThis.__assign||function(){return se=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},se.apply(this,arguments)},ks=function(){function e(t){this._instances$=t}return e.prototype.pickMerge=function(t){return H(this._instances$.compose(Ns(t)))},e.prototype.pickCombine=function(t){return H(this._instances$.compose(xs(t)))},e}();function Ds(e){return{"*":null}}function Ts(e,t){return{get:function(r){if(typeof r!="undefined"){for(var n=0,o=r.length;n<o;++n)if(""+e(r[n],n)===t)return r[n];return}},set:function(r,n){return typeof r=="undefined"?[n]:typeof n=="undefined"?r.filter(function(o,i){return""+e(o,i)!==t}):r.map(function(o,i){return""+e(o,i)===t?n:o})}}}var Ms={get:function(e){return e},set:function(e,t){return t}};function Fs(e){return function(r){var n=e.channel||"state",o=e.itemKey,i=e.itemScope||Ds,s=$.fromObservable(r[n].stream),a=s.fold(function(u,c){var l,p,y,d,f=u.dict;if(Array.isArray(c)){for(var h=Array(c.length),m=new Set,v=0,A=c.length;v<A;++v){var _=""+(o?o(c[v],v):v);if(m.add(_),f.has(_))h[v]=f.get(_);else{var g=o?Ts(o,_):""+v,S=i(_),E=typeof S=="string"?(l={"*":S},l[n]=g,l):se({},S,(p={},p[n]=g,p)),P=e.itemFactory?e.itemFactory(c[v],v):e.item,O=st(P,E)(r);f.set(_,O),h[v]=O}h[v]._key=_}return f.forEach(function(N,D){m.has(D)||f.delete(D)}),m.clear(),{dict:f,arr:h}}else{f.clear();var _=""+(o?o(c,0):"this"),g=Ms,S=i(_),E=typeof S=="string"?(y={"*":S},y[n]=g,y):se({},S,(d={},d[n]=g,d)),P=e.itemFactory?e.itemFactory(c,0):e.item,O=st(P,E)(r);return f.set(_,O),{dict:f,arr:[O]}}},{dict:new Map,arr:[]});return e.collectSinks(new ks(a))}}var mn={};Object.defineProperty(mn,"__esModule",{value:!0});var js=q,Ls=function(){function e(t){this.streams=t,this.type="concat",this.out=null,this.i=0}return e.prototype._start=function(t){this.out=t,this.streams[this.i]._add(this)},e.prototype._stop=function(){var t=this.streams;this.i<t.length&&t[this.i]._remove(this),this.i=0,this.out=null},e.prototype._n=function(t){var r=this.out;!r||r._n(t)},e.prototype._e=function(t){var r=this.out;!r||r._e(t)},e.prototype._c=function(){var t=this.out;if(!!t){var r=this.streams;r[this.i]._remove(this),++this.i<r.length?r[this.i]._add(this):t._c()}},e}();function Rs(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new js.Stream(new Ls(e))}var vn=mn.default=Rs,gn={};Object.defineProperty(gn,"__esModule",{value:!0});function Bs(){return typeof queueMicrotask!="undefined"?queueMicrotask:typeof setImmediate!="undefined"?setImmediate:typeof process!="undefined"?process.nextTick:setTimeout}var _n=gn.default=Bs,be=_n();function Us(e,t){return t===void 0&&(t="state"),function(n){var o=$.create(),i=o.fold(function(c,l){return l(c)},void 0).drop(1),s=n;s[t]=new Dt(i,t);var a=e(s);if(a[t]){var u=vn($.fromObservable(a[t]),$.never());u.subscribe({next:function(c){return be(function(){return o._n(c)})},error:function(c){return be(function(){return o._e(c)})},complete:function(){return be(function(){return o._c()})}})}return a}}function Ws(){var e;return typeof window!="undefined"?e=window:typeof global!="undefined"?e=global:e=this,e.Cyclejs=e.Cyclejs||{},e=e.Cyclejs,e.adaptStream=e.adaptStream||function(t){return t},e}function Gs(e){return Ws().adaptStream(e)}function zs(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=$.create());return t}function qs(e,t){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n](t[n],n),r[n]&&typeof r[n]=="object"&&(r[n]._isCycleSource=n));return r}function Hs(e){for(var t in e)e.hasOwnProperty(t)&&e[t]&&typeof e[t].shamefullySendNext=="function"&&(e[t]=Gs(e[t]));return e}function Vs(e,t){var r=_n(),n=Object.keys(e).filter(function(a){return!!t[a]}),o={},i={};n.forEach(function(a){o[a]={_n:[],_e:[]},i[a]={next:function(u){return o[a]._n.push(u)},error:function(u){return o[a]._e.push(u)},complete:function(){}}});var s=n.map(function(a){return $.fromObservable(e[a]).subscribe(i[a])});return n.forEach(function(a){var u=t[a],c=function(p){r(function(){return u._n(p)})},l=function(p){r(function(){(console.error||console.log)(p),u._e(p)})};o[a]._n.forEach(c),o[a]._e.forEach(l),i[a].next=c,i[a].error=l,i[a]._n=c,i[a]._e=l}),o=null,function(){s.forEach(function(u){return u.unsubscribe()})}}function Js(e){Object.keys(e).forEach(function(t){return e[t]._c()})}function Ks(e){for(var t in e)e.hasOwnProperty(t)&&e[t]&&e[t].dispose&&e[t].dispose()}function bn(e){return Object.keys(e).length===0}function Ys(e,t){if(typeof e!="function")throw new Error("First argument given to Cycle must be the 'main' function.");if(typeof t!="object"||t===null)throw new Error("Second argument given to Cycle must be an object with driver functions as properties.");if(bn(t))throw new Error("Second argument given to Cycle must be an object with at least one driver function declared as a property.");var r=Xs(t),n=e(r.sources);typeof window!="undefined"&&(window.Cyclejs=window.Cyclejs||{},window.Cyclejs.sinks=n);function o(){var i=r.run(n);return function(){i(),r.dispose()}}return{sinks:n,sources:r.sources,run:o}}function Xs(e){if(typeof e!="object"||e===null)throw new Error("Argument given to setupReusable must be an object with driver functions as properties.");if(bn(e))throw new Error("Argument given to setupReusable must be an object with at least one driver function declared as a property.");var t=zs(e),r=qs(e,t),n=Hs(r);function o(s){return Vs(s,t)}function i(){Ks(n),Js(t)}return{sources:n,run:o,dispose:i}}function Zs(e,t){var r=Ys(e,t);return typeof window!="undefined"&&window.CyclejsDevTool_startGraphSerializer&&window.CyclejsDevTool_startGraphSerializer(r.sinks),r.run()}function Qs(e,t){return document.createElement(e,t)}function ta(e,t,r){return document.createElementNS(e,t,r)}function ea(){return dt(document.createDocumentFragment())}function ra(e){return document.createTextNode(e)}function na(e){return document.createComment(e)}function oa(e,t,r){if(Q(e)){let n=e;for(;n&&Q(n);)n=dt(n).parent;e=n!=null?n:e}Q(t)&&(t=dt(t,e)),r&&Q(r)&&(r=dt(r).firstChildNode),e.insertBefore(t,r)}function ia(e,t){e.removeChild(t)}function sa(e,t){Q(t)&&(t=dt(t,e)),e.appendChild(t)}function wn(e){if(Q(e)){for(;e&&Q(e);)e=dt(e).parent;return e!=null?e:null}return e.parentNode}function aa(e){var t;if(Q(e)){const r=dt(e),n=wn(r);if(n&&r.lastChildNode){const o=Array.from(n.childNodes),i=o.indexOf(r.lastChildNode);return(t=o[i+1])!==null&&t!==void 0?t:null}return null}return e.nextSibling}function ua(e){return e.tagName}function ca(e,t){e.textContent=t}function fa(e){return e.textContent}function la(e){return e.nodeType===1}function pa(e){return e.nodeType===3}function ha(e){return e.nodeType===8}function Q(e){return e.nodeType===11}function dt(e,t){var r,n,o;const i=e;return(r=i.parent)!==null&&r!==void 0||(i.parent=t!=null?t:null),(n=i.firstChildNode)!==null&&n!==void 0||(i.firstChildNode=e.firstChild),(o=i.lastChildNode)!==null&&o!==void 0||(i.lastChildNode=e.lastChild),i}const Sn={createElement:Qs,createElementNS:ta,createTextNode:ra,createDocumentFragment:ea,createComment:na,insertBefore:oa,removeChild:ia,appendChild:sa,parentNode:wn,nextSibling:aa,tagName:ua,setTextContent:ca,getTextContent:fa,isElement:la,isText:pa,isComment:ha,isDocumentFragment:Q};function X(e,t,r,n,o){const i=t===void 0?void 0:t.key;return{sel:e,data:t,children:r,text:n,elm:o,key:i}}const ae=Array.isArray;function Zt(e){return typeof e=="string"||typeof e=="number"||e instanceof String||e instanceof Number}function qt(e){return e===void 0}function z(e){return e!==void 0}const we=X("",{},[],void 0,void 0);function xt(e,t){var r,n;const o=e.key===t.key,i=((r=e.data)===null||r===void 0?void 0:r.is)===((n=t.data)===null||n===void 0?void 0:n.is),s=e.sel===t.sel,a=!e.sel&&e.sel===t.sel?typeof e.text==typeof t.text:!0;return s&&o&&i&&a}function da(){throw new Error("The document fragment is not supported on this platform.")}function ya(e,t){return e.isElement(t)}function ma(e,t){return e.isDocumentFragment(t)}function va(e,t,r){var n;const o={};for(let i=t;i<=r;++i){const s=(n=e[i])===null||n===void 0?void 0:n.key;s!==void 0&&(o[s]=i)}return o}const ga=["create","update","remove","destroy","pre","post"];function _a(e,t,r){const n={create:[],update:[],remove:[],destroy:[],pre:[],post:[]},o=t!==void 0?t:Sn;for(const f of ga)for(const h of e){const m=h[f];m!==void 0&&n[f].push(m)}function i(f){const h=f.id?"#"+f.id:"",m=f.getAttribute("class"),v=m?"."+m.split(" ").join("."):"";return X(o.tagName(f).toLowerCase()+h+v,{},[],void 0,f)}function s(f){return X(void 0,{},[],void 0,f)}function a(f,h){return function(){if(--h===0){const v=o.parentNode(f);v!==null&&o.removeChild(v,f)}}}function u(f,h){var m,v,A,_;let g,S=f.data;if(S!==void 0){const O=(m=S.hook)===null||m===void 0?void 0:m.init;z(O)&&(O(f),S=f.data)}const E=f.children,P=f.sel;if(P==="!")qt(f.text)&&(f.text=""),f.elm=o.createComment(f.text);else if(P==="")f.elm=o.createTextNode(f.text);else if(P!==void 0){const O=P.indexOf("#"),N=P.indexOf(".",O),D=O>0?O:P.length,T=N>0?N:P.length,j=O!==-1||N!==-1?P.slice(0,Math.min(D,T)):P,G=f.elm=z(S)&&z(g=S.ns)?o.createElementNS(g,j,S):o.createElement(j,S);for(D<T&&G.setAttribute("id",P.slice(D+1,T)),N>0&&G.setAttribute("class",P.slice(T+1).replace(/\./g," ")),g=0;g<n.create.length;++g)n.create[g](we,f);if(Zt(f.text)&&(!ae(E)||E.length===0)&&o.appendChild(G,o.createTextNode(f.text)),ae(E))for(g=0;g<E.length;++g){const vt=E[g];vt!=null&&o.appendChild(G,u(vt,h))}const tt=f.data.hook;z(tt)&&((v=tt.create)===null||v===void 0||v.call(tt,we,f),tt.insert&&h.push(f))}else if(((A=r==null?void 0:r.experimental)===null||A===void 0?void 0:A.fragments)&&f.children){for(f.elm=((_=o.createDocumentFragment)!==null&&_!==void 0?_:da)(),g=0;g<n.create.length;++g)n.create[g](we,f);for(g=0;g<f.children.length;++g){const O=f.children[g];O!=null&&o.appendChild(f.elm,u(O,h))}}else f.elm=o.createTextNode(f.text);return f.elm}function c(f,h,m,v,A,_){for(;v<=A;++v){const g=m[v];g!=null&&o.insertBefore(f,u(g,_),h)}}function l(f){var h,m;const v=f.data;if(v!==void 0){(m=(h=v==null?void 0:v.hook)===null||h===void 0?void 0:h.destroy)===null||m===void 0||m.call(h,f);for(let A=0;A<n.destroy.length;++A)n.destroy[A](f);if(f.children!==void 0)for(let A=0;A<f.children.length;++A){const _=f.children[A];_!=null&&typeof _!="string"&&l(_)}}}function p(f,h,m,v){for(var A,_;m<=v;++m){let g,S;const E=h[m];if(E!=null)if(z(E.sel)){l(E),g=n.remove.length+1,S=a(E.elm,g);for(let O=0;O<n.remove.length;++O)n.remove[O](E,S);const P=(_=(A=E==null?void 0:E.data)===null||A===void 0?void 0:A.hook)===null||_===void 0?void 0:_.remove;z(P)?P(E,S):S()}else E.children?(l(E),p(f,E.children,0,E.children.length-1)):o.removeChild(f,E.elm)}}function y(f,h,m,v){let A=0,_=0,g=h.length-1,S=h[0],E=h[g],P=m.length-1,O=m[0],N=m[P],D,T,j,G;for(;A<=g&&_<=P;)S==null?S=h[++A]:E==null?E=h[--g]:O==null?O=m[++_]:N==null?N=m[--P]:xt(S,O)?(d(S,O,v),S=h[++A],O=m[++_]):xt(E,N)?(d(E,N,v),E=h[--g],N=m[--P]):xt(S,N)?(d(S,N,v),o.insertBefore(f,S.elm,o.nextSibling(E.elm)),S=h[++A],N=m[--P]):xt(E,O)?(d(E,O,v),o.insertBefore(f,E.elm,S.elm),E=h[--g],O=m[++_]):(D===void 0&&(D=va(h,A,g)),T=D[O.key],qt(T)?(o.insertBefore(f,u(O,v),S.elm),O=m[++_]):qt(D[N.key])?(o.insertBefore(f,u(N,v),o.nextSibling(E.elm)),N=m[--P]):(j=h[T],j.sel!==O.sel?o.insertBefore(f,u(O,v),S.elm):(d(j,O,v),h[T]=void 0,o.insertBefore(f,j.elm,S.elm)),O=m[++_]));_<=P&&(G=m[P+1]==null?null:m[P+1].elm,c(f,G,m,_,P,v)),A<=g&&p(f,h,A,g)}function d(f,h,m){var v,A,_,g,S,E,P,O;const N=(v=h.data)===null||v===void 0?void 0:v.hook;(A=N==null?void 0:N.prepatch)===null||A===void 0||A.call(N,f,h);const D=h.elm=f.elm;if(f===h)return;if(h.data!==void 0||z(h.text)&&h.text!==f.text){(_=h.data)!==null&&_!==void 0||(h.data={}),(g=f.data)!==null&&g!==void 0||(f.data={});for(let G=0;G<n.update.length;++G)n.update[G](f,h);(P=(E=(S=h.data)===null||S===void 0?void 0:S.hook)===null||E===void 0?void 0:E.update)===null||P===void 0||P.call(E,f,h)}const T=f.children,j=h.children;qt(h.text)?z(T)&&z(j)?T!==j&&y(D,T,j,m):z(j)?(z(f.text)&&o.setTextContent(D,""),c(D,null,j,0,j.length-1,m)):z(T)?p(D,T,0,T.length-1):z(f.text)&&o.setTextContent(D,""):f.text!==h.text&&(z(T)&&p(D,T,0,T.length-1),o.setTextContent(D,h.text)),(O=N==null?void 0:N.postpatch)===null||O===void 0||O.call(N,f,h)}return function(h,m){let v,A,_;const g=[];for(v=0;v<n.pre.length;++v)n.pre[v]();for(ya(o,h)?h=i(h):ma(o,h)&&(h=s(h)),xt(h,m)?d(h,m,g):(A=h.elm,_=o.parentNode(A),u(m,g),_!==null&&(o.insertBefore(_,m.elm,o.nextSibling(A)),p(_,[h],0,0))),v=0;v<g.length;++v)g[v].data.hook.insert(g[v]);for(v=0;v<n.post.length;++v)n.post[v]();return m}}function ze(e,t,r){if(e.ns="http://www.w3.org/2000/svg",r!=="foreignObject"&&t!==void 0)for(let n=0;n<t.length;++n){const o=t[n];if(typeof o=="string")continue;const i=o.data;i!==void 0&&ze(i,o.children,o.sel)}}function rt(e,t,r){let n={},o,i,s;if(r!==void 0?(t!==null&&(n=t),ae(r)?o=r:Zt(r)?i=r.toString():r&&r.sel&&(o=[r])):t!=null&&(ae(t)?o=t:Zt(t)?i=t.toString():t&&t.sel?o=[t]:n=t),o!==void 0)for(s=0;s<o.length;++s)Zt(o[s])&&(o[s]=X(void 0,void 0,void 0,o[s],void 0));return e.startsWith("svg")&&(e.length===3||e[3]==="."||e[3]==="#")&&ze(n,o,e),X(e,n,o,i,void 0)}function Te(e,t){const r=t!==void 0?t:Sn;let n;if(r.isElement(e)){const o=e.id?"#"+e.id:"",i=e.getAttribute("class"),s=i?"."+i.split(" ").join("."):"",a=r.tagName(e).toLowerCase()+o+s,u={},c={},l={},p=[];let y,d,f;const h=e.attributes,m=e.childNodes;for(d=0,f=h.length;d<f;d++)y=h[d].nodeName,y.startsWith("data-")?c[y.slice(5)]=h[d].nodeValue||"":y!=="id"&&y!=="class"&&(u[y]=h[d].nodeValue);for(d=0,f=m.length;d<f;d++)p.push(Te(m[d],t));return Object.keys(u).length>0&&(l.attrs=u),Object.keys(c).length>0&&(l.dataset=c),a.startsWith("svg")&&(a.length===3||a[3]==="."||a[3]==="#")&&ze(l,p,a),X(a,l,p,void 0,e)}else return r.isText(e)?(n=r.getTextContent(e),X(void 0,void 0,void 0,n,e)):r.isComment(e)?(n=r.getTextContent(e),X("!",{},[],n,e)):X("",{},[],void 0,e)}const ba="http://www.w3.org/1999/xlink",wa="http://www.w3.org/2000/xmlns/",Sa="http://www.w3.org/XML/1998/namespace",yr=58,$a=120,Aa=109;function mr(e,t){let r;const n=t.elm;let o=e.data.attrs,i=t.data.attrs;if(!(!o&&!i)&&o!==i){o=o||{},i=i||{};for(r in i){const s=i[r];o[r]!==s&&(s===!0?n.setAttribute(r,""):s===!1?n.removeAttribute(r):r.charCodeAt(0)!==$a?n.setAttribute(r,s):r.charCodeAt(3)===yr?n.setAttributeNS(Sa,r,s):r.charCodeAt(5)===yr?r.charCodeAt(1)===Aa?n.setAttributeNS(wa,r,s):n.setAttributeNS(ba,r,s):n.setAttribute(r,s))}for(r in o)r in i||n.removeAttribute(r)}}const Oa={create:mr,update:mr};function vr(e,t){let r,n;const o=t.elm;let i=e.data.class,s=t.data.class;if(!(!i&&!s)&&i!==s){i=i||{},s=s||{};for(n in i)i[n]&&!Object.prototype.hasOwnProperty.call(s,n)&&o.classList.remove(n);for(n in s)r=s[n],r!==i[n]&&o.classList[r?"add":"remove"](n)}}const Ea={create:vr,update:vr},gr=/[A-Z]/g;function _r(e,t){const r=t.elm;let n=e.data.dataset,o=t.data.dataset,i;if(!n&&!o||n===o)return;n=n||{},o=o||{};const s=r.dataset;for(i in n)i in o||(s?i in s&&delete s[i]:r.removeAttribute("data-"+i.replace(gr,"-$&").toLowerCase()));for(i in o)n[i]!==o[i]&&(s?s[i]=o[i]:r.setAttribute("data-"+i.replace(gr,"-$&").toLowerCase(),o[i]))}const Pa={create:_r,update:_r};function br(e,t){let r,n,o;const i=t.elm;let s=e.data.props,a=t.data.props;if(!(!s&&!a)&&s!==a){s=s||{},a=a||{};for(r in a)n=a[r],o=s[r],o!==n&&(r!=="value"||i[r]!==n)&&(i[r]=n)}}const Na={create:br,update:br},wr=typeof(window==null?void 0:window.requestAnimationFrame)=="function"?window.requestAnimationFrame.bind(window):setTimeout,Ca=function(e){wr(function(){wr(e)})};let Me=!1;function Ia(e,t,r){Ca(function(){e[t]=r})}function Sr(e,t){let r,n;const o=t.elm;let i=e.data.style,s=t.data.style;if(!i&&!s||i===s)return;i=i||{},s=s||{};const a="delayed"in i;for(n in i)n in s||(n[0]==="-"&&n[1]==="-"?o.style.removeProperty(n):o.style[n]="");for(n in s)if(r=s[n],n==="delayed"&&s.delayed)for(const u in s.delayed)r=s.delayed[u],(!a||r!==i.delayed[u])&&Ia(o.style,u,r);else n!=="remove"&&r!==i[n]&&(n[0]==="-"&&n[1]==="-"?o.style.setProperty(n,r):o.style[n]=r)}function xa(e){let t,r;const n=e.elm,o=e.data.style;if(!(!o||!(t=o.destroy)))for(r in t)n.style[r]=t[r]}function ka(e,t){const r=e.data.style;if(!r||!r.remove){t();return}Me||(e.elm.offsetLeft,Me=!0);let n;const o=e.elm;let i=0;const s=r.remove;let a=0;const u=[];for(n in s)u.push(n),o.style[n]=s[n];const l=getComputedStyle(o)["transition-property"].split(", ");for(;i<l.length;++i)u.indexOf(l[i])!==-1&&a++;o.addEventListener("transitionend",function(p){p.target===o&&--a,a===0&&t()})}function Da(){Me=!1}const Ta={pre:Da,create:Sr,update:Sr,destroy:xa,remove:ka};function ue(e,t,r,n,o){r===void 0&&(r=!1),n===void 0&&(n=!1),o===void 0&&(o=!1);var i=null;return Z.create({start:function(a){n?i=function(c){An(c,n),a.next(c)}:i=function(c){a.next(c)},e.addEventListener(t,i,{capture:r,passive:o})},stop:function(){e.removeEventListener(t,i,r),i=null}})}function $n(e,t){for(var r=Object.keys(e),n=r.length,o=0;o<n;o++){var i=r[o];if(typeof e[i]=="object"&&typeof t[i]=="object"){if(!$n(e[i],t[i]))return!1}else if(e[i]!==t[i])return!1}return!0}function An(e,t){if(t)if(typeof t=="boolean")e.preventDefault();else if(Ma(t))t(e)&&e.preventDefault();else if(typeof t=="object")$n(t,e)&&e.preventDefault();else throw new Error("preventDefault has to be either a boolean, predicate function or object")}function Ma(e){return typeof e=="function"}var Fa=function(){function e(t){this._name=t}return e.prototype.select=function(t){return this},e.prototype.elements=function(){var t=H($.of([document]));return t._isCycleSource=this._name,t},e.prototype.element=function(){var t=H($.of(document));return t._isCycleSource=this._name,t},e.prototype.events=function(t,r,n){r===void 0&&(r={});var o;o=ue(document,t,r.useCapture,r.preventDefault);var i=H(o);return i._isCycleSource=this._name,i},e}(),ja=function(){function e(t){this._name=t}return e.prototype.select=function(t){return this},e.prototype.elements=function(){var t=H($.of([document.body]));return t._isCycleSource=this._name,t},e.prototype.element=function(){var t=H($.of(document.body));return t._isCycleSource=this._name,t},e.prototype.events=function(t,r,n){r===void 0&&(r={});var o;o=ue(document.body,t,r.useCapture,r.preventDefault);var i=H(o);return i._isCycleSource=this._name,i},e}();function La(e){var t=1,r=11;return typeof HTMLElement=="object"?e instanceof HTMLElement||e instanceof DocumentFragment:e&&typeof e=="object"&&e!==null&&(e.nodeType===t||e.nodeType===r)&&typeof e.nodeName=="string"}function Ra(e){return e.length>1&&(e[0]==="."||e[0]==="#")}function Ba(e){return e.nodeType===11}function Ua(e){if(typeof e!="string"&&!La(e))throw new Error("Given container is not a DOM element neither a selector string.")}function Wa(e){var t=typeof e=="string"?document.querySelector(e):e;if(typeof e=="string"&&t===null)throw new Error("Cannot render into unknown element `"+e+"`");return t}function On(e){for(var t="",r=e.length-1;r>=0&&e[r].type==="selector";r--)t=e[r].scope+" "+t;return t.trim()}function qe(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==t[r].type||e[r].scope!==t[r].scope)return!1;return!0}var En=function(){function e(t,r){this.namespace=t,this.isolateModule=r,this._namespace=t.filter(function(n){return n.type!=="selector"})}return e.prototype.isDirectlyInScope=function(t){var r=this.isolateModule.getNamespace(t);if(!r||this._namespace.length>r.length||!qe(this._namespace,r.slice(0,this._namespace.length)))return!1;for(var n=this._namespace.length;n<r.length;n++)if(r[n].type==="total")return!1;return!0},e}();function Ga(e){return Array.prototype.slice.call(e)}var Pn=function(){function e(t,r){this.namespace=t,this.isolateModule=r}return e.prototype.call=function(){var t=this.namespace,r=On(t),n=new En(t,this.isolateModule),o=this.isolateModule.getElement(t.filter(function(i){return i.type!=="selector"}));return o===void 0?[]:r===""?[o]:Ga(o.querySelectorAll(r)).filter(n.isDirectlyInScope,n).concat(o.matches(r)?[o]:[])},e}(),jt=globalThis&&globalThis.__assign||function(){return jt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},jt.apply(this,arguments)};function za(e){return function(t,r){return r===":root"?t:t.map(function(n){if(!n)return n;var o=Nn(r),i=jt({},n,{data:jt({},n.data,{isolate:!n.data||!Array.isArray(n.data.isolate)?e.concat([o]):n.data.isolate})});return jt({},i,{key:i.key!==void 0?i.key:JSON.stringify(i.data.isolate)})})}}function Nn(e){return{type:Ra(e)?"sibling":"total",scope:e}}var qa=function(){function e(t,r,n,o,i,s){n===void 0&&(n=[]),this._rootElement$=t,this._sanitation$=r,this._namespace=n,this._isolateModule=o,this._eventDelegator=i,this._name=s,this.isolateSource=function(a,u){return new e(a._rootElement$,a._sanitation$,a._namespace.concat(Nn(u)),a._isolateModule,a._eventDelegator,a._name)},this.isolateSink=za(this._namespace)}return e.prototype._elements=function(){if(this._namespace.length===0)return this._rootElement$.map(function(r){return[r]});var t=new Pn(this._namespace,this._isolateModule);return this._rootElement$.map(function(){return t.call()})},e.prototype.elements=function(){var t=H(this._elements().remember());return t._isCycleSource=this._name,t},e.prototype.element=function(){var t=H(this._elements().filter(function(r){return r.length>0}).map(function(r){return r[0]}).remember());return t._isCycleSource=this._name,t},Object.defineProperty(e.prototype,"namespace",{get:function(){return this._namespace},enumerable:!0,configurable:!0}),e.prototype.select=function(t){if(typeof t!="string")throw new Error("DOM driver's select() expects the argument to be a string as a CSS selector");if(t==="document")return new Fa(this._name);if(t==="body")return new ja(this._name);var r=t===":root"?[]:this._namespace.concat({type:"selector",scope:t.trim()});return new e(this._rootElement$,this._sanitation$,r,this._isolateModule,this._eventDelegator,this._name)},e.prototype.events=function(t,r,n){if(r===void 0&&(r={}),typeof t!="string")throw new Error("DOM driver's events() expects argument to be a string representing the event type to listen for.");var o=this._eventDelegator.addEventListener(t,this._namespace,r,n),i=H(o);return i._isCycleSource=this._name,i},e.prototype.dispose=function(){this._sanitation$.shamefullySendNext(null)},e}(),Nt={},Ha=J&&J.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)n[o]=i[s];return n};Object.defineProperty(Nt,"__esModule",{value:!0});Nt.SampleCombineOperator=Nt.SampleCombineListener=void 0;var Va=q,nt={},Cn=function(){function e(t,r){this.i=t,this.p=r,r.ils[t]=this}return e.prototype._n=function(t){var r=this.p;r.out!==nt&&r.up(t,this.i)},e.prototype._e=function(t){this.p._e(t)},e.prototype._c=function(){this.p.down(this.i,this)},e}();Nt.SampleCombineListener=Cn;var In=function(){function e(t,r){this.type="sampleCombine",this.ins=t,this.others=r,this.out=nt,this.ils=[],this.Nn=0,this.vals=[]}return e.prototype._start=function(t){this.out=t;for(var r=this.others,n=this.Nn=r.length,o=this.vals=new Array(n),i=0;i<n;i++)o[i]=nt,r[i]._add(new Cn(i,this));this.ins._add(this)},e.prototype._stop=function(){var t=this.others,r=t.length,n=this.ils;this.ins._remove(this);for(var o=0;o<r;o++)t[o]._remove(n[o]);this.out=nt,this.vals=[],this.ils=[]},e.prototype._n=function(t){var r=this.out;r!==nt&&(this.Nn>0||r._n(Ha([t],this.vals)))},e.prototype._e=function(t){var r=this.out;r!==nt&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==nt&&t._c()},e.prototype.up=function(t,r){var n=this.vals[r];this.Nn>0&&n===nt&&this.Nn--,this.vals[r]=t},e.prototype.down=function(t,r){this.others[t]._remove(r)},e}();Nt.SampleCombineOperator=In;var xn;xn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return function(o){return new Va.Stream(new In(o,t))}};var Ja=Nt.default=xn;globalThis&&globalThis.__assign;function kn(e){if(!e.sel)return{tagName:"",id:"",className:""};var t=e.sel,r=t.indexOf("#"),n=t.indexOf(".",r),o=r>0?r:t.length,i=n>0?n:t.length,s=r!==-1||n!==-1?t.slice(0,Math.min(o,i)):t,a=o<i?t.slice(o+1,i):void 0,u=n>0?t.slice(i+1).replace(/\./g," "):void 0;return{tagName:s,id:a,className:u}}function Ka(e){var t=kn(e).className,r=t===void 0?"":t;if(!e.data)return r;var n=e.data,o=n.class,i=n.props;if(o){var s=Object.keys(o).filter(function(a){return o[a]});r+=" "+s.join(" ")}return i&&i.className&&(r+=" "+i.className),r&&r.trim()}var Tt;typeof self!="undefined"?Tt=self:typeof window!="undefined"?Tt=window:typeof global!="undefined"?Tt=global:Tt=Function("return this")();var $r=Tt.Symbol;typeof $r=="function"&&$r("parent");var Ya=function(){function e(t){this.rootElement=t}return e.prototype.call=function(t){if(Ba(this.rootElement))return this.wrapDocFrag(t===null?[]:[t]);if(t===null)return this.wrap([]);var r=kn(t),n=r.tagName,o=r.id,i=Ka(t),s=t.data||{},a=s.props||{},u=a.id,c=u===void 0?o:u,l=typeof c=="string"&&c.toUpperCase()===this.rootElement.id.toUpperCase()&&n.toUpperCase()===this.rootElement.tagName.toUpperCase()&&i.toUpperCase()===this.rootElement.className.toUpperCase();return l?t:this.wrap([t])},e.prototype.wrapDocFrag=function(t){return X("",{isolate:[]},t,void 0,this.rootElement)},e.prototype.wrap=function(t){var r=this.rootElement,n=r.tagName,o=r.id,i=r.className,s=o?"#"+o:"",a=i?"."+i.split(" ").join("."):"",u=rt(""+n.toLowerCase()+s+a,{},t);return u.data=u.data||{},u.data.isolate=u.data.isolate||[],u},e}(),Xa=[Ta,Ea,Na,Oa,Pa],Dn=function(){function e(t){this.mapper=t,this.tree=[void 0,{}]}return e.prototype.set=function(t,r,n){for(var o=this.tree,i=n!==void 0?n:t.length,s=0;s<i;s++){var a=this.mapper(t[s]),u=o[1][a];u||(u=[void 0,{}],o[1][a]=u),o=u}o[0]=r},e.prototype.getDefault=function(t,r,n){return this.get(t,r,n)},e.prototype.get=function(t,r,n){for(var o=this.tree,i=n!==void 0?n:t.length,s=0;s<i;s++){var a=this.mapper(t[s]),u=o[1][a];if(!u)if(r)u=[void 0,{}],o[1][a]=u;else return;o=u}return r&&!o[0]&&(o[0]=r()),o[0]},e.prototype.delete=function(t){for(var r=this.tree,n=0;n<t.length-1;n++){var o=r[1][this.mapper(t[n])];if(!o)return;r=o}delete r[1][this.mapper(t[t.length-1])]},e}(),Za=function(){function e(){this.namespaceTree=new Dn(function(t){return t.scope}),this.namespaceByElement=new Map,this.vnodesBeingRemoved=[]}return e.prototype.setEventDelegator=function(t){this.eventDelegator=t},e.prototype.insertElement=function(t,r){this.namespaceByElement.set(r,t),this.namespaceTree.set(t,r)},e.prototype.removeElement=function(t){this.namespaceByElement.delete(t);var r=this.getNamespace(t);r&&this.namespaceTree.delete(r)},e.prototype.getElement=function(t,r){return this.namespaceTree.get(t,void 0,r)},e.prototype.getRootElement=function(t){if(this.namespaceByElement.has(t))return t;for(var r=t;!this.namespaceByElement.has(r);)if(r=r.parentNode,r){if(r.tagName==="HTML")throw new Error("No root element found, this should not happen at all")}else return;return r},e.prototype.getNamespace=function(t){var r=this.getRootElement(t);if(!!r)return this.namespaceByElement.get(r)},e.prototype.createModule=function(){var t=this;return{create:function(r,n){var o=n.elm,i=n.data,s=i===void 0?{}:i,a=s.isolate;Array.isArray(a)&&t.insertElement(a,o)},update:function(r,n){var o=r.elm,i=r.data,s=i===void 0?{}:i,a=n.elm,u=n.data,c=u===void 0?{}:u,l=s.isolate,p=c.isolate;qe(l,p)||Array.isArray(l)&&t.removeElement(o),Array.isArray(p)&&t.insertElement(p,a)},destroy:function(r){t.vnodesBeingRemoved.push(r)},remove:function(r,n){t.vnodesBeingRemoved.push(r),n()},post:function(){for(var r=t.vnodesBeingRemoved,n=r.length-1;n>=0;n--){var o=r[n],i=o.data!==void 0?o.data.isolation:void 0;i!==void 0&&t.removeElement(i),t.eventDelegator.removeElement(o.elm,i)}t.vnodesBeingRemoved=[]}}},e}(),Qa=function(){function e(){this.arr=[],this.prios=[]}return e.prototype.add=function(t,r){for(var n=0;n<this.arr.length;n++)if(this.prios[n]<r){this.arr.splice(n,0,t),this.prios.splice(n,0,r);return}this.arr.push(t),this.prios.push(r)},e.prototype.forEach=function(t){for(var r=0;r<this.arr.length;r++)t(this.arr[r],r,this.arr)},e.prototype.delete=function(t){for(var r=0;r<this.arr.length;r++)if(this.arr[r]===t){this.arr.splice(r,1),this.prios.splice(r,1);return}},e}(),ce=globalThis&&globalThis.__assign||function(){return ce=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ce.apply(this,arguments)},tu=["blur","canplay","canplaythrough","durationchange","emptied","ended","focus","load","loadeddata","loadedmetadata","mouseenter","mouseleave","pause","play","playing","ratechange","reset","scroll","seeked","seeking","stalled","submit","suspend","timeupdate","unload","volumechange","waiting"],eu=function(){function e(t,r){var n=this;this.rootElement$=t,this.isolateModule=r,this.virtualListeners=new Dn(function(o){return o.scope}),this.nonBubblingListenersToAdd=new Set,this.virtualNonBubblingListener=[],this.isolateModule.setEventDelegator(this),this.domListeners=new Map,this.domListenersToAdd=new Map,this.nonBubblingListeners=new Map,t.addListener({next:function(o){n.origin!==o&&(n.origin=o,n.resetEventListeners(),n.domListenersToAdd.forEach(function(i,s){return n.setupDOMListener(s,i)}),n.domListenersToAdd.clear()),n.nonBubblingListenersToAdd.forEach(function(i){n.setupNonBubblingListener(i)})}})}return e.prototype.addEventListener=function(t,r,n,o){var i=$.never(),s,a=new En(r,this.isolateModule),u=o===void 0?tu.indexOf(t)===-1:o;if(u)return this.domListeners.has(t)||this.setupDOMListener(t,!!n.passive),s=this.insertListener(i,a,t,n),i;var c=[];this.nonBubblingListenersToAdd.forEach(function(S){return c.push(S)});for(var l=void 0,p=0,y=c.length,d=function(S){S[0];var E=S[1],P=S[2];return S[3],t===E&&qe(P.namespace,r)};!l&&p<y;){var f=c[p];l=d(f)?f:l,p++}var h=l,m;if(h){var A=h[0];m=A}else{var v=new Pn(r,this.isolateModule);s=this.insertListener(i,a,t,n),h=[i,t,v,s],m=i,this.nonBubblingListenersToAdd.add(h),this.setupNonBubblingListener(h)}var _=this,g=null;return $.create({start:function(S){g=m.subscribe(S)},stop:function(){h[0];var S=h[1],E=h[2];h[3];var P=E.call();P.forEach(function(O){var N=O.subs;N&&N[S]&&(N[S].unsubscribe(),delete N[S])}),_.nonBubblingListenersToAdd.delete(h),g.unsubscribe()}})},e.prototype.removeElement=function(t,r){r!==void 0&&this.virtualListeners.delete(r);var n=[];this.nonBubblingListeners.forEach(function(s,a){if(s.has(t)){n.push([a,t]);var u=t.subs;u&&Object.keys(u).forEach(function(c){u[c].unsubscribe()})}});for(var o=0;o<n.length;o++){var i=this.nonBubblingListeners.get(n[o][0]);!i||(i.delete(n[o][1]),i.size===0?this.nonBubblingListeners.delete(n[o][0]):this.nonBubblingListeners.set(n[o][0],i))}},e.prototype.insertListener=function(t,r,n,o){var i=[],s=r._namespace,a=s.length;do i.push(this.getVirtualListeners(n,s,!0,a)),a--;while(a>=0&&s[a].type!=="total");for(var u=ce({},o,{scopeChecker:r,subject:t,bubbles:!!o.bubbles,useCapture:!!o.useCapture,passive:!!o.passive}),c=0;c<i.length;c++)i[c].add(u,s.length);return u},e.prototype.getVirtualListeners=function(t,r,n,o){n===void 0&&(n=!1);var i=o!==void 0?o:r.length;if(!n)for(var s=i-1;s>=0;s--){if(r[s].type==="total"){i=s+1;break}i=s}var a=this.virtualListeners.getDefault(r,function(){return new Map},i);return a.has(t)||a.set(t,new Qa),a.get(t)},e.prototype.setupDOMListener=function(t,r){var n=this;if(this.origin){var o=ue(this.origin,t,!1,!1,r).subscribe({next:function(i){return n.onEvent(t,i,r)},error:function(){},complete:function(){}});this.domListeners.set(t,{sub:o,passive:r})}else this.domListenersToAdd.set(t,r)},e.prototype.setupNonBubblingListener=function(t){t[0];var r=t[1],n=t[2],o=t[3];if(!!this.origin){var i=n.call();if(i.length){var s=this;i.forEach(function(a){var u,c=a.subs;if(!c||!c[r]){var l=ue(a,r,!1,!1,o.passive).subscribe({next:function(y){return s.onEvent(r,y,!!o.passive,!1)},error:function(){},complete:function(){}});s.nonBubblingListeners.has(r)||s.nonBubblingListeners.set(r,new Map);var p=s.nonBubblingListeners.get(r);if(!p)return;p.set(a,{sub:l,destination:o}),a.subs=ce({},c,(u={},u[r]=l,u))}})}}},e.prototype.resetEventListeners=function(){for(var t=this.domListeners.entries(),r=t.next();!r.done;){var n=r.value,o=n[0],i=n[1],s=i.sub,a=i.passive;s.unsubscribe(),this.setupDOMListener(o,a),r=t.next()}},e.prototype.putNonBubblingListener=function(t,r,n,o){var i=this.nonBubblingListeners.get(t);if(!!i){var s=i.get(r);s&&s.destination.passive===o&&s.destination.useCapture===n&&(this.virtualNonBubblingListener[0]=s.destination)}},e.prototype.onEvent=function(t,r,n,o){o===void 0&&(o=!0);var i=this.patchEvent(r),s=this.isolateModule.getRootElement(r.target);if(o){var a=this.isolateModule.getNamespace(r.target);if(!a)return;var u=this.getVirtualListeners(t,a);this.bubble(t,r.target,s,i,u,a,a.length-1,!0,n),this.bubble(t,r.target,s,i,u,a,a.length-1,!1,n)}else this.putNonBubblingListener(t,r.target,!0,n),this.doBubbleStep(t,r.target,s,i,this.virtualNonBubblingListener,!0,n),this.putNonBubblingListener(t,r.target,!1,n),this.doBubbleStep(t,r.target,s,i,this.virtualNonBubblingListener,!1,n),r.stopPropagation()},e.prototype.bubble=function(t,r,n,o,i,s,a,u,c){!u&&!o.propagationHasBeenStopped&&this.doBubbleStep(t,r,n,o,i,u,c);var l=n,p=a;if(r===n)if(a>=0&&s[a].type==="sibling")l=this.isolateModule.getElement(s,a),p--;else return;r.parentNode&&l&&this.bubble(t,r.parentNode,l,o,i,s,p,u,c),u&&!o.propagationHasBeenStopped&&this.doBubbleStep(t,r,n,o,i,u,c)},e.prototype.doBubbleStep=function(t,r,n,o,i,s,a){!n||(this.mutateEventCurrentTarget(o,r),i.forEach(function(u){if(u.passive===a&&u.useCapture===s){var c=On(u.scopeChecker.namespace);!o.propagationHasBeenStopped&&u.scopeChecker.isDirectlyInScope(r)&&(c!==""&&r.matches(c)||c===""&&r===n)&&(An(o,u.preventDefault),u.subject.shamefullySendNext(o))}}))},e.prototype.patchEvent=function(t){var r=t;r.propagationHasBeenStopped=!1;var n=r.stopPropagation;return r.stopPropagation=function(){n.call(this),this.propagationHasBeenStopped=!0},r},e.prototype.mutateEventCurrentTarget=function(t,r){try{Object.defineProperty(t,"currentTarget",{value:r,configurable:!0})}catch{console.log("please use event.ownerTarget")}t.ownerTarget=r},e}();function ru(e){if(!Array.isArray(e))throw new Error("Optional modules option must be an array for snabbdom modules")}function nu(e){if(!e||typeof e.addListener!="function"||typeof e.fold!="function")throw new Error("The DOM driver function expects as input a Stream of virtual DOM elements")}function ou(e){return $.merge(e,$.never())}function iu(e){return e.elm}function su(e){(console.error||console.log)(e)}function au(){return $.create({start:function(e){document.readyState==="loading"?document.addEventListener("readystatechange",function(){var t=document.readyState;(t==="interactive"||t==="complete")&&(e.next(null),e.complete())}):(e.next(null),e.complete())},stop:function(){}})}function uu(e){return e.data=e.data||{},e.data.isolate=[],e}function cu(e,t){t===void 0&&(t={}),Ua(e);var r=t.modules||Xa;ru(r);var n=new Za,o=t&&t.snabbdomOptions||void 0,i=_a([n.createModule()].concat(r),void 0,o),s=au(),a,u,c=$.create({start:function(p){u=new MutationObserver(function(){return p.next(null)})},stop:function(){u.disconnect()}});function l(p,y){y===void 0&&(y="DOM"),nu(p);var d=$.create(),f=s.map(function(){var _=Wa(e)||document.body;return a=new Ya(_),_}),h=p.remember();h.addListener({}),c.addListener({});var m=f.map(function(_){return $.merge(h.endWhen(d),d).map(function(g){return a.call(g)}).startWith(uu(Te(_))).fold(i,Te(_)).drop(1).map(iu).startWith(_).map(function(g){return u.observe(g,{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0}),g}).compose(ou)}).flatten(),v=vn(s,c).endWhen(d).compose(Ja(m)).map(function(_){return _[1]}).remember();v.addListener({error:t.reportSnabbdomError||su});var A=new eu(v,n);return new qa(v,d,[],n,A,y)}return l}function fu(e){return typeof e=="string"&&e.length>0}function lu(e){return fu(e)&&(e[0]==="."||e[0]==="#")}function Tn(e){return function(r,n,o){var i=typeof r!="undefined",s=typeof n!="undefined",a=typeof o!="undefined";return lu(r)?s&&a?rt(e+r,n,o):s?rt(e+r,n):rt(e+r,{}):a?rt(e+r,n,o):s?rt(e,r,n):i?rt(e,r):rt(e,{})}}var pu=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","colorProfile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotlight","feTile","feTurbulence","filter","font","fontFace","fontFaceFormat","fontFaceName","fontFaceSrc","fontFaceUri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missingGlyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],hu=Tn("svg");pu.forEach(function(e){hu[e]=Tn(e)});var du=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","meta","nav","noscript","object","ol","optgroup","option","p","param","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","u","ul","video"];du.forEach(function(e){});function yu(e,t,r){const{combineList:n=["DOM"],globalList:o=["EVENTS"],stateSourceName:i="STATE",domSourceName:s="DOM",container:a="div",containerClass:u}=r;return c=>{const l=Date.now(),p={item:e,itemKey:(d,f)=>typeof d.id!="undefined"?d.id:f,itemScope:d=>d,channel:i,collectSinks:d=>Object.entries(c).reduce((f,[h,m])=>{if(n.includes(h)){const v=d.pickCombine(h);h===s&&a?f[s]=v.map(A=>({sel:a,data:u?{props:{className:u}}:{},children:A,key:l,text:void 0,elm:void 0})):f[h]=v}else f[h]=d.pickMerge(h);return f},{})},y={[i]:t};return o.forEach(d=>y[d]=null),n.forEach(d=>y[d]=null),mu(p,y,c)}}function mu(e,t,r){return st(Fs(e),t)(r)}var V=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},he={},W={},Mn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r){var n,o=r.Symbol;if(typeof o=="function")if(o.observable)n=o.observable;else{n=o.for("https://github.com/benlesh/symbol-observable");try{o.observable=n}catch{}}else n="@@observable";return n}})(Mn);var vu=Mn,Ar=Object.prototype.toString,Fn=function(t){var r=Ar.call(t),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&Ar.call(t.callee)==="[object Function]"),n},Se,Or;function gu(){if(Or)return Se;Or=1;var e;if(!Object.keys){var t=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=Fn,o=Object.prototype.propertyIsEnumerable,i=!o.call({toString:null},"toString"),s=o.call(function(){},"prototype"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],u=function(y){var d=y.constructor;return d&&d.prototype===y},c={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},l=function(){if(typeof window=="undefined")return!1;for(var y in window)try{if(!c["$"+y]&&t.call(window,y)&&window[y]!==null&&typeof window[y]=="object")try{u(window[y])}catch{return!0}}catch{return!0}return!1}(),p=function(y){if(typeof window=="undefined"||!l)return u(y);try{return u(y)}catch{return!1}};e=function(d){var f=d!==null&&typeof d=="object",h=r.call(d)==="[object Function]",m=n(d),v=f&&r.call(d)==="[object String]",A=[];if(!f&&!h&&!m)throw new TypeError("Object.keys called on a non-object");var _=s&&h;if(v&&d.length>0&&!t.call(d,0))for(var g=0;g<d.length;++g)A.push(String(g));if(m&&d.length>0)for(var S=0;S<d.length;++S)A.push(String(S));else for(var E in d)!(_&&E==="prototype")&&t.call(d,E)&&A.push(String(E));if(i)for(var P=p(d),O=0;O<a.length;++O)!(P&&a[O]==="constructor")&&t.call(d,a[O])&&A.push(a[O]);return A}}return Se=e,Se}var _u=Array.prototype.slice,bu=Fn,Er=Object.keys,Qt=Er?function(t){return Er(t)}:gu(),Pr=Object.keys;Qt.shim=function(){if(Object.keys){var t=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);t||(Object.keys=function(n){return bu(n)?Pr(_u.call(n)):Pr(n)})}else Object.keys=Qt;return Object.keys||Qt};var wu=Qt,Su=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var o=42;t[r]=o;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var i=Object.getOwnPropertySymbols(t);if(i.length!==1||i[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(t,r);if(s.value!==o||s.enumerable!==!0)return!1}return!0},Nr=typeof Symbol!="undefined"&&Symbol,$u=Su,Au=function(){return typeof Nr!="function"||typeof Symbol!="function"||typeof Nr("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:$u()},Cr={foo:{}},Ou=Object,Eu=function(){return{__proto__:Cr}.foo===Cr.foo&&!({__proto__:null}instanceof Ou)},Pu="Function.prototype.bind called on incompatible ",$e=Array.prototype.slice,Nu=Object.prototype.toString,Cu="[object Function]",Iu=function(t){var r=this;if(typeof r!="function"||Nu.call(r)!==Cu)throw new TypeError(Pu+r);for(var n=$e.call(arguments,1),o,i=function(){if(this instanceof o){var l=r.apply(this,n.concat($e.call(arguments)));return Object(l)===l?l:this}else return r.apply(t,n.concat($e.call(arguments)))},s=Math.max(0,r.length-n.length),a=[],u=0;u<s;u++)a.push("$"+u);if(o=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var c=function(){};c.prototype=r.prototype,o.prototype=new c,c.prototype=null}return o},xu=Iu,jn=Function.prototype.bind||xu,ku=jn,Du=ku.call(Function.call,Object.prototype.hasOwnProperty),I,Ct=SyntaxError,Ln=Function,Et=TypeError,Ae=function(e){try{return Ln('"use strict"; return ('+e+").constructor;")()}catch{}},yt=Object.getOwnPropertyDescriptor;if(yt)try{yt({},"")}catch{yt=null}var Oe=function(){throw new Et},Tu=yt?function(){try{return arguments.callee,Oe}catch{try{return yt(arguments,"callee").get}catch{return Oe}}}():Oe,bt=Au(),Mu=Eu(),R=Object.getPrototypeOf||(Mu?function(e){return e.__proto__}:null),$t={},Fu=typeof Uint8Array=="undefined"||!R?I:R(Uint8Array),mt={"%AggregateError%":typeof AggregateError=="undefined"?I:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?I:ArrayBuffer,"%ArrayIteratorPrototype%":bt&&R?R([][Symbol.iterator]()):I,"%AsyncFromSyncIteratorPrototype%":I,"%AsyncFunction%":$t,"%AsyncGenerator%":$t,"%AsyncGeneratorFunction%":$t,"%AsyncIteratorPrototype%":$t,"%Atomics%":typeof Atomics=="undefined"?I:Atomics,"%BigInt%":typeof BigInt=="undefined"?I:BigInt,"%BigInt64Array%":typeof BigInt64Array=="undefined"?I:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array=="undefined"?I:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?I:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?I:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?I:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?I:FinalizationRegistry,"%Function%":Ln,"%GeneratorFunction%":$t,"%Int8Array%":typeof Int8Array=="undefined"?I:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?I:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?I:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":bt&&R?R(R([][Symbol.iterator]())):I,"%JSON%":typeof JSON=="object"?JSON:I,"%Map%":typeof Map=="undefined"?I:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!bt||!R?I:R(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?I:Promise,"%Proxy%":typeof Proxy=="undefined"?I:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?I:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?I:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!bt||!R?I:R(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?I:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":bt&&R?R(""[Symbol.iterator]()):I,"%Symbol%":bt?Symbol:I,"%SyntaxError%":Ct,"%ThrowTypeError%":Tu,"%TypedArray%":Fu,"%TypeError%":Et,"%Uint8Array%":typeof Uint8Array=="undefined"?I:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?I:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?I:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?I:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?I:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?I:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?I:WeakSet};if(R)try{null.error}catch(e){var ju=R(R(e));mt["%Error.prototype%"]=ju}var Lu=function e(t){var r;if(t==="%AsyncFunction%")r=Ae("async function () {}");else if(t==="%GeneratorFunction%")r=Ae("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=Ae("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var o=e("%AsyncGenerator%");o&&R&&(r=R(o.prototype))}return mt[t]=r,r},Ir={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Rt=jn,fe=Du,Ru=Rt.call(Function.call,Array.prototype.concat),Bu=Rt.call(Function.apply,Array.prototype.splice),xr=Rt.call(Function.call,String.prototype.replace),le=Rt.call(Function.call,String.prototype.slice),Uu=Rt.call(Function.call,RegExp.prototype.exec),Wu=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Gu=/\\(\\)?/g,zu=function(t){var r=le(t,0,1),n=le(t,-1);if(r==="%"&&n!=="%")throw new Ct("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Ct("invalid intrinsic syntax, expected opening `%`");var o=[];return xr(t,Wu,function(i,s,a,u){o[o.length]=a?xr(u,Gu,"$1"):s||i}),o},qu=function(t,r){var n=t,o;if(fe(Ir,n)&&(o=Ir[n],n="%"+o[0]+"%"),fe(mt,n)){var i=mt[n];if(i===$t&&(i=Lu(n)),typeof i=="undefined"&&!r)throw new Et("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new Ct("intrinsic "+t+" does not exist!")},Hu=function(t,r){if(typeof t!="string"||t.length===0)throw new Et("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Et('"allowMissing" argument must be a boolean');if(Uu(/^%?[^%]*%?$/,t)===null)throw new Ct("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=zu(t),o=n.length>0?n[0]:"",i=qu("%"+o+"%",r),s=i.name,a=i.value,u=!1,c=i.alias;c&&(o=c[0],Bu(n,Ru([0,1],c)));for(var l=1,p=!0;l<n.length;l+=1){var y=n[l],d=le(y,0,1),f=le(y,-1);if((d==='"'||d==="'"||d==="`"||f==='"'||f==="'"||f==="`")&&d!==f)throw new Ct("property names with quotes must have matching quotes");if((y==="constructor"||!p)&&(u=!0),o+="."+y,s="%"+o+"%",fe(mt,s))a=mt[s];else if(a!=null){if(!(y in a)){if(!r)throw new Et("base intrinsic for "+t+" exists, but the property is not available.");return}if(yt&&l+1>=n.length){var h=yt(a,y);p=!!h,p&&"get"in h&&!("originalValue"in h.get)?a=h.get:a=a[y]}else p=fe(a,y),a=a[y];p&&!u&&(mt[s]=a)}}return a},Vu=Hu,Fe=Vu("%Object.defineProperty%",!0),je=function(){if(Fe)try{return Fe({},"a",{value:1}),!0}catch{return!1}return!1};je.hasArrayLengthDefineBug=function(){if(!je())return null;try{return Fe([],"length",{value:1}).length!==1}catch{return!0}};var Ju=je,Ku=wu,Yu=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Xu=Object.prototype.toString,Zu=Array.prototype.concat,Rn=Object.defineProperty,Qu=function(e){return typeof e=="function"&&Xu.call(e)==="[object Function]"},tc=Ju(),Bn=Rn&&tc,ec=function(e,t,r,n){if(t in e){if(n===!0){if(e[t]===r)return}else if(!Qu(n)||!n())return}Bn?Rn(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r},Un=function(e,t){var r=arguments.length>2?arguments[2]:{},n=Ku(t);Yu&&(n=Zu.call(n,Object.getOwnPropertySymbols(t)));for(var o=0;o<n.length;o+=1)ec(e,n[o],t[n[o]],r[n[o]])};Un.supportsDescriptors=!!Bn;var Wn=Un,Gn=V,rc=Gn,zn=function(){return typeof V!="object"||!V||V.Math!==Math||V.Array!==Array?rc:V},nc=Wn,oc=zn,ic=function(){var t=oc();if(nc.supportsDescriptors){var r=Object.getOwnPropertyDescriptor(t,"globalThis");(!r||r.configurable&&(r.enumerable||!r.writable||globalThis!==t))&&Object.defineProperty(t,"globalThis",{configurable:!0,enumerable:!1,value:t,writable:!0})}else(typeof globalThis!="object"||globalThis!==t)&&(t.globalThis=t);return t},sc=Wn,ac=Gn,qn=zn,uc=ic,cc=qn(),Hn=function(){return cc};sc(Hn,{getPolyfill:qn,implementation:ac,shim:uc});var fc=Hn,lc=V&&V.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(W,"__esModule",{value:!0});W.NO_IL=W.NO=W.MemoryStream=W.Stream=void 0;var pc=vu,hc=fc,Ht=pc.default(hc.getPolyfill()),w={};W.NO=w;function U(){}function te(e){for(var t=e.length,r=Array(t),n=0;n<t;++n)r[n]=e[n];return r}function dc(e,t){return function(n){return e(n)&&t(n)}}function He(e,t,r){try{return e.f(t)}catch(n){return r._e(n),w}}var lt={_n:U,_e:U,_c:U};W.NO_IL=lt;function kr(e){e._start=function(r){r.next=r._n,r.error=r._e,r.complete=r._c,this.start(r)},e._stop=e.stop}var yc=function(){function e(t,r){this._stream=t,this._listener=r}return e.prototype.unsubscribe=function(){this._stream._remove(this._listener)},e}(),mc=function(){function e(t){this._listener=t}return e.prototype.next=function(t){this._listener._n(t)},e.prototype.error=function(t){this._listener._e(t)},e.prototype.complete=function(){this._listener._c()},e}(),vc=function(){function e(t){this.type="fromObservable",this.ins=t,this.active=!1}return e.prototype._start=function(t){this.out=t,this.active=!0,this._sub=this.ins.subscribe(new mc(t)),this.active||this._sub.unsubscribe()},e.prototype._stop=function(){this._sub&&this._sub.unsubscribe(),this.active=!1},e}(),gc=function(){function e(t){this.type="merge",this.insArr=t,this.out=w,this.ac=0}return e.prototype._start=function(t){this.out=t;var r=this.insArr,n=r.length;this.ac=n;for(var o=0;o<n;o++)r[o]._add(this)},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=0;n<r;n++)t[n]._remove(this);this.out=w},e.prototype._n=function(t){var r=this.out;r!==w&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==w&&r._e(t)},e.prototype._c=function(){if(--this.ac<=0){var t=this.out;if(t===w)return;t._c()}},e}(),_c=function(){function e(t,r,n){this.i=t,this.out=r,this.p=n,n.ils.push(this)}return e.prototype._n=function(t){var r=this.p,n=this.out;if(n!==w&&r.up(t,this.i)){var o=te(r.vals);n._n(o)}},e.prototype._e=function(t){var r=this.out;r!==w&&r._e(t)},e.prototype._c=function(){var t=this.p;t.out!==w&&--t.Nc===0&&t.out._c()},e}(),bc=function(){function e(t){this.type="combine",this.insArr=t,this.out=w,this.ils=[],this.Nc=this.Nn=0,this.vals=[]}return e.prototype.up=function(t,r){var n=this.vals[r],o=this.Nn?n===w?--this.Nn:this.Nn:0;return this.vals[r]=t,o===0},e.prototype._start=function(t){this.out=t;var r=this.insArr,n=this.Nc=this.Nn=r.length,o=this.vals=new Array(n);if(n===0)t._n([]),t._c();else for(var i=0;i<n;i++)o[i]=w,r[i]._add(new _c(i,t,this))},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=this.ils,o=0;o<r;o++)t[o]._remove(n[o]);this.out=w,this.ils=[],this.vals=[]},e}(),wc=function(){function e(t){this.type="fromArray",this.a=t}return e.prototype._start=function(t){for(var r=this.a,n=0,o=r.length;n<o;n++)t._n(r[n]);t._c()},e.prototype._stop=function(){},e}(),Sc=function(){function e(t){this.type="fromPromise",this.on=!1,this.p=t}return e.prototype._start=function(t){var r=this;this.on=!0,this.p.then(function(n){r.on&&(t._n(n),t._c())},function(n){t._e(n)}).then(U,function(n){setTimeout(function(){throw n})})},e.prototype._stop=function(){this.on=!1},e}(),$c=function(){function e(t){this.type="periodic",this.period=t,this.intervalID=-1,this.i=0}return e.prototype._start=function(t){var r=this;function n(){t._n(r.i++)}this.intervalID=setInterval(n,this.period)},e.prototype._stop=function(){this.intervalID!==-1&&clearInterval(this.intervalID),this.intervalID=-1,this.i=0},e}(),Ac=function(){function e(t,r){this.type="debug",this.ins=t,this.out=w,this.s=U,this.l="",typeof r=="string"?this.l=r:typeof r=="function"&&(this.s=r)}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=w},e.prototype._n=function(t){var r=this.out;if(r!==w){var n=this.s,o=this.l;if(n!==U)try{n(t)}catch(i){r._e(i)}else o?console.log(o+":",t):console.log(t);r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==w&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==w&&t._c()},e}(),Oc=function(){function e(t,r){this.type="drop",this.ins=r,this.out=w,this.max=t,this.dropped=0}return e.prototype._start=function(t){this.out=t,this.dropped=0,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=w},e.prototype._n=function(t){var r=this.out;r!==w&&this.dropped++>=this.max&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==w&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==w&&t._c()},e}(),Ec=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(){this.op.end()},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.end()},e}(),Pc=function(){function e(t,r){this.type="endWhen",this.ins=r,this.out=w,this.o=t,this.oil=lt}return e.prototype._start=function(t){this.out=t,this.o._add(this.oil=new Ec(t,this)),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.o._remove(this.oil),this.out=w,this.oil=lt},e.prototype.end=function(){var t=this.out;t!==w&&t._c()},e.prototype._n=function(t){var r=this.out;r!==w&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==w&&r._e(t)},e.prototype._c=function(){this.end()},e}(),Ee=function(){function e(t,r){this.type="filter",this.ins=r,this.out=w,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=w},e.prototype._n=function(t){var r=this.out;if(r!==w){var n=He(this,t,r);n===w||!n||r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==w&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==w&&t._c()},e}(),Nc=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(t){this.out._n(t)},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.inner=w,this.op.less()},e}(),Cc=function(){function e(t){this.type="flatten",this.ins=t,this.out=w,this.open=!0,this.inner=w,this.il=lt}return e.prototype._start=function(t){this.out=t,this.open=!0,this.inner=w,this.il=lt,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.inner!==w&&this.inner._remove(this.il),this.out=w,this.open=!0,this.inner=w,this.il=lt},e.prototype.less=function(){var t=this.out;t!==w&&!this.open&&this.inner===w&&t._c()},e.prototype._n=function(t){var r=this.out;if(r!==w){var n=this,o=n.inner,i=n.il;o!==w&&i!==lt&&o._remove(i),(this.inner=t)._add(this.il=new Nc(r,this))}},e.prototype._e=function(t){var r=this.out;r!==w&&r._e(t)},e.prototype._c=function(){this.open=!1,this.less()},e}(),Ic=function(){function e(t,r,n){var o=this;this.type="fold",this.ins=n,this.out=w,this.f=function(i){return t(o.acc,i)},this.acc=this.seed=r}return e.prototype._start=function(t){this.out=t,this.acc=this.seed,t._n(this.acc),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=w,this.acc=this.seed},e.prototype._n=function(t){var r=this.out;if(r!==w){var n=He(this,t,r);n!==w&&r._n(this.acc=n)}},e.prototype._e=function(t){var r=this.out;r!==w&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==w&&t._c()},e}(),xc=function(){function e(t){this.type="last",this.ins=t,this.out=w,this.has=!1,this.val=w}return e.prototype._start=function(t){this.out=t,this.has=!1,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=w,this.val=w},e.prototype._n=function(t){this.has=!0,this.val=t},e.prototype._e=function(t){var r=this.out;r!==w&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==w&&(this.has?(t._n(this.val),t._c()):t._e(new Error("last() failed because input stream completed")))},e}(),kc=function(){function e(t,r){this.type="map",this.ins=r,this.out=w,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=w},e.prototype._n=function(t){var r=this.out;if(r!==w){var n=He(this,t,r);n!==w&&r._n(n)}},e.prototype._e=function(t){var r=this.out;r!==w&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==w&&t._c()},e}(),Dc=function(){function e(t){this.type="remember",this.ins=t,this.out=w}return e.prototype._start=function(t){this.out=t,this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=w},e}(),Tc=function(){function e(t,r){this.type="replaceError",this.ins=r,this.out=w,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=w},e.prototype._n=function(t){var r=this.out;r!==w&&r._n(t)},e.prototype._e=function(t){var r=this.out;if(r!==w)try{this.ins._remove(this),(this.ins=this.f(t))._add(this)}catch(n){r._e(n)}},e.prototype._c=function(){var t=this.out;t!==w&&t._c()},e}(),Mc=function(){function e(t,r){this.type="startWith",this.ins=t,this.out=w,this.val=r}return e.prototype._start=function(t){this.out=t,this.out._n(this.val),this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=w},e}(),Fc=function(){function e(t,r){this.type="take",this.ins=r,this.out=w,this.max=t,this.taken=0}return e.prototype._start=function(t){this.out=t,this.taken=0,this.max<=0?t._c():this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=w},e.prototype._n=function(t){var r=this.out;if(r!==w){var n=++this.taken;n<this.max?r._n(t):n===this.max&&(r._n(t),r._c())}},e.prototype._e=function(t){var r=this.out;r!==w&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==w&&t._c()},e}(),Ve=function(){function e(t){this._prod=t||w,this._ils=[],this._stopID=w,this._dl=w,this._d=!1,this._target=null,this._err=w}return e.prototype._n=function(t){var r=this._ils,n=r.length;if(this._d&&this._dl._n(t),n==1)r[0]._n(t);else{if(n==0)return;for(var o=te(r),i=0;i<n;i++)o[i]._n(t)}},e.prototype._e=function(t){if(this._err===w){this._err=t;var r=this._ils,n=r.length;if(this._x(),this._d&&this._dl._e(t),n==1)r[0]._e(t);else{if(n==0)return;for(var o=te(r),i=0;i<n;i++)o[i]._e(t)}if(!this._d&&n==0)throw this._err}},e.prototype._c=function(){var t=this._ils,r=t.length;if(this._x(),this._d&&this._dl._c(),r==1)t[0]._c();else{if(r==0)return;for(var n=te(t),o=0;o<r;o++)n[o]._c()}},e.prototype._x=function(){this._ils.length!==0&&(this._prod!==w&&this._prod._stop(),this._err=w,this._ils=[])},e.prototype._stopNow=function(){this._prod._stop(),this._err=w,this._stopID=w},e.prototype._add=function(t){var r=this._target;if(r)return r._add(t);var n=this._ils;if(n.push(t),!(n.length>1))if(this._stopID!==w)clearTimeout(this._stopID),this._stopID=w;else{var o=this._prod;o!==w&&o._start(this)}},e.prototype._remove=function(t){var r=this,n=this._target;if(n)return n._remove(t);var o=this._ils,i=o.indexOf(t);i>-1&&(o.splice(i,1),this._prod!==w&&o.length<=0?(this._err=w,this._stopID=setTimeout(function(){return r._stopNow()})):o.length===1&&this._pruneCycles())},e.prototype._pruneCycles=function(){this._hasNoSinks(this,[])&&this._remove(this._ils[0])},e.prototype._hasNoSinks=function(t,r){if(r.indexOf(t)!==-1)return!0;if(t.out===this)return!0;if(t.out&&t.out!==w)return this._hasNoSinks(t.out,r.concat(t));if(t._ils){for(var n=0,o=t._ils.length;n<o;n++)if(!this._hasNoSinks(t._ils[n],r.concat(t)))return!1;return!0}else return!1},e.prototype.ctor=function(){return this instanceof ot?ot:e},e.prototype.addListener=function(t){t._n=t.next||U,t._e=t.error||U,t._c=t.complete||U,this._add(t)},e.prototype.removeListener=function(t){this._remove(t)},e.prototype.subscribe=function(t){return this.addListener(t),new yc(this,t)},e.prototype[Ht]=function(){return this},e.create=function(t){if(t){if(typeof t.start!="function"||typeof t.stop!="function")throw new Error("producer requires both start and stop functions");kr(t)}return new e(t)},e.createWithMemory=function(t){return t&&kr(t),new ot(t)},e.never=function(){return new e({_start:U,_stop:U})},e.empty=function(){return new e({_start:function(t){t._c()},_stop:U})},e.throw=function(t){return new e({_start:function(r){r._e(t)},_stop:U})},e.from=function(t){if(typeof t[Ht]=="function")return e.fromObservable(t);if(typeof t.then=="function")return e.fromPromise(t);if(Array.isArray(t))return e.fromArray(t);throw new TypeError("Type of input to from() must be an Array, Promise, or Observable")},e.of=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.fromArray(t)},e.fromArray=function(t){return new e(new wc(t))},e.fromPromise=function(t){return new e(new Sc(t))},e.fromObservable=function(t){if(t.endWhen!==void 0)return t;var r=typeof t[Ht]=="function"?t[Ht]():t;return new e(new vc(r))},e.periodic=function(t){return new e(new $c(t))},e.prototype._map=function(t){return new(this.ctor())(new kc(t,this))},e.prototype.map=function(t){return this._map(t)},e.prototype.mapTo=function(t){var r=this.map(function(){return t}),n=r._prod;return n.type="mapTo",r},e.prototype.filter=function(t){var r=this._prod;return r instanceof Ee?new e(new Ee(dc(r.f,t),r.ins)):new e(new Ee(t,this))},e.prototype.take=function(t){return new(this.ctor())(new Fc(t,this))},e.prototype.drop=function(t){return new e(new Oc(t,this))},e.prototype.last=function(){return new e(new xc(this))},e.prototype.startWith=function(t){return new ot(new Mc(this,t))},e.prototype.endWhen=function(t){return new(this.ctor())(new Pc(t,this))},e.prototype.fold=function(t,r){return new ot(new Ic(t,r,this))},e.prototype.replaceError=function(t){return new(this.ctor())(new Tc(t,this))},e.prototype.flatten=function(){return new e(new Cc(this))},e.prototype.compose=function(t){return t(this)},e.prototype.remember=function(){return new ot(new Dc(this))},e.prototype.debug=function(t){return new(this.ctor())(new Ac(this,t))},e.prototype.imitate=function(t){if(t instanceof ot)throw new Error("A MemoryStream was given to imitate(), but it only supports a Stream. Read more about this restriction here: https://github.com/staltz/xstream#faq");this._target=t;for(var r=this._ils,n=r.length,o=0;o<n;o++)t._add(r[o]);this._ils=[]},e.prototype.shamefullySendNext=function(t){this._n(t)},e.prototype.shamefullySendError=function(t){this._e(t)},e.prototype.shamefullySendComplete=function(){this._c()},e.prototype.setDebugListener=function(t){t?(this._d=!0,t._n=t.next||U,t._e=t.error||U,t._c=t.complete||U,this._dl=t):(this._d=!1,this._dl=w)},e.merge=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new gc(r))},e.combine=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new bc(r))},e}();W.Stream=Ve;var ot=function(e){lc(t,e);function t(r){var n=e.call(this,r)||this;return n._has=!1,n}return t.prototype._n=function(r){this._v=r,this._has=!0,e.prototype._n.call(this,r)},t.prototype._add=function(r){var n=this._target;if(n)return n._add(r);var o=this._ils;if(o.push(r),o.length>1){this._has&&r._n(this._v);return}if(this._stopID!==w)this._has&&r._n(this._v),clearTimeout(this._stopID),this._stopID=w;else if(this._has)r._n(this._v);else{var i=this._prod;i!==w&&i._start(this)}},t.prototype._stopNow=function(){this._has=!1,e.prototype._stopNow.call(this)},t.prototype._x=function(){this._has=!1,e.prototype._x.call(this)},t.prototype.map=function(r){return this._map(r)},t.prototype.mapTo=function(r){return e.prototype.mapTo.call(this,r)},t.prototype.take=function(r){return e.prototype.take.call(this,r)},t.prototype.endWhen=function(r){return e.prototype.endWhen.call(this,r)},t.prototype.replaceError=function(r){return e.prototype.replaceError.call(this,r)},t.prototype.remember=function(){return this},t.prototype.debug=function(r){return e.prototype.debug.call(this,r)},t}(Ve);W.MemoryStream=ot;var jc=Ve;W.default=jc;Object.defineProperty(he,"__esModule",{value:!0});he.DropRepeatsOperator=void 0;var Lc=W,Pe={},Vn=function(){function e(t,r){this.ins=t,this.type="dropRepeats",this.out=null,this.v=Pe,this.isEq=r||function(n,o){return n===o}}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.v=Pe},e.prototype._n=function(t){var r=this.out;if(!!r){var n=this.v;n!==Pe&&this.isEq(t,n)||(this.v=t,r._n(t))}},e.prototype._e=function(t){var r=this.out;!r||r._e(t)},e.prototype._c=function(){var t=this.out;!t||t._c()},e}();he.DropRepeatsOperator=Vn;function Rc(e){return e===void 0&&(e=void 0),function(r){return new Lc.Stream(new Vn(r,e))}}var K=he.default=Rc;function Bc(e,t,r,n={}){const{switched:o=["DOM"],stateSourceName:i="STATE"}=n,s=typeof t;if(!t)throw new Error("Missing 'name$' parameter for switchable()");if(!(s==="string"||s==="function"||t instanceof Z))throw new Error("Invalid 'name$' parameter for switchable(): expects Stream, String, or Function");if(t instanceof Z){const a=t.compose(K()).startWith(r).remember();return u=>Dr(e,u,a,o)}else{const a=s==="function"&&t||(u=>u[t]);return u=>{const c=u&&(typeof i=="string"&&u[i]||u.STATE||u.state).stream;if(!c instanceof Z)throw new Error(`Could not find the state source: ${i}`);const l=c.map(a).filter(p=>typeof p=="string").compose(K()).startWith(r).remember();return Dr(e,u,l,o,i)}}}function Dr(e,t,r,n=["DOM"],o="STATE"){typeof n=="string"&&(n=[n]);const i=Object.entries(e).map(([a,u])=>{if(t[o]){const c=t[o].stream,l=$.combine(r,c).filter(([y,d])=>y==a).map(([y,d])=>d).remember(),p=new t[o].constructor(l,t[o]._name);return[a,u(F(x({},t),{state:p}))]}return[a,u(t)]});return Object.keys(t).reduce((a,u)=>{if(n.includes(u))a[u]=r.map(c=>{const l=i.find(([p,y])=>p===c);return l&&l[1][u]||$.never()}).flatten().remember().startWith(void 0);else{const c=i.filter(([l,p])=>p[u]!==void 0).map(([l,p])=>p[u]);a[u]=$.merge(...c)}return a},{})}var Jn={};Object.defineProperty(Jn,"__esModule",{value:!0});var Uc=W,Wc=function(){function e(t,r){this.dt=t,this.ins=r,this.type="delay",this.out=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null},e.prototype._n=function(t){var r=this.out;if(!!r)var n=setInterval(function(){r._n(t),clearInterval(n)},this.dt)},e.prototype._e=function(t){var r=this.out;if(!!r)var n=setInterval(function(){r._e(t),clearInterval(n)},this.dt)},e.prototype._c=function(){var t=this.out;if(!!t)var r=setInterval(function(){t._c(),clearInterval(r)},this.dt)},e}();function Gc(e){return function(r){return new Uc.Stream(new Wc(e,r))}}var Ne=Jn.default=Gc,Kn={};Object.defineProperty(Kn,"__esModule",{value:!0});var zc=W,qc=function(){function e(t){this.streams=t,this.type="concat",this.out=null,this.i=0}return e.prototype._start=function(t){this.out=t,this.streams[this.i]._add(this)},e.prototype._stop=function(){var t=this.streams;this.i<t.length&&t[this.i]._remove(this),this.i=0,this.out=null},e.prototype._n=function(t){var r=this.out;!r||r._n(t)},e.prototype._e=function(t){var r=this.out;!r||r._e(t)},e.prototype._c=function(){var t=this.out;if(!!t){var r=this.streams;r[this.i]._remove(this),++this.i<r.length?r[this.i]._add(this):t._c()}},e}();function Hc(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new zc.Stream(new qc(e))}var Ce=Kn.default=Hc,Yn={};Object.defineProperty(Yn,"__esModule",{value:!0});var Mt=W,Vc=function(){function e(t,r){this.dt=t,this.ins=r,this.type="debounce",this.out=null,this.id=null,this.t=Mt.NO}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.clearInterval()},e.prototype.clearInterval=function(){var t=this.id;t!==null&&clearInterval(t),this.id=null},e.prototype._n=function(t){var r=this,n=this.out;!n||(this.clearInterval(),this.t=t,this.id=setInterval(function(){r.clearInterval(),n._n(t),r.t=Mt.NO},this.dt))},e.prototype._e=function(t){var r=this.out;!r||(this.clearInterval(),r._e(t))},e.prototype._c=function(){var t=this.out;!t||(this.clearInterval(),this.t!=Mt.NO&&t._n(this.t),this.t=Mt.NO,t._c())},e}();function Jc(e){return function(r){return new Mt.Stream(new Vc(e,r))}}var Vt=Yn.default=Jc;const Tr=typeof window!="undefined"&&window||process&&process.env||{},Mr="BOOTSTRAP",wt="INITIALIZE",Kc="HYDRATE",kt="PARENT",Yc="CHILD";let Xc=0;const At="~#~#~ABORT~#~#~";function ee(e){const{name:t,sources:r,isolateOpts:n,stateSourceName:o="STATE"}=e;if(r&&!k(r))throw new Error("Sources must be a Cycle.js sources object:",t);let i;typeof n=="string"?i={[o]:n}:n===!0?i={}:i=n;const s=typeof r=="undefined";let a;if(k(i)){const u=c=>{const l=F(x({},e),{sources:c});return new Ie(l).sinks};a=s?st(u,i):st(u,i)(r)}else a=s?u=>new Ie(F(x({},e),{sources:u})).sinks:new Ie(e).sinks;return a.componentName=t,a.isSygnalComponent=!0,a}class Ie{constructor({name:t="NO NAME",sources:r,intent:n,model:o,context:i,response:s,view:a,peers:u={},components:c={},initialState:l,calculated:p,storeCalculatedInState:y=!0,DOMSourceName:d="DOM",stateSourceName:f="STATE",requestSourceName:h="HTTP",debug:m=!1}){if(!r||!k(r))throw new Error("Missing or invalid sources");this.name=t,this.sources=r,this.intent=n,this.model=o,this.context=i,this.response=s,this.view=a,this.peers=u,this.components=c,this.initialState=l,this.calculated=p,this.storeCalculatedInState=y,this.DOMSourceName=d,this.stateSourceName=f,this.requestSourceName=h,this.sourceNames=Object.keys(r),this._debug=m,this.isSubComponent=this.sourceNames.includes("props$");const v=r[f]&&r[f].stream;v&&(this.currentState=l||{},this.sources[f]=new Dt(v.map(S=>(this.currentState=S,S))));const A=r.props$;A&&(this.sources.props$=A.map(S=>(this.currentProps=S,S)));const _=r.children$;_&&(this.sources.children$=_.map(S=>(this.currentChildren=S,S))),!this.isSubComponent&&typeof this.intent=="undefined"&&typeof this.model=="undefined"&&(this.initialState=l||!0,this.intent=S=>({__NOOP_ACTION__:$.never()}),this.model={__NOOP_ACTION__:S=>S});const g=Xc++;this.addCalculated=this.createMemoizedAddCalculated(),this.log=Zc(`${g} | ${t}`),this.initChildSources$(),this.initIntent$(),this.initAction$(),this.initState(),this.initContext(),this.initModel$(),this.initPeers$(),this.initSubComponentSink$(),this.initSubComponentsRendered$(),this.initVdom$(),this.initSinks(),this.sinks.__index=g,this.log("Instantiated",!0)}get debug(){return this._debug||Tr.SYGNAL_DEBUG==="true"||Tr.SYGNAL_DEBUG===!0}initIntent$(){if(!!this.intent){if(typeof this.intent!="function")throw new Error("Intent must be a function");if(this.intent$=this.intent(this.sources),!(this.intent$ instanceof Z)&&!k(this.intent$))throw new Error("Intent must return either an action$ stream or map of event streams")}}initAction$(){const t=this.sources&&this.sources[this.requestSourceName]||null;if(!this.intent$){this.action$=$.never();return}let r;if(this.intent$ instanceof Z)r=this.intent$;else{const u=Object.entries(this.intent$).map(([c,l])=>l.map(p=>({type:c,data:p})));r=$.merge($.never(),...u)}const n=r instanceof Z?r:r.apply&&r(this.sources)||$.never(),o=$.of({type:Mr}).compose(Ne(10)),i=this.model[Mr]?Ce(o,n):Ce($.of({}).compose(Ne(1)),n);let s;t&&typeof t.select=="function"?s=t.select("initial").flatten():s=$.never();const a=s.map(u=>({type:Kc,data:u}));this.action$=$.merge(i,a).compose(this.log(({type:u})=>`<${u}> Action triggered`))}initState(){this.model!=null&&(this.model[wt]===void 0?this.model[wt]={[this.stateSourceName]:(t,r)=>x({},this.addCalculated(r))}:Object.keys(this.model[wt]).forEach(t=>{t!==this.stateSourceName&&(console.warn(`${wt} can only be used with the ${this.stateSourceName} source... disregarding ${t}`),delete this.model[wt][t])}))}initContext(){var n;if(!this.context&&!this.sources.__parentContext$){this.context$=$.of({});return}const t=((n=this.sources[this.stateSourceName])==null?void 0:n.stream.startWith({}).compose(K(Y)))||$.never(),r=this.sources.__parentContext$.startWith({}).compose(K(Y))||$.of({});this.context&&!k(this.context)&&console.error(`[${this.name}] Context must be an object mapping names to values of functions: ignoring provided ${typeof this.context}`),this.context$=$.combine(t,r).map(([o,i])=>{const s=k(i)?i:{},a=k(this.context)?this.context:{},u=this.currentState,c=Object.entries(a).reduce((p,y)=>{const[d,f]=y;let h;const m=typeof f;if(m==="string")h=u[f];else if(m==="boolean")h=u[d];else if(m==="function")h=f(u);else return console.error(`[${this.name}] Invalid context entry '${d}': must be the name of a state property or a function returning a value to use`),p;return p[d]=h,p},{}),l=x(x({},s),c);return this.currentContext=l,l}).compose(K(Y)).startWith({}),this.context$.subscribe({next:o=>o})}initModel$(){if(typeof this.model=="undefined"){this.model$=this.sourceNames.reduce((u,c)=>(u[c]=$.never(),u),{});return}const t={type:wt,data:this.initialState};this.isSubComponent&&this.initialState&&console.warn(`[${this.name}] Initial state provided to sub-component. This will overwrite any state provided by the parent component.`);const r=this.initialState?Ce($.of(t),this.action$).compose(Ne(0)):this.action$,n=()=>this.makeOnAction(r,!0,this.action$),o=()=>this.makeOnAction(this.action$,!1,this.action$),i=Object.entries(this.model),s={};i.forEach(u=>{let[c,l]=u;if(typeof l=="function"&&(l={[this.stateSourceName]:l}),!k(l))throw new Error(`Entry for each action must be an object: ${this.name} ${c}`);Object.entries(l).forEach(y=>{const[d,f]=y,h=d===this.stateSourceName,m=d===kt,v=h?n():o(),_=(m?v(c,f).map(g=>({name:this.name,value:g})):v(c,f)).compose(this.log(g=>{if(h)return`<${c}> State reducer added`;if(m)return`<${c}> Data sent to parent component: ${JSON.stringify(g.value).replaceAll('"',"")}`;{const S=g&&(g.type||g.command||g.name||g.key||Array.isArray(g)&&"Array"||g);return`<${c}> Data sent to [${d}]: ${JSON.stringify(S).replaceAll('"',"")}`}}));Array.isArray(s[d])?s[d].push(_):s[d]=[_]})});const a=Object.entries(s).reduce((u,c)=>{const[l,p]=c;return u[l]=$.merge($.never(),...p),u},{});this.model$=a}initPeers$(){const t=this.sourceNames.reduce((r,n)=>(n==this.DOMSourceName?r[n]={}:r[n]=[],r),{});this.peers$=Object.entries(this.peers).reduce((r,[n,o])=>{const i=o(this.sources);return this.sourceNames.forEach(s=>{s==this.DOMSourceName?r[s][n]=i[s]:r[s].push(i[s])}),r},t)}initChildSources$(){let t;const r=$.create({start:n=>{t=n.next.bind(n)},stop:n=>{}}).map(n=>$.merge(...n)).flatten();this.sources[Yc]={select:n=>{const o=r;return(n?o.filter(a=>a.name===n):o).map(a=>a.value)}},this.newChildSources=n=>{typeof t=="function"&&t(n)}}initSubComponentSink$(){const t=$.create({start:r=>{this.newSubComponentSinks=r.next.bind(r)},stop:r=>{}});t.subscribe({next:r=>r}),this.subComponentSink$=t.filter(r=>Object.keys(r).length>0)}initSubComponentsRendered$(){const t=$.create({start:r=>{this.triggerSubComponentsRendered=r.next.bind(r)},stop:r=>{}});this.subComponentsRendered$=t.startWith(null)}initVdom$(){if(typeof this.view!="function"){this.vdom$=$.of(null);return}const t=this.collectRenderParameters();this.vdom$=t.map(this.view).compose(this.log("View rendered")).map(r=>r||{sel:"div",data:{},children:[]}).compose(this.instantiateSubComponents.bind(this)).filter(r=>r!==void 0).compose(this.renderVdom.bind(this))}initSinks(){this.sinks=this.sourceNames.reduce((t,r)=>{if(r==this.DOMSourceName)return t;const n=this.subComponentSink$&&r!==kt?this.subComponentSink$.map(o=>o[r]).filter(o=>!!o).flatten():$.never();return r===this.stateSourceName?t[r]=$.merge(this.model$[r]||$.never(),n,this.sources[this.stateSourceName].stream.filter(o=>!1),...this.peers$[r]||[]):t[r]=$.merge(this.model$[r]||$.never(),n,...this.peers$[r]||[]),t},{}),this.sinks[this.DOMSourceName]=this.vdom$,this.sinks[kt]=this.model$[kt]||$.never()}makeOnAction(t,r=!0,n){return n=n||t,(o,i)=>{const s=t.filter(({type:u})=>u==o);let a;if(typeof i=="function")a=s.map(u=>{const c=(y,d,f=10)=>{if(typeof f!="number")throw new Error(`[${this.name} ] Invalid delay value provided to next() function in model action '${o}'. Must be a number in ms.`);setTimeout(()=>{n.shamefullySendNext({type:y,data:d})},f),this.log(`<${o}> Triggered a next() action: <${y}> ${f}ms delay`,!0)},l={props:this.currentProps,children:this.currentChildren,context:this.currentContext};let p=u.data;if(r)return y=>{const d=this.isSubComponent?this.currentState:y,f=this.addCalculated(d),h=i(f,p,c,l);return h==At?d:this.cleanupCalculated(h)};{const y=this.addCalculated(this.currentState),d=i(y,p,c,l),f=typeof d;if(k(d)||["string","number","boolean","function"].includes(f))return d;if(f=="undefined")return console.warn(`'undefined' value sent to ${o}`),d;throw new Error(`Invalid reducer type for ${o} ${f}`)}}).filter(u=>u!=At);else if(i===void 0||i===!0)a=s.map(({data:u})=>u);else{const u=i;a=s.mapTo(u)}return a}}createMemoizedAddCalculated(){let t,r;return function(n){if(!this.calculated||!k(n)||Array.isArray(n))return n;if(n===t)return r;if(!k(this.calculated))throw new Error("'calculated' parameter must be an object mapping calculated state field named to functions");const o=this.getCalculatedValues(n);if(!o)return t=n,r=n,n;const i=x(x({},n),o);return t=n,r=i,i}}getCalculatedValues(t){const r=Object.entries(this.calculated||{});if(r.length!==0)return r.reduce((n,[o,i])=>{if(typeof i!="function")throw new Error(`Missing or invalid calculator function for calculated field '${o}`);try{n[o]=i(t)}catch(s){console.warn(`Calculated field '${o}' threw an error during calculation: ${s.message}`)}return n},{})}cleanupCalculated(t){if(!t||!k(t)||Array.isArray(t))return t;const r=this.storeCalculatedInState?this.addCalculated(t):t,n=x({},r);return!this.calculated||this.storeCalculatedInState||Object.keys(this.calculated).forEach(i=>{this.initialState&&typeof this.initialState[i]!="undefined"?n[i]=this.initialState[i]:delete n[i]}),n}collectRenderParameters(){const t=this.sources[this.stateSourceName],r=x({},this.peers$[this.DOMSourceName]),n=t&&t.isolateSource(t,{get:u=>this.addCalculated(u)}),o=n&&n.stream||$.never();r.state=o.compose(K(Y)),this.sources.props$&&(r.props=this.sources.props$.compose(K(Qc))),this.sources.children$&&(r.children=this.sources.children$.compose(K(Y))),this.context$&&(r.context=this.context$.compose(K(Y)));const i=[],s=[];return Object.entries(r).forEach(([u,c])=>{i.push(u),s.push(c)}),$.combine(...s).compose(Vt(1)).map(u=>i.reduce((l,p,y)=>(l[p]=u[y],p==="state"&&(l[this.stateSourceName]=u[y],l.calculated=u[y]&&this.getCalculatedValues(u[y])||{}),l),{}))}instantiateSubComponents(t){return t.fold((r,n)=>{const o=Object.keys(this.components),i=Xn(n,o),s=Object.entries(i),a={"::ROOT::":n};if(s.length===0)return a;const u={},c=[];let l=0;const p=s.reduce((d,[f,h])=>{const m=h.data,v=m.props||{},A=h.children||[],_=m.isCollection||!1,g=m.isSwitchable||!1,S=D=>{Object.entries(D).forEach(([T,j])=>{u[T]||(u[T]=[]),T===kt?c.push(j):T!==this.DOMSourceName&&u[T].push(j)})};if(r[f]){const D=r[f];return d[f]=D,D.props$.shamefullySendNext(v),D.children$.shamefullySendNext(A),S(D.sink$),d}const E=$.create().startWith(v),P=$.create().startWith(A);let O;_?O=this.instantiateCollection.bind(this):g?O=this.instantiateSwitchable.bind(this):O=this.instantiateCustomComponent.bind(this),l++;const N=O(h,E,P);return N[this.DOMSourceName]=N[this.DOMSourceName]?this.makeCoordinatedSubComponentDomSink(N[this.DOMSourceName]):$.never(),d[f]={sink$:N,props$:E,children$:P},S(N),d},a),y=Object.entries(u).reduce((d,[f,h])=>(h.length===0||(d[f]=h.length===1?h[0]:$.merge(...h)),d),{});return this.newSubComponentSinks(y),this.newChildSources(c),l>0&&this.log(`New sub components instantiated: ${l}`,!0),p},{})}makeCoordinatedSubComponentDomSink(t){const r=t.remember();return this.sources[this.stateSourceName].stream.compose(K(Y)).map(o=>r).flatten().debug(o=>this.triggerSubComponentsRendered()).remember()}instantiateCollection(t,r,n){const i=t.data.props||{};let s=typeof i.filter=="function"?i.filter:void 0,a=jr(i.sort);const u={filter:s,sort:a},c=$.combine(this.sources[this.stateSourceName].stream.startWith(this.currentState),r.startWith(i)).compose(Vt(1)).map(([_,g])=>(g.filter!==u.filter&&(u.filter=typeof g.filter=="function"?g.filter:void 0),g.sort!==u.sort&&(u.sort=jr(g.sort)),k(_)?this.addCalculated(_):_)),l=new Dt(c),p=i.from,y=i.of,d=i.idfield||"id";let f,h;if(typeof y=="function")if(y.isSygnalComponent)h=y;else{const _=y.componentName||y.label||y.name||"FUNCTION_COMPONENT",g=y,{model:S,intent:E,context:P,peers:O,components:N,initialState:D,calculated:T,storeCalculatedInState:j,DOMSourceName:G,stateSourceName:tt,debug:vt}=y;h=ee({name:_,view:g,model:S,intent:E,context:P,peers:O,components:N,initialState:D,calculated:T,storeCalculatedInState:j,DOMSourceName:G,stateSourceName:tt,debug:vt})}else if(this.components[y])h=this.components[y];else throw new Error(`[${this.name}] Invalid 'of' propery in collection: ${y}`);const m={get:_=>{if(!Array.isArray(_[p]))return[];const g=_[p],S=typeof u.filter=="function"?g.filter(u.filter):g;return(u.sort,S.sort(u.sort)).map((O,N)=>k(O)?F(x({},O),{[d]:O[d]||N}):{value:O,[d]:N})},set:(_,g)=>{if(this.calculated&&p in this.calculated)return console.warn(`Collection sub-component of ${this.name} attempted to update state on a calculated field '${p}': Update ignored`),_;const S=[];for(const E of _[p].map((P,O)=>k(P)?F(x({},P),{[d]:P[d]||O}):{__primitive:!0,value:P,[d]:O}))if(typeof u.filter=="function"&&!u.filter(E))S.push(E.__primitive?E.value:E);else{const P=g.find(O=>O[d]===E[d]);typeof P!="undefined"&&S.push(E.__primitive?P.value:P)}return F(x({},_),{[p]:S})}};p===void 0?f={get:_=>!(_ instanceof Array)&&_.value&&_.value instanceof Array?_.value:_,set:(_,g)=>g}:typeof p=="string"?k(this.currentState)?!(this.currentState&&p in this.currentState)&&!(this.calculated&&p in this.calculated)?(console.error(`Collection component in ${this.name} is attempting to use non-existent state property '${p}': To fix this error, specify a valid array property on the state.  Attempting to use parent component state.`),f=void 0):(Array.isArray(this.currentState[p])||console.warn(`State property '${p}' in collection comopnent of ${this.name} is not an array: No components will be instantiated in the collection.`),f=m):(Array.isArray(this.currentState[p])||console.warn(`State property '${p}' in collection component of ${this.name} is not an array: No components will be instantiated in the collection.`),f=m):k(p)?typeof p.get!="function"?(console.error(`Collection component in ${this.name} has an invalid 'from' field: Expecting 'undefined', a string indicating an array property in the state, or an object with 'get' and 'set' functions for retrieving and setting child state from the current state. Attempting to use parent component state.`),f=void 0):f={get:_=>{const g=p.get(_);return Array.isArray(g)?g:(console.warn(`State getter function in collection component of ${this.name} did not return an array: No components will be instantiated in the collection. Returned value:`,g),[])},set:p.set}:(console.error(`Collection component in ${this.name} has an invalid 'from' field: Expecting 'undefined', a string indicating an array property in the state, or an object with 'get' and 'set' functions for retrieving and setting child state from the current state. Attempting to use parent component state.`),f=void 0);const v=F(x({},this.sources),{[this.stateSourceName]:l,props$:r,children$:n,__parentContext$:this.context$,PARENT:null}),A=yu(h,f,{container:null})(v);if(!k(A))throw new Error("Invalid sinks returned from component factory of collection element");return A}instantiateSwitchable(t,r,n){const i=t.data.props||{},s=this.sources[this.stateSourceName].stream.startWith(this.currentState).map(m=>k(m)?this.addCalculated(m):m),a=new Dt(s),u=i.state;let c;const l={get:m=>m[u],set:(m,v)=>this.calculated&&u in this.calculated?(console.warn(`Switchable sub-component of ${this.name} attempted to update state on a calculated field '${u}': Update ignored`),m):!k(v)||Array.isArray(v)?F(x({},m),{[u]:v}):F(x({},m),{[u]:v})},p={get:m=>m,set:(m,v)=>v};typeof u=="undefined"?c=p:typeof u=="string"?c=l:k(u)?typeof u.get!="function"?(console.error(`Switchable component in ${this.name} has an invalid 'state' field: Expecting 'undefined', a string indicating an array property in the state, or an object with 'get' and 'set' functions for retrieving and setting sub-component state from the current state. Attempting to use parent component state.`),c=p):c={get:u.get,set:u.set}:(console.error(`Invalid state provided to switchable sub-component of ${this.name}: Expecting string, object, or undefined, but found ${typeof u}. Attempting to use parent component state.`),c=p);const y=i.of;Object.keys(y).forEach(m=>{const v=y[m];if(!v.isSygnalComponent){const A=v.componentName||v.label||v.name||"FUNCTION_COMPONENT",_=v,{model:g,intent:S,context:E,peers:P,components:O,initialState:N,calculated:D,storeCalculatedInState:T,DOMSourceName:j,stateSourceName:G,debug:tt}=v,vt={name:A,view:_,model:g,intent:S,context:E,peers:P,components:O,initialState:N,calculated:D,storeCalculatedInState:T,DOMSourceName:j,stateSourceName:G,debug:tt};y[m]=ee(vt)}});const f=F(x({},this.sources),{[this.stateSourceName]:a,props$:r,children$:n,__parentContext$:this.context$}),h=st(Bc(y,r.map(m=>m.current)),{[this.stateSourceName]:c})(f);if(!k(h))throw new Error("Invalid sinks returned from component factory of switchable element");return h}instantiateCustomComponent(t,r,n){const o=t.sel,s=t.data.props||{},a=this.sources[this.stateSourceName].stream.startWith(this.currentState).map(m=>k(m)?this.addCalculated(m):m),u=new Dt(a),c=s.state;typeof s.sygnalFactory!="function"&&k(s.sygnalOptions)&&(s.sygnalFactory=ee(s.sygnalOptions));const l=o==="sygnal-factory"?s.sygnalFactory:this.components[o]||s.sygnalFactory;if(!l)throw o==="sygnal-factory"?new Error("Component not found on element with Capitalized selector and nameless function: JSX transpilation replaces selectors starting with upper case letters with functions in-scope with the same name, Sygnal cannot see the name of the resulting component."):new Error(`Component not found: ${o}`);let p;const y={get:m=>m[c],set:(m,v)=>this.calculated&&c in this.calculated?(console.warn(`Sub-component of ${this.name} attempted to update state on a calculated field '${c}': Update ignored`),m):F(x({},m),{[c]:v})},d={get:m=>m,set:(m,v)=>v};typeof c=="undefined"?p=d:typeof c=="string"?p=y:k(c)?typeof c.get!="function"?(console.error(`Sub-component in ${this.name} has an invalid 'state' field: Expecting 'undefined', a string indicating an array property in the state, or an object with 'get' and 'set' functions for retrieving and setting sub-component state from the current state. Attempting to use parent component state.`),p=d):p={get:c.get,set:c.set}:(console.error(`Invalid state provided to sub-component of ${this.name}: Expecting string, object, or undefined, but found ${typeof c}. Attempting to use parent component state.`),p=d);const f=F(x({},this.sources),{[this.stateSourceName]:u,props$:r,children$:n,__parentContext$:this.context$}),h=st(l,{[this.stateSourceName]:p})(f);if(!k(h)){const m=o==="sygnal-factory"?"custom element":o;throw new Error("Invalid sinks returned from component factory:",m)}return h}renderVdom(t){return $.combine(this.subComponentsRendered$,t).compose(Vt(1)).map(([r,n])=>{const o=Object.keys(this.components),i=n["::ROOT::"],s=Object.entries(n).filter(([c])=>c!=="::ROOT::");if(s.length===0)return $.of(i);const a=[],u=s.map(([c,l])=>(a.push(c),l.sink$[this.DOMSourceName].startWith(void 0)));return u.length===0?$.of(i):$.combine(...u).compose(Vt(1)).map(c=>{const l=c.reduce((d,f,h)=>(d[a[h]]=f,d),{}),p=to(i);return Zn(p,l,o)})}).flatten().filter(r=>!!r).remember()}}function Zc(e){return function(t,r=!1){const n=typeof t=="function"?t:o=>t;if(r){this.debug&&console.log(`[${e}] ${n(t)}`);return}else return o=>o.debug(i=>{this.debug&&console.log(`[${e}] ${n(i)}`)})}}function Xn(e,t,r=0,n=0,o){var d,f,h,m,v,A;if(!e)return{};if((d=e.data)!=null&&d.componentsProcessed)return{};r===0&&(e.data.componentsProcessed=!0);const i=e.sel,s=i&&i.toLowerCase()==="collection",a=i&&i.toLowerCase()==="switchable",u=i&&["collection","switchable","sygnal-factory",...t].includes(i)||typeof((h=(f=e.data)==null?void 0:f.props)==null?void 0:h.sygnalFactory)=="function"||k((v=(m=e.data)==null?void 0:m.props)==null?void 0:v.sygnalOptions),c=e.data&&e.data.props||{};e.data&&e.data.attrs;const l=e.children||[];let p={},y=o;if(u){if(y=Qn(e,r,n,o),s){if(!c.of)throw new Error("Collection element missing required 'component' property");if(typeof c.of!="string"&&typeof c.of!="function")throw new Error(`Invalid 'component' property of collection element: found ${typeof c.of} requires string or component factory function`);if(typeof c.of!="function"&&!t.includes(c.of))throw new Error(`Specified component for collection not found: ${c.of}`);typeof c.from!="undefined"&&!(typeof c.from=="string"||Array.isArray(c.from)||typeof c.from.get=="function")&&console.warn(`No valid array found for collection ${typeof c.of=="string"?c.of:"function component"}: no collection components will be created`,c.from),e.data.isCollection=!0,(A=e.data).props||(A.props={})}else if(a){if(!c.of)throw new Error("Switchable element missing required 'of' property");if(!k(c.of))throw new Error(`Invalid 'of' property of switchable element: found ${typeof c.of} requires object mapping names to component factories`);if(!Object.values(c.of).every(S=>typeof S=="function"))throw new Error("One or more components provided to switchable element is not a valid component factory");if(!c.current||typeof c.current!="string"&&typeof c.current!="function")throw new Error(`Missing or invalid 'current' property for switchable element: found '${typeof c.current}' requires string or function`);if(!Object.keys(c.of).includes(c.current))throw new Error(`Component '${c.current}' not found in switchable element`);e.data.isSwitchable=!0}typeof c.key=="undefined"&&(e.data.props.key=y),p[y]=e}return l.length>0&&l.map((_,g)=>Xn(_,t,r+1,n+g,y)).forEach(_=>{Object.entries(_).forEach(([g,S])=>p[g]=S)}),p}function Zn(e,t,r,n=0,o=0,i){var y,d,f,h,m,v,A;if(!e)return;if((y=e.data)!=null&&y.componentsInjected)return e;n===0&&e.data&&(e.data.componentsInjected=!0);const s=e.sel||"NO SELECTOR",a=["collection","switchable","sygnal-factory",...r].includes(s)||typeof((f=(d=e.data)==null?void 0:d.props)==null?void 0:f.sygnalFactory)=="function"||k((m=(h=e.data)==null?void 0:h.props)==null?void 0:m.sygnalOptions),u=(v=e==null?void 0:e.data)==null?void 0:v.isCollection,c=(A=e==null?void 0:e.data)==null?void 0:A.isSwitchable;e.data&&e.data.props;const l=e.children||[];let p=i;if(a){p=Qn(e,n,o,i);const _=t[p];return u?(e.sel="div",e.children=Array.isArray(_)?_:[_],e):_}else return l.length>0&&(e.children=l.map((_,g)=>Zn(_,t,r,n+1,o+g,p)).flat()),e}function Qn(e,t,r,n){var p;const o=e.sel,i=typeof o=="string"?o:"functionComponent",s=`${t}:${r}`,a=((p=e.data)==null?void 0:p.props)||{},u=a.id&&JSON.stringify(a.id).replaceAll('"',"")||s;return`${n?`${n}|`:""}${i}::${u}`}function to(e){return typeof e=="undefined"?e:F(x({},e),{children:Array.isArray(e.children)?e.children.map(to):void 0,data:e.data&&F(x({},e.data),{componentsInjected:!1})})}function Qc(e,t){return Y(tf(e))}function Y(e,t,r=5,n=0){if(n>r)return!1;if(e===t)return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let s=0;s<e.length;s++)if(!Y(e[s],t[s],r,n+1))return!1;return!0}const o=Object.keys(e),i=Object.keys(t);if(o.length!==i.length)return!1;for(const s of o)if(!i.includes(s)||!Y(e[s],t[s],r,n+1))return!1;return!0}function tf(e){if(!k(e))return e;const s=e,{state:t,of:r,from:n,filter:o}=s;return tr(s,["state","of","from","filter"])}function k(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function re(e,t,r=!0){const n=r?1:-1;switch(!0){case e>t:return 1*n;case e<t:return-1*n;default:return 0}}function Fr(e){const t=Object.entries(e);if(t.length>1){console.error("Sort objects can only have one key:",e);return}const r=t[0],[n,o]=r;if(!["string","number"].includes(typeof o)){console.error("Sort object properties must be a string or number:",e);return}let i=!0;if(typeof o=="string"){if(!["asc","dec"].includes(o.toLowerCase())){console.error("Sort object string values must be asc or dec:",e);return}i=o.toLowerCase()==="asc"}if(typeof o=="number"){if(o!==1&&o!==-1){console.error("Sort object number values must be 1 or -1:",e);return}i=o===1}return(s,a)=>re(s[n],a[n],i)}function jr(e){if(!e)return;const t=typeof e;if(t==="function")return e;if(t==="string"){if(e.toLowerCase()==="asc"||e.toLowerCase()==="dec"){const n=e.toLowerCase()==="asc";return(o,i)=>re(o,i,n)}const r=e;return(n,o)=>re(n[r],o[r],!0)}else if(Array.isArray(e)){const r=e.map(n=>{if(typeof n=="function")return n;if(typeof n=="string"&&!["asc","dec"].includes(n.toLowerCase()))return(o,i)=>re(o[n],i[n],!0);if(k(n))return Fr(n)});return(n,o)=>r.filter(i=>typeof i=="function").reduce((i,s)=>i!==0?i:s(n,o),0)}else{if(k(e))return Fr(e);console.error("Invalid sort option (ignoring):",item);return}}var Je={};Object.defineProperty(Je,"__esModule",{value:!0});function eo(){var e;return typeof window!="undefined"?e=window:typeof V!="undefined"?e=V:e=this,e.Cyclejs=e.Cyclejs||{},e=e.Cyclejs,e.adaptStream=e.adaptStream||function(t){return t},e}function ef(e){eo().adaptStream=e}Je.setAdapt=ef;function rf(e){return eo().adaptStream(e)}var nf=Je.adapt=rf;function of(e){const t=new EventTarget;return e.subscribe({next:r=>t.dispatchEvent(new CustomEvent("data",{detail:r}))}),{select:r=>{const n=!r,o=Array.isArray(r)?r:[r];let i;const s=$.create({start:a=>{i=({detail:u})=>{const c=u&&u.data||null;(n||o.includes(u.type))&&a.next(c)},t.addEventListener("data",i)},stop:a=>t.removeEventListener("data",i)});return nf(s)}}}function sf(e){e.addListener({next:t=>{console.log(t)}})}function af(e,t={},r={}){const{mountPoint:n="#root",fragments:o=!0}=r;if(!e.isSygnalComponent){const u=e.name||e.componentName||e.label||"FUNCTIONAL_COMPONENT",c=e,{model:l,intent:p,context:y,peers:d,components:f,initialState:h,calculated:m,storeCalculatedInState:v,DOMSourceName:A,stateSourceName:_,debug:g}=e;e=ee({name:u,view:c,model:l,intent:p,context:y,peers:d,components:f,initialState:h,calculated:m,storeCalculatedInState:v,DOMSourceName:A,stateSourceName:_,debug:g})}const i=Us(e,"STATE"),s={EVENTS:of,DOM:cu(n,{snabbdomOptions:{experimental:{fragments:o}}}),LOG:sf},a=x(x({},s),t);return Zs(i,a)}function uf(...e){return e.reduce((t,r)=>(typeof r=="string"&&!t.includes(r)?t.push(...no(r)):Array.isArray(r)?t.push(...cf(r)):typeof r=="object"&&t.push(...ff(r)),t),[]).join(" ")}function ro(e){return/^[a-zA-Z0-9-_]+$/.test(e)}function no(e){if(typeof e!="string")throw new Error("Class name must be a string");return e.trim().split(" ").reduce((t,r)=>{if(r.trim().length===0)return t;if(!ro(r))throw new Error(`${r} is not a valid CSS class name`);return t.push(r),t},[])}function cf(e){return e.map(no).flat()}function ff(e){return Object.entries(e).filter(([r,n])=>typeof n=="function"?n():!!n).map(([r,n])=>{const o=r.trim();if(!ro(o))throw new Error(`${o} is not a valid CSS class name`);return o})}var oo={};Object.defineProperty(oo,"__esModule",{value:!0});var lf=W,pf=function(){function e(t,r){this.dt=t,this.ins=r,this.type="throttle",this.out=null,this.id=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.id=null},e.prototype.clearInterval=function(){var t=this.id;t!==null&&clearInterval(t),this.id=null},e.prototype._n=function(t){var r=this,n=this.out;!n||this.id||(n._n(t),this.id=setInterval(function(){r.clearInterval()},this.dt))},e.prototype._e=function(t){var r=this.out;!r||(this.clearInterval(),r._e(t))},e.prototype._c=function(){var t=this.out;!t||(this.clearInterval(),t._c())},e}();function hf(e){return function(r){return new lf.Stream(new pf(e,r))}}oo.default=hf;var It={},df=V&&V.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)n[o]=i[s];return n};Object.defineProperty(It,"__esModule",{value:!0});It.SampleCombineOperator=It.SampleCombineListener=void 0;var yf=W,it={},io=function(){function e(t,r){this.i=t,this.p=r,r.ils[t]=this}return e.prototype._n=function(t){var r=this.p;r.out!==it&&r.up(t,this.i)},e.prototype._e=function(t){this.p._e(t)},e.prototype._c=function(){this.p.down(this.i,this)},e}();It.SampleCombineListener=io;var so=function(){function e(t,r){this.type="sampleCombine",this.ins=t,this.others=r,this.out=it,this.ils=[],this.Nn=0,this.vals=[]}return e.prototype._start=function(t){this.out=t;for(var r=this.others,n=this.Nn=r.length,o=this.vals=new Array(n),i=0;i<n;i++)o[i]=it,r[i]._add(new io(i,this));this.ins._add(this)},e.prototype._stop=function(){var t=this.others,r=t.length,n=this.ils;this.ins._remove(this);for(var o=0;o<r;o++)t[o]._remove(n[o]);this.out=it,this.vals=[],this.ils=[]},e.prototype._n=function(t){var r=this.out;r!==it&&(this.Nn>0||r._n(df([t],this.vals)))},e.prototype._e=function(t){var r=this.out;r!==it&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==it&&t._c()},e.prototype.up=function(t,r){var n=this.vals[r];this.Nn>0&&n===it&&this.Nn--,this.vals[r]=t},e.prototype.down=function(t,r){this.others[t]._remove(r)},e}();It.SampleCombineOperator=so;var ao;ao=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return function(o){return new yf.Stream(new so(o,t))}};It.default=ao;var ne=Object.prototype.hasOwnProperty,uo=Object.prototype.toString,Lr=Object.defineProperty,Rr=Object.getOwnPropertyDescriptor,Br=function(t){return typeof Array.isArray=="function"?Array.isArray(t):uo.call(t)==="[object Array]"},Ur=function(t){if(!t||uo.call(t)!=="[object Object]")return!1;var r=ne.call(t,"constructor"),n=t.constructor&&t.constructor.prototype&&ne.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!r&&!n)return!1;var o;for(o in t);return typeof o=="undefined"||ne.call(t,o)},Wr=function(t,r){Lr&&r.name==="__proto__"?Lr(t,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):t[r.name]=r.newValue},Gr=function(t,r){if(r==="__proto__")if(ne.call(t,r)){if(Rr)return Rr(t,r).value}else return;return t[r]},co=function e(){var t,r,n,o,i,s,a=arguments[0],u=1,c=arguments.length,l=!1;for(typeof a=="boolean"&&(l=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<c;++u)if(t=arguments[u],t!=null)for(r in t)n=Gr(a,r),o=Gr(t,r),a!==o&&(l&&o&&(Ur(o)||(i=Br(o)))?(i?(i=!1,s=n&&Br(n)?n:[]):s=n&&Ur(n)?n:{},Wr(a,{name:r,newValue:e(l,s,o)})):typeof o!="undefined"&&Wr(a,{name:r,newValue:o}));return a};const mf=e=>e===void 0,vf=e=>typeof e=="number",gf=e=>typeof e=="string",fo=e=>gf(e)||vf(e),_f=e=>Array.isArray(e),bf=e=>typeof e=="object"&&e!==null,wf=e=>typeof e=="function",Sf=e=>bf(e)&&"sel"in e&&"data"in e&&"children"in e&&"text"in e,$f={svg:1,circle:1,ellipse:1,line:1,polygon:1,polyline:1,rect:1,g:1,path:1,text:1},Af=e=>e.sel in $f,Le=(...e)=>co(!0,...e),Of=(...e)=>co(!1,...e),lo=(e,t,r)=>{let n=r;for(let o=0;o<e.length;o++){const i=e[o];_f(i)?n=lo(i,t,n):n=t(n,i)}return n},Ke=(e,t)=>Object.keys(e).map(r=>t(r,e[r])).reduce((r,n)=>Le(r,n),{}),Ef=(e,t)=>Ke(e,(r,n)=>{const o=r.indexOf("-");if(o>-1&&t[r.slice(0,o)]!==void 0){const i={[r.slice(o+1)]:n};return{[r.slice(0,o)]:i}}return{[r]:n}}),zr=(e,t)=>Ke(t,(r,n)=>r!==e?{[r]:n}:{}),po=e=>fo(e)?{text:e,sel:void 0,data:void 0,children:void 0,elm:void 0,key:void 0}:void 0,Ye=e=>Af(e)?Of(e,{data:zr("props",Le(e.data,{ns:"http://www.w3.org/2000/svg",attrs:zr("className",Le(e.data.props,{class:e.data.props?e.data.props.className:void 0}))}))},{children:mf(e.children)?void 0:e.children.map(t=>Ye(t))}):e,at={for:"attrs",role:"attrs",tabindex:"attrs","aria-*":"attrs",key:null},Pf=(e,t)=>Ke(e,(r,n)=>{const o={[r]:n};if(at[r]&&t[at[r]]!==void 0)return{[at[r]]:o};if(at[r]===null)return{};const i=Object.keys(at);for(let s=0;s<i.length;s++){const a=i[s];if(a.charAt(a.length-1)==="*"&&r.indexOf(a.slice(0,-1))===0&&t[at[a]]!==void 0)return{[at[a]]:o}}return t[r]!==void 0?{[t[r]?t[r]:r]:n}:t.props!==void 0?{props:o}:o}),Nf=(e,t)=>Ye(Pf(Ef(e,t),t)),Cf=e=>e.length>1||!fo(e[0])?void 0:e[0].toString(),If=e=>lo(e,(t,r)=>{const n=Sf(r)?r:po(r);return t.push(n),t},[]),xf={attrs:"",props:"",class:"",data:"dataset",style:"",hook:"",on:""},kf=e=>(t,r,...n)=>{if(typeof t=="undefined"&&(t="UNDEFINED",console.error("JSX Error: Capitalized HTML element without corresponding factory function.  Components with names where the first letter is capital MUST be defined or included at the parent component's file scope.")),wf(t)){if(t.name==="Fragment")return t(r||{},n);if(r||(r={}),t.isSygnalComponent){const i=t;t=t.componentName||t.label||t.name||"sygnal-factory",r.sygnalFactory=i}else{const i=t.componentName||t.label||t.name||"FUNCTION_COMPONENT",s=t,{model:a,intent:u,context:c,peers:l,components:p,initialState:y,calculated:d,storeCalculatedInState:f,DOMSourceName:h,stateSourceName:m,debug:v}=t,A={name:i,view:s,model:a,intent:u,context:c,peers:l,components:p,initialState:y,calculated:d,storeCalculatedInState:f,DOMSourceName:h,stateSourceName:m,debug:v};r.sygnalOptions=A,t=i}}const o=Cf(n);return Ye({sel:t,data:r?Nf(r,e):{},children:typeof o!="undefined"?po(o):If(n),text:o,elm:void 0,key:r?r.key:void 0})},M=kf(xf),Df={0:"1111110",1:"0110000",2:"1101101",3:"1111001",4:"0110011",5:"1011011",6:"1011111",7:"1110000",8:"1111111",9:"1111011","-":"0000001",".":"0000000"};function Re({state:e}){let{digit:t,segments:r,fill:n,background:o,padding:i,skew:s,transition:a,id:u}=e;if(i||(i="0.1em"),o||(o="transparent"),t===".")return M("span",{style:{fontSize:`calc(1em + ${i} * 2)`,color:n}},".");const c=p=>uf("segment",`segment-${p}`,{on:r[p]}),l={fill:n,transition:a};return M("div",{className:"digit",style:{height:"1em",backgroundColor:o,padding:i,transform:`skew(${s||"0"})`},id:u},M("svg",{style:{height:"1em"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 292.06 585.99"},M("defs",null,M("style",null,`
            .segment {opacity: 0.1;}
            .segment.on {opacity: 1;}
          `)),M("polygon",{style:l,className:c(0),points:"230.47 58.07 61.27 58.23 61.27 58.07 32.39 29.04 61.27 0.15 230.47 0 259.36 29.04 230.47 57.92 230.47 58.07"}),M("polygon",{style:l,className:c(1),points:"292.06 61.95 292.06 259.88 291.9 259.88 262.87 288.76 233.98 259.88 233.98 61.95 263.02 33.07 291.9 61.95 292.06 61.95"}),M("polygon",{style:l,className:c(2),points:"292.06 325.72 292.06 523.65 291.9 523.65 262.87 552.52 233.98 523.65 233.98 325.72 263.02 296.83 291.9 325.72 292.06 325.72"}),M("polygon",{style:l,className:c(3),points:"230.47 585.84 61.27 585.99 61.27 585.84 32.39 556.8 61.27 527.92 230.47 527.76 259.36 556.8 230.47 585.68 230.47 585.84"}),M("polygon",{style:l,className:c(4),points:"58.07 325.72 58.07 523.65 57.92 523.65 28.89 552.52 0 523.65 0 325.72 29.04 296.83 57.92 325.72 58.07 325.72"}),M("polygon",{style:l,className:c(5),points:"58.07 61.95 58.07 259.88 57.92 259.88 28.89 288.76 0 259.88 0 61.95 29.04 33.07 57.92 61.95 58.07 61.95"}),M("polygon",{style:l,className:c(6),points:"230.47 321.75 61.27 321.9 61.27 321.75 32.39 292.72 61.27 263.83 230.47 263.68 259.36 292.72 230.47 321.59 230.47 321.75"})))}Re.calculated={segments:e=>Df[e.digit].split("").map(t=>t==="1")};const qr={"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,x:(e,t)=>e*t},ho=["1","2","3","4","5","6","7","8","9","0"],yo=["/","x","-","+"],Tf="AC",Mf="+/-",mo="%",vo=".",go="=",ut="num",xe="op",ct="eq",Hr="-7deg",Vr="100ms",Ff="#AAA",jf="#999";function Bt({state:e}){const{operation:t,mode:r}=e,n=ho.map(s=>M("div",{className:"button number","data-value":`${s}`},s)),o=yo.map(s=>M("div",{className:"button operator","data-value":s},s));return M("div",{className:"calculator"},M("div",{className:"display"},M("div",{className:"previous"},M("collection",{of:Re,from:"registerDigits",className:"register-container"}),M("span",{className:"operation"},r===ct?"":t)),M("collection",{of:Re,from:"displayDigits",className:"current-container"})),M("div",{className:"keypad"},M("div",{className:"numbers"},M("div",{className:"button clear"},Tf),M("div",{className:"button sign"},Mf),M("div",{className:"button percent"},mo),n,M("div",{className:"button decimal"},vo)),M("div",{className:"operators"},o,M("div",{className:"button equal"},go))))}Bt.initialState={display:"",register:"",mode:ut,operation:null};Bt.calculated={displayFloat:e=>{const t=parseFloat(e.display);return isNaN(t)?"":t},registerFloat:e=>{const t=parseFloat(e.register);return isNaN(t)?"":t},displayDigits:e=>{const t=Ff,r=Hr,n=Vr;return e.display.split("").slice(0,10).map((o,i)=>({digit:o,fill:t,skew:r,transition:n,id:"disp"+(10-e.display.length+i)}))},registerDigits:e=>{const t=jf,r=Hr,n=Vr;return e.mode===ct?[]:e.register.split("").slice(0,10).map((o,i)=>({digit:o,fill:t,skew:r,transition:n,id:"reg"+(10-e.register.length+i)}))}};Bt.model={NUMBER_INPUT:(e,t)=>{if(t==="0"&&e.display==="0")return At;const r=e.mode===ut?e.display:"",n=e.mode!==ct?e.register:"",o=e.mode!==ct?e.operation:"",i=r+t;return F(x({},e),{display:i,register:n,operation:o,mode:ut})},ADD_DECIMAL:(e,t)=>{if(e.mode===ct)return F(x({},e),{display:"0.",register:"",operation:null,mode:ut});if(e.display.includes("."))return At;if(e.display==="")return F(x({},e),{mode:ut,display:"0."});const r=e.display+".";return F(x({},e),{display:r})},RUN_CALC:e=>{if(!e.operation||e.display==="")return At;let t,r,n;e.mode===ct?(t=e.register,r=e.displayFloat,n=e.registerFloat):(t=e.display,r=e.registerFloat,n=e.displayFloat);const o=qr[e.operation](r,n).toString();return F(x({},e),{display:o,register:t,mode:ct})},SET_OPERATOR:(e,t)=>{if(e.mode!==xe&&e.display==="")return At;const n=e.mode==ut&&e.operation?qr[e.operation](e.registerFloat,e.displayFloat).toString():e.display;if(e.mode===xe&&e.display==="")return F(x({},e),{operation:t});const o="";return F(x({},e),{display:o,register:n,mode:xe,operation:t})},CLEAR_ALL:(e,t)=>({display:"",register:"",mode:ut,operation:null}),SWITCH_SIGN:(e,t)=>F(x({},e),{display:e.display[0]==="-"?e.display.slice(1):"-"+e.display}),MAKE_PERCENT:(e,t)=>F(x({},e),{display:(e.displayFloat/100).toString()})};Bt.intent=({DOM:e})=>{const t=y=>d=>d.target.dataset[y],r=y=>e.select(y).events("click").map(t("value")),n=e.select("document").events("keydown").map(y=>y.key),o=y=>d=>y.includes(d),i=n.filter(o(ho)),s=n.filter(o([vo])),a=n.filter(o([go,"Enter"])),u=n.filter(o([...yo,"*"])).map(y=>y==="*"?"x":y),c=n.filter(o(["Backspace"])),l=n.filter(o(["~"])),p=n.filter(o([mo]));return{NUMBER_INPUT:$.merge(r(".number"),i),ADD_DECIMAL:$.merge(r(".decimal"),s),RUN_CALC:$.merge(r(".equal"),a),SET_OPERATOR:$.merge(r(".operator"),u),CLEAR_ALL:$.merge(r(".clear"),c),SWITCH_SIGN:$.merge(r(".sign"),l),MAKE_PERCENT:$.merge(r(".percent"),p)}};af(Bt);
