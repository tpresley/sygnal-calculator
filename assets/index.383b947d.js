var io=Object.defineProperty,so=Object.defineProperties;var ao=Object.getOwnPropertyDescriptors;var Tt=Object.getOwnPropertySymbols;var qe=Object.prototype.hasOwnProperty,ze=Object.prototype.propertyIsEnumerable;var Ge=(e,t,r)=>t in e?io(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,N=(e,t)=>{for(var r in t||(t={}))qe.call(t,r)&&Ge(e,r,t[r]);if(Tt)for(var r of Tt(t))ze.call(t,r)&&Ge(e,r,t[r]);return e},k=(e,t)=>so(e,ao(t));var dt=(e,t)=>{var r={};for(var n in e)qe.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&Tt)for(var n of Tt(e))t.indexOf(n)<0&&ze.call(e,n)&&(r[n]=e[n]);return r};const uo=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}};uo();var V=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},q={},Gr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r){var n,o=r.Symbol;if(typeof o=="function")if(o.observable)n=o.observable;else{n=o.for("https://github.com/benlesh/symbol-observable");try{o.observable=n}catch{}}else n="@@observable";return n}})(Gr);var co=Gr,He=Object.prototype.toString,qr=function(t){var r=He.call(t),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&He.call(t.callee)==="[object Function]"),n},zr;if(!Object.keys){var Mt=Object.prototype.hasOwnProperty,Ve=Object.prototype.toString,fo=qr,Je=Object.prototype.propertyIsEnumerable,lo=!Je.call({toString:null},"toString"),po=Je.call(function(){},"prototype"),Ft=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],oe=function(e){var t=e.constructor;return t&&t.prototype===e},ho={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},yo=function(){if(typeof window=="undefined")return!1;for(var e in window)try{if(!ho["$"+e]&&Mt.call(window,e)&&window[e]!==null&&typeof window[e]=="object")try{oe(window[e])}catch{return!0}}catch{return!0}return!1}(),mo=function(e){if(typeof window=="undefined"||!yo)return oe(e);try{return oe(e)}catch{return!1}};zr=function(t){var r=t!==null&&typeof t=="object",n=Ve.call(t)==="[object Function]",o=fo(t),i=r&&Ve.call(t)==="[object String]",s=[];if(!r&&!n&&!o)throw new TypeError("Object.keys called on a non-object");var a=po&&n;if(i&&t.length>0&&!Mt.call(t,0))for(var u=0;u<t.length;++u)s.push(String(u));if(o&&t.length>0)for(var c=0;c<t.length;++c)s.push(String(c));else for(var p in t)!(a&&p==="prototype")&&Mt.call(t,p)&&s.push(String(p));if(lo)for(var y=mo(t),h=0;h<Ft.length;++h)!(y&&Ft[h]==="constructor")&&Mt.call(t,Ft[h])&&s.push(Ft[h]);return s}}var vo=zr,_o=Array.prototype.slice,go=qr,Ke=Object.keys,Bt=Ke?function(t){return Ke(t)}:vo,Ye=Object.keys;Bt.shim=function(){if(Object.keys){var t=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);t||(Object.keys=function(n){return go(n)?Ye(_o.call(n)):Ye(n)})}else Object.keys=Bt;return Object.keys||Bt};var bo=Bt,wo=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var o=42;t[r]=o;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var i=Object.getOwnPropertySymbols(t);if(i.length!==1||i[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(t,r);if(s.value!==o||s.enumerable!==!0)return!1}return!0},Xe=typeof Symbol!="undefined"&&Symbol,So=wo,$o=function(){return typeof Xe!="function"||typeof Symbol!="function"||typeof Xe("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:So()},Ze={foo:{}},Ao=Object,Oo=function(){return{__proto__:Ze}.foo===Ze.foo&&!({__proto__:null}instanceof Ao)},Eo="Function.prototype.bind called on incompatible ",ie=Array.prototype.slice,Po=Object.prototype.toString,No="[object Function]",Co=function(t){var r=this;if(typeof r!="function"||Po.call(r)!==No)throw new TypeError(Eo+r);for(var n=ie.call(arguments,1),o,i=function(){if(this instanceof o){var p=r.apply(this,n.concat(ie.call(arguments)));return Object(p)===p?p:this}else return r.apply(t,n.concat(ie.call(arguments)))},s=Math.max(0,r.length-n.length),a=[],u=0;u<s;u++)a.push("$"+u);if(o=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var c=function(){};c.prototype=r.prototype,o.prototype=new c,c.prototype=null}return o},Io=Co,Hr=Function.prototype.bind||Io,jo=Hr,ko=jo.call(Function.call,Object.prototype.hasOwnProperty),C,$t=SyntaxError,Vr=Function,wt=TypeError,se=function(e){try{return Vr('"use strict"; return ('+e+").constructor;")()}catch{}},ct=Object.getOwnPropertyDescriptor;if(ct)try{ct({},"")}catch{ct=null}var ae=function(){throw new wt},xo=ct?function(){try{return arguments.callee,ae}catch{try{return ct(arguments,"callee").get}catch{return ae}}}():ae,yt=$o(),Do=Oo(),F=Object.getPrototypeOf||(Do?function(e){return e.__proto__}:null),_t={},To=typeof Uint8Array=="undefined"||!F?C:F(Uint8Array),ft={"%AggregateError%":typeof AggregateError=="undefined"?C:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?C:ArrayBuffer,"%ArrayIteratorPrototype%":yt&&F?F([][Symbol.iterator]()):C,"%AsyncFromSyncIteratorPrototype%":C,"%AsyncFunction%":_t,"%AsyncGenerator%":_t,"%AsyncGeneratorFunction%":_t,"%AsyncIteratorPrototype%":_t,"%Atomics%":typeof Atomics=="undefined"?C:Atomics,"%BigInt%":typeof BigInt=="undefined"?C:BigInt,"%BigInt64Array%":typeof BigInt64Array=="undefined"?C:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array=="undefined"?C:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?C:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?C:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?C:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?C:FinalizationRegistry,"%Function%":Vr,"%GeneratorFunction%":_t,"%Int8Array%":typeof Int8Array=="undefined"?C:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?C:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?C:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":yt&&F?F(F([][Symbol.iterator]())):C,"%JSON%":typeof JSON=="object"?JSON:C,"%Map%":typeof Map=="undefined"?C:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!yt||!F?C:F(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?C:Promise,"%Proxy%":typeof Proxy=="undefined"?C:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?C:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?C:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!yt||!F?C:F(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?C:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":yt&&F?F(""[Symbol.iterator]()):C,"%Symbol%":yt?Symbol:C,"%SyntaxError%":$t,"%ThrowTypeError%":xo,"%TypedArray%":To,"%TypeError%":wt,"%Uint8Array%":typeof Uint8Array=="undefined"?C:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?C:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?C:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?C:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?C:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?C:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?C:WeakSet};if(F)try{null.error}catch(e){var Mo=F(F(e));ft["%Error.prototype%"]=Mo}var Fo=function e(t){var r;if(t==="%AsyncFunction%")r=se("async function () {}");else if(t==="%GeneratorFunction%")r=se("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=se("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var o=e("%AsyncGenerator%");o&&F&&(r=F(o.prototype))}return ft[t]=r,r},Qe={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},xt=Hr,Ht=ko,Lo=xt.call(Function.call,Array.prototype.concat),Ro=xt.call(Function.apply,Array.prototype.splice),tr=xt.call(Function.call,String.prototype.replace),Vt=xt.call(Function.call,String.prototype.slice),Bo=xt.call(Function.call,RegExp.prototype.exec),Uo=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Wo=/\\(\\)?/g,Go=function(t){var r=Vt(t,0,1),n=Vt(t,-1);if(r==="%"&&n!=="%")throw new $t("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new $t("invalid intrinsic syntax, expected opening `%`");var o=[];return tr(t,Uo,function(i,s,a,u){o[o.length]=a?tr(u,Wo,"$1"):s||i}),o},qo=function(t,r){var n=t,o;if(Ht(Qe,n)&&(o=Qe[n],n="%"+o[0]+"%"),Ht(ft,n)){var i=ft[n];if(i===_t&&(i=Fo(n)),typeof i=="undefined"&&!r)throw new wt("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new $t("intrinsic "+t+" does not exist!")},zo=function(t,r){if(typeof t!="string"||t.length===0)throw new wt("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new wt('"allowMissing" argument must be a boolean');if(Bo(/^%?[^%]*%?$/,t)===null)throw new $t("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Go(t),o=n.length>0?n[0]:"",i=qo("%"+o+"%",r),s=i.name,a=i.value,u=!1,c=i.alias;c&&(o=c[0],Ro(n,Lo([0,1],c)));for(var p=1,y=!0;p<n.length;p+=1){var h=n[p],d=Vt(h,0,1),l=Vt(h,-1);if((d==='"'||d==="'"||d==="`"||l==='"'||l==="'"||l==="`")&&d!==l)throw new $t("property names with quotes must have matching quotes");if((h==="constructor"||!y)&&(u=!0),o+="."+h,s="%"+o+"%",Ht(ft,s))a=ft[s];else if(a!=null){if(!(h in a)){if(!r)throw new wt("base intrinsic for "+t+" exists, but the property is not available.");return}if(ct&&p+1>=n.length){var f=ct(a,h);y=!!f,y&&"get"in f&&!("originalValue"in f.get)?a=f.get:a=a[h]}else y=Ht(a,h),a=a[h];y&&!u&&(ft[s]=a)}}return a},Ho=zo,Se=Ho("%Object.defineProperty%",!0),$e=function(){if(Se)try{return Se({},"a",{value:1}),!0}catch{return!1}return!1};$e.hasArrayLengthDefineBug=function(){if(!$e())return null;try{return Se([],"length",{value:1}).length!==1}catch{return!0}};var Vo=$e,Jo=bo,Ko=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Yo=Object.prototype.toString,Xo=Array.prototype.concat,Jr=Object.defineProperty,Zo=function(e){return typeof e=="function"&&Yo.call(e)==="[object Function]"},Qo=Vo(),Kr=Jr&&Qo,ti=function(e,t,r,n){if(t in e){if(n===!0){if(e[t]===r)return}else if(!Zo(n)||!n())return}Kr?Jr(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r},Yr=function(e,t){var r=arguments.length>2?arguments[2]:{},n=Jo(t);Ko&&(n=Xo.call(n,Object.getOwnPropertySymbols(t)));for(var o=0;o<n.length;o+=1)ti(e,n[o],t[n[o]],r[n[o]])};Yr.supportsDescriptors=!!Kr;var Xr=Yr,jt={exports:{}};typeof self!="undefined"?jt.exports=self:typeof window!="undefined"?jt.exports=window:jt.exports=Function("return this")();var ei=jt.exports,Zr=function(){return typeof V!="object"||!V||V.Math!==Math||V.Array!==Array?ei:V},ri=Xr,ni=Zr,oi=function(){var t=ni();if(ri.supportsDescriptors){var r=Object.getOwnPropertyDescriptor(t,"globalThis");(!r||r.configurable&&(r.enumerable||!r.writable||globalThis!==t))&&Object.defineProperty(t,"globalThis",{configurable:!0,enumerable:!1,value:t,writable:!0})}else(typeof globalThis!="object"||globalThis!==t)&&(t.globalThis=t);return t},ii=Xr,si=jt.exports,Qr=Zr,ai=oi,ui=Qr(),tn=function(){return ui};ii(tn,{getPolyfill:Qr,implementation:si,shim:ai});var ci=tn,fi=V&&V.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(q,"__esModule",{value:!0});q.NO_IL=ke=q.NO=q.MemoryStream=K=q.Stream=void 0;var li=co,pi=ci,Lt=li.default(pi.getPolyfill()),_={},ke=q.NO=_;function R(){}function Ut(e){for(var t=e.length,r=Array(t),n=0;n<t;++n)r[n]=e[n];return r}function hi(e,t){return function(n){return e(n)&&t(n)}}function xe(e,t,r){try{return e.f(t)}catch(n){return r._e(n),_}}var at={_n:R,_e:R,_c:R};q.NO_IL=at;function er(e){e._start=function(r){r.next=r._n,r.error=r._e,r.complete=r._c,this.start(r)},e._stop=e.stop}var di=function(){function e(t,r){this._stream=t,this._listener=r}return e.prototype.unsubscribe=function(){this._stream._remove(this._listener)},e}(),yi=function(){function e(t){this._listener=t}return e.prototype.next=function(t){this._listener._n(t)},e.prototype.error=function(t){this._listener._e(t)},e.prototype.complete=function(){this._listener._c()},e}(),mi=function(){function e(t){this.type="fromObservable",this.ins=t,this.active=!1}return e.prototype._start=function(t){this.out=t,this.active=!0,this._sub=this.ins.subscribe(new yi(t)),this.active||this._sub.unsubscribe()},e.prototype._stop=function(){this._sub&&this._sub.unsubscribe(),this.active=!1},e}(),vi=function(){function e(t){this.type="merge",this.insArr=t,this.out=_,this.ac=0}return e.prototype._start=function(t){this.out=t;var r=this.insArr,n=r.length;this.ac=n;for(var o=0;o<n;o++)r[o]._add(this)},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=0;n<r;n++)t[n]._remove(this);this.out=_},e.prototype._n=function(t){var r=this.out;r!==_&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==_&&r._e(t)},e.prototype._c=function(){if(--this.ac<=0){var t=this.out;if(t===_)return;t._c()}},e}(),_i=function(){function e(t,r,n){this.i=t,this.out=r,this.p=n,n.ils.push(this)}return e.prototype._n=function(t){var r=this.p,n=this.out;if(n!==_&&r.up(t,this.i)){var o=Ut(r.vals);n._n(o)}},e.prototype._e=function(t){var r=this.out;r!==_&&r._e(t)},e.prototype._c=function(){var t=this.p;t.out!==_&&--t.Nc===0&&t.out._c()},e}(),gi=function(){function e(t){this.type="combine",this.insArr=t,this.out=_,this.ils=[],this.Nc=this.Nn=0,this.vals=[]}return e.prototype.up=function(t,r){var n=this.vals[r],o=this.Nn?n===_?--this.Nn:this.Nn:0;return this.vals[r]=t,o===0},e.prototype._start=function(t){this.out=t;var r=this.insArr,n=this.Nc=this.Nn=r.length,o=this.vals=new Array(n);if(n===0)t._n([]),t._c();else for(var i=0;i<n;i++)o[i]=_,r[i]._add(new _i(i,t,this))},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=this.ils,o=0;o<r;o++)t[o]._remove(n[o]);this.out=_,this.ils=[],this.vals=[]},e}(),bi=function(){function e(t){this.type="fromArray",this.a=t}return e.prototype._start=function(t){for(var r=this.a,n=0,o=r.length;n<o;n++)t._n(r[n]);t._c()},e.prototype._stop=function(){},e}(),wi=function(){function e(t){this.type="fromPromise",this.on=!1,this.p=t}return e.prototype._start=function(t){var r=this;this.on=!0,this.p.then(function(n){r.on&&(t._n(n),t._c())},function(n){t._e(n)}).then(R,function(n){setTimeout(function(){throw n})})},e.prototype._stop=function(){this.on=!1},e}(),Si=function(){function e(t){this.type="periodic",this.period=t,this.intervalID=-1,this.i=0}return e.prototype._start=function(t){var r=this;function n(){t._n(r.i++)}this.intervalID=setInterval(n,this.period)},e.prototype._stop=function(){this.intervalID!==-1&&clearInterval(this.intervalID),this.intervalID=-1,this.i=0},e}(),$i=function(){function e(t,r){this.type="debug",this.ins=t,this.out=_,this.s=R,this.l="",typeof r=="string"?this.l=r:typeof r=="function"&&(this.s=r)}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=_},e.prototype._n=function(t){var r=this.out;if(r!==_){var n=this.s,o=this.l;if(n!==R)try{n(t)}catch(i){r._e(i)}else o?console.log(o+":",t):console.log(t);r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==_&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==_&&t._c()},e}(),Ai=function(){function e(t,r){this.type="drop",this.ins=r,this.out=_,this.max=t,this.dropped=0}return e.prototype._start=function(t){this.out=t,this.dropped=0,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=_},e.prototype._n=function(t){var r=this.out;r!==_&&this.dropped++>=this.max&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==_&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==_&&t._c()},e}(),Oi=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(){this.op.end()},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.end()},e}(),Ei=function(){function e(t,r){this.type="endWhen",this.ins=r,this.out=_,this.o=t,this.oil=at}return e.prototype._start=function(t){this.out=t,this.o._add(this.oil=new Oi(t,this)),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.o._remove(this.oil),this.out=_,this.oil=at},e.prototype.end=function(){var t=this.out;t!==_&&t._c()},e.prototype._n=function(t){var r=this.out;r!==_&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==_&&r._e(t)},e.prototype._c=function(){this.end()},e}(),ue=function(){function e(t,r){this.type="filter",this.ins=r,this.out=_,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=_},e.prototype._n=function(t){var r=this.out;if(r!==_){var n=xe(this,t,r);n===_||!n||r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==_&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==_&&t._c()},e}(),Pi=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(t){this.out._n(t)},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.inner=_,this.op.less()},e}(),Ni=function(){function e(t){this.type="flatten",this.ins=t,this.out=_,this.open=!0,this.inner=_,this.il=at}return e.prototype._start=function(t){this.out=t,this.open=!0,this.inner=_,this.il=at,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.inner!==_&&this.inner._remove(this.il),this.out=_,this.open=!0,this.inner=_,this.il=at},e.prototype.less=function(){var t=this.out;t!==_&&!this.open&&this.inner===_&&t._c()},e.prototype._n=function(t){var r=this.out;if(r!==_){var n=this,o=n.inner,i=n.il;o!==_&&i!==at&&o._remove(i),(this.inner=t)._add(this.il=new Pi(r,this))}},e.prototype._e=function(t){var r=this.out;r!==_&&r._e(t)},e.prototype._c=function(){this.open=!1,this.less()},e}(),Ci=function(){function e(t,r,n){var o=this;this.type="fold",this.ins=n,this.out=_,this.f=function(i){return t(o.acc,i)},this.acc=this.seed=r}return e.prototype._start=function(t){this.out=t,this.acc=this.seed,t._n(this.acc),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=_,this.acc=this.seed},e.prototype._n=function(t){var r=this.out;if(r!==_){var n=xe(this,t,r);n!==_&&r._n(this.acc=n)}},e.prototype._e=function(t){var r=this.out;r!==_&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==_&&t._c()},e}(),Ii=function(){function e(t){this.type="last",this.ins=t,this.out=_,this.has=!1,this.val=_}return e.prototype._start=function(t){this.out=t,this.has=!1,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=_,this.val=_},e.prototype._n=function(t){this.has=!0,this.val=t},e.prototype._e=function(t){var r=this.out;r!==_&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==_&&(this.has?(t._n(this.val),t._c()):t._e(new Error("last() failed because input stream completed")))},e}(),ji=function(){function e(t,r){this.type="map",this.ins=r,this.out=_,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=_},e.prototype._n=function(t){var r=this.out;if(r!==_){var n=xe(this,t,r);n!==_&&r._n(n)}},e.prototype._e=function(t){var r=this.out;r!==_&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==_&&t._c()},e}(),ki=function(){function e(t){this.type="remember",this.ins=t,this.out=_}return e.prototype._start=function(t){this.out=t,this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=_},e}(),xi=function(){function e(t,r){this.type="replaceError",this.ins=r,this.out=_,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=_},e.prototype._n=function(t){var r=this.out;r!==_&&r._n(t)},e.prototype._e=function(t){var r=this.out;if(r!==_)try{this.ins._remove(this),(this.ins=this.f(t))._add(this)}catch(n){r._e(n)}},e.prototype._c=function(){var t=this.out;t!==_&&t._c()},e}(),Di=function(){function e(t,r){this.type="startWith",this.ins=t,this.out=_,this.val=r}return e.prototype._start=function(t){this.out=t,this.out._n(this.val),this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=_},e}(),Ti=function(){function e(t,r){this.type="take",this.ins=r,this.out=_,this.max=t,this.taken=0}return e.prototype._start=function(t){this.out=t,this.taken=0,this.max<=0?t._c():this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=_},e.prototype._n=function(t){var r=this.out;if(r!==_){var n=++this.taken;n<this.max?r._n(t):n===this.max&&(r._n(t),r._c())}},e.prototype._e=function(t){var r=this.out;r!==_&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==_&&t._c()},e}(),De=function(){function e(t){this._prod=t||_,this._ils=[],this._stopID=_,this._dl=_,this._d=!1,this._target=null,this._err=_}return e.prototype._n=function(t){var r=this._ils,n=r.length;if(this._d&&this._dl._n(t),n==1)r[0]._n(t);else{if(n==0)return;for(var o=Ut(r),i=0;i<n;i++)o[i]._n(t)}},e.prototype._e=function(t){if(this._err===_){this._err=t;var r=this._ils,n=r.length;if(this._x(),this._d&&this._dl._e(t),n==1)r[0]._e(t);else{if(n==0)return;for(var o=Ut(r),i=0;i<n;i++)o[i]._e(t)}if(!this._d&&n==0)throw this._err}},e.prototype._c=function(){var t=this._ils,r=t.length;if(this._x(),this._d&&this._dl._c(),r==1)t[0]._c();else{if(r==0)return;for(var n=Ut(t),o=0;o<r;o++)n[o]._c()}},e.prototype._x=function(){this._ils.length!==0&&(this._prod!==_&&this._prod._stop(),this._err=_,this._ils=[])},e.prototype._stopNow=function(){this._prod._stop(),this._err=_,this._stopID=_},e.prototype._add=function(t){var r=this._target;if(r)return r._add(t);var n=this._ils;if(n.push(t),!(n.length>1))if(this._stopID!==_)clearTimeout(this._stopID),this._stopID=_;else{var o=this._prod;o!==_&&o._start(this)}},e.prototype._remove=function(t){var r=this,n=this._target;if(n)return n._remove(t);var o=this._ils,i=o.indexOf(t);i>-1&&(o.splice(i,1),this._prod!==_&&o.length<=0?(this._err=_,this._stopID=setTimeout(function(){return r._stopNow()})):o.length===1&&this._pruneCycles())},e.prototype._pruneCycles=function(){this._hasNoSinks(this,[])&&this._remove(this._ils[0])},e.prototype._hasNoSinks=function(t,r){if(r.indexOf(t)!==-1)return!0;if(t.out===this)return!0;if(t.out&&t.out!==_)return this._hasNoSinks(t.out,r.concat(t));if(t._ils){for(var n=0,o=t._ils.length;n<o;n++)if(!this._hasNoSinks(t._ils[n],r.concat(t)))return!1;return!0}else return!1},e.prototype.ctor=function(){return this instanceof X?X:e},e.prototype.addListener=function(t){t._n=t.next||R,t._e=t.error||R,t._c=t.complete||R,this._add(t)},e.prototype.removeListener=function(t){this._remove(t)},e.prototype.subscribe=function(t){return this.addListener(t),new di(this,t)},e.prototype[Lt]=function(){return this},e.create=function(t){if(t){if(typeof t.start!="function"||typeof t.stop!="function")throw new Error("producer requires both start and stop functions");er(t)}return new e(t)},e.createWithMemory=function(t){return t&&er(t),new X(t)},e.never=function(){return new e({_start:R,_stop:R})},e.empty=function(){return new e({_start:function(t){t._c()},_stop:R})},e.throw=function(t){return new e({_start:function(r){r._e(t)},_stop:R})},e.from=function(t){if(typeof t[Lt]=="function")return e.fromObservable(t);if(typeof t.then=="function")return e.fromPromise(t);if(Array.isArray(t))return e.fromArray(t);throw new TypeError("Type of input to from() must be an Array, Promise, or Observable")},e.of=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.fromArray(t)},e.fromArray=function(t){return new e(new bi(t))},e.fromPromise=function(t){return new e(new wi(t))},e.fromObservable=function(t){if(t.endWhen!==void 0)return t;var r=typeof t[Lt]=="function"?t[Lt]():t;return new e(new mi(r))},e.periodic=function(t){return new e(new Si(t))},e.prototype._map=function(t){return new(this.ctor())(new ji(t,this))},e.prototype.map=function(t){return this._map(t)},e.prototype.mapTo=function(t){var r=this.map(function(){return t}),n=r._prod;return n.type="mapTo",r},e.prototype.filter=function(t){var r=this._prod;return r instanceof ue?new e(new ue(hi(r.f,t),r.ins)):new e(new ue(t,this))},e.prototype.take=function(t){return new(this.ctor())(new Ti(t,this))},e.prototype.drop=function(t){return new e(new Ai(t,this))},e.prototype.last=function(){return new e(new Ii(this))},e.prototype.startWith=function(t){return new X(new Di(this,t))},e.prototype.endWhen=function(t){return new(this.ctor())(new Ei(t,this))},e.prototype.fold=function(t,r){return new X(new Ci(t,r,this))},e.prototype.replaceError=function(t){return new(this.ctor())(new xi(t,this))},e.prototype.flatten=function(){return new e(new Ni(this))},e.prototype.compose=function(t){return t(this)},e.prototype.remember=function(){return new X(new ki(this))},e.prototype.debug=function(t){return new(this.ctor())(new $i(this,t))},e.prototype.imitate=function(t){if(t instanceof X)throw new Error("A MemoryStream was given to imitate(), but it only supports a Stream. Read more about this restriction here: https://github.com/staltz/xstream#faq");this._target=t;for(var r=this._ils,n=r.length,o=0;o<n;o++)t._add(r[o]);this._ils=[]},e.prototype.shamefullySendNext=function(t){this._n(t)},e.prototype.shamefullySendError=function(t){this._e(t)},e.prototype.shamefullySendComplete=function(){this._c()},e.prototype.setDebugListener=function(t){t?(this._d=!0,t._n=t.next||R,t._e=t.error||R,t._c=t.complete||R,this._dl=t):(this._d=!1,this._dl=_)},e.merge=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new vi(r))},e.combine=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new gi(r))},e}(),K=q.Stream=De,X=function(e){fi(t,e);function t(r){var n=e.call(this,r)||this;return n._has=!1,n}return t.prototype._n=function(r){this._v=r,this._has=!0,e.prototype._n.call(this,r)},t.prototype._add=function(r){var n=this._target;if(n)return n._add(r);var o=this._ils;if(o.push(r),o.length>1){this._has&&r._n(this._v);return}if(this._stopID!==_)this._has&&r._n(this._v),clearTimeout(this._stopID),this._stopID=_;else if(this._has)r._n(this._v);else{var i=this._prod;i!==_&&i._start(this)}},t.prototype._stopNow=function(){this._has=!1,e.prototype._stopNow.call(this)},t.prototype._x=function(){this._has=!1,e.prototype._x.call(this)},t.prototype.map=function(r){return this._map(r)},t.prototype.mapTo=function(r){return e.prototype.mapTo.call(this,r)},t.prototype.take=function(r){return e.prototype.take.call(this,r)},t.prototype.endWhen=function(r){return e.prototype.endWhen.call(this,r)},t.prototype.replaceError=function(r){return e.prototype.replaceError.call(this,r)},t.prototype.remember=function(){return this},t.prototype.debug=function(r){return e.prototype.debug.call(this,r)},t}(De);q.MemoryStream=X;var Mi=De,$=q.default=Mi,Te={};Object.defineProperty(Te,"__esModule",{value:!0});function en(){var e;return typeof window!="undefined"?e=window:typeof V!="undefined"?e=V:e=this,e.Cyclejs=e.Cyclejs||{},e=e.Cyclejs,e.adaptStream=e.adaptStream||function(t){return t},e}function Fi(e){en().adaptStream=e}Te.setAdapt=Fi;function Li(e){return en().adaptStream(e)}var z=Te.adapt=Li;function Ri(e,t){if(typeof e!="function")throw new Error("First argument given to isolate() must be a 'dataflowComponent' function");if(t===null)throw new Error("Second argument given to isolate() must not be null")}function Bi(e,t,r){var n={};return Object.keys(e).forEach(function(o){if(typeof t=="string"){n[o]=t;return}var i=t[o];if(typeof i!="undefined"){n[o]=i;return}var s=t["*"];if(typeof s!="undefined"){n[o]=s;return}n[o]=r}),n}function Ui(e,t){var r={};for(var n in e){var o=e[n];e.hasOwnProperty(n)&&o&&t[n]!==null&&typeof o.isolateSource=="function"?r[n]=o.isolateSource(o,t[n]):e.hasOwnProperty(n)&&(r[n]=e[n])}return r}function Wi(e,t,r){var n={};for(var o in t){var i=e[o],s=t[o];t.hasOwnProperty(o)&&i&&r[o]!==null&&typeof i.isolateSink=="function"?n[o]=z(i.isolateSink($.fromObservable(s),r[o])):t.hasOwnProperty(o)&&(n[o]=t[o])}return n}var rn=0;function rr(){return"cycle"+ ++rn}function rt(e,t){t===void 0&&(t=rr()),Ri(e,t);var r=typeof t=="object"?rr():"",n=typeof t=="string"||typeof t=="object"?t:t.toString();return function(i){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];var u=Bi(i,n,r),c=Ui(i,u),p=e.apply(void 0,[c].concat(s)),y=Wi(i,p,u);return y}}rt.reset=function(){return rn=0};var te={};Object.defineProperty(te,"__esModule",{value:!0});te.DropRepeatsOperator=void 0;var Gi=q,ce={},nn=function(){function e(t,r){this.ins=t,this.type="dropRepeats",this.out=null,this.v=ce,this.isEq=r||function(n,o){return n===o}}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.v=ce},e.prototype._n=function(t){var r=this.out;if(!!r){var n=this.v;n!==ce&&this.isEq(t,n)||(this.v=t,r._n(t))}},e.prototype._e=function(t){var r=this.out;!r||r._e(t)},e.prototype._c=function(){var t=this.out;!t||t._c()},e}();te.DropRepeatsOperator=nn;function qi(e){return e===void 0&&(e=void 0),function(r){return new Gi.Stream(new nn(r,e))}}var zi=te.default=qi,Ae=globalThis&&globalThis.__assign||function(){return Ae=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ae.apply(this,arguments)};function Hi(e,t,r){if(r===e[t])return e;var n=parseInt(t);return typeof r=="undefined"?e.filter(function(o,i){return i!==n}):e.map(function(o,i){return i===n?r:o})}function on(e){return typeof e=="string"||typeof e=="number"?function(r){if(typeof r!="undefined")return r[e]}:e.get}function Vi(e){return typeof e=="string"||typeof e=="number"?function(r,n){var o,i;return Array.isArray(r)?Hi(r,e,n):typeof r=="undefined"?(o={},o[e]=n,o):Ae({},r,(i={},i[e]=n,i))}:e.set}function Ji(e,t){return e.select(t)}function Ki(e,t){var r=on(t),n=Vi(t);return e.map(function(o){return function(s){var a=r(s),u=o(a);return a===u?s:n(s,u)}})}var Nt=function(){function e(t,r){this.isolateSource=Ji,this.isolateSink=Ki,this._stream=t.filter(function(n){return typeof n!="undefined"}).compose(zi()).remember(),this._name=r,this.stream=z(this._stream),this._stream._isCycleSource=r}return e.prototype.select=function(t){var r=on(t);return new e(this._stream.map(r),this._name)},e}(),Yi=function(){function e(t,r,n){this.ins=n,this.out=t,this.p=r}return e.prototype._n=function(t){this.p;var r=this.out;r!==null&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){},e}(),Xi=function(){function e(t,r){this.type="pickMerge",this.ins=r,this.out=null,this.sel=t,this.ils=new Map,this.inst=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this);var t=this.ils;t.forEach(function(r,n){r.ins._remove(r),r.ins=null,r.out=null,t.delete(n)}),t.clear(),this.out=null,this.ils=new Map,this.inst=null},e.prototype._n=function(t){this.inst=t;for(var r=t.arr,n=this.ils,o=this.out,i=this.sel,s=r.length,a=0;a<s;++a){var u=r[a],c=u._key,p=$.fromObservable(u[i]||$.never());n.has(c)||(n.set(c,new Yi(o,this,p)),p._add(n.get(c)))}n.forEach(function(y,h){(!t.dict.has(h)||!t.dict.get(h))&&(y.ins._remove(y),y.ins=null,y.out=null,n.delete(h))})},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==null&&t._c()},e}();function Zi(e){return function(r){return new K(new Xi(e,r))}}var Qi=function(){function e(t,r,n,o){this.key=t,this.out=r,this.p=n,this.val=ke,this.ins=o}return e.prototype._n=function(t){this.p;var r=this.out;this.val=t,r!==null&&this.p.up()},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){},e}(),ts=function(){function e(t,r){this.type="combine",this.ins=r,this.sel=t,this.out=null,this.ils=new Map,this.inst=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this);var t=this.ils;t.forEach(function(r){r.ins._remove(r),r.ins=null,r.out=null,r.val=null}),t.clear(),this.out=null,this.ils=new Map,this.inst=null},e.prototype.up=function(){for(var t=this.inst.arr,r=t.length,n=this.ils,o=Array(r),i=0;i<r;++i){var s=t[i],a=s._key;if(!n.has(a))return;var u=n.get(a).val;if(u===ke)return;o[i]=u}this.out._n(o)},e.prototype._n=function(t){this.inst=t;var r=t.arr,n=this.ils,o=this.out,i=this.sel,s=t.dict,a=r.length,u=!1;if(n.forEach(function(d,l){s.has(l)||(d.ins._remove(d),d.ins=null,d.out=null,d.val=null,n.delete(l),u=!0)}),a===0){o._n([]);return}for(var c=0;c<a;++c){var p=r[c],y=p._key;if(!p[i])throw new Error("pickCombine found an undefined child sink stream");var h=$.fromObservable(p[i]);n.has(y)||(n.set(y,new Qi(y,o,this,h)),h._add(n.get(y)))}u&&this.up()},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==null&&t._c()},e}();function es(e){return function(r){return new K(new ts(e,r))}}var Jt=globalThis&&globalThis.__assign||function(){return Jt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Jt.apply(this,arguments)},rs=function(){function e(t){this._instances$=t}return e.prototype.pickMerge=function(t){return z(this._instances$.compose(Zi(t)))},e.prototype.pickCombine=function(t){return z(this._instances$.compose(es(t)))},e}();function ns(e){return{"*":null}}function os(e,t){return{get:function(r){if(typeof r!="undefined"){for(var n=0,o=r.length;n<o;++n)if(""+e(r[n],n)===t)return r[n];return}},set:function(r,n){return typeof r=="undefined"?[n]:typeof n=="undefined"?r.filter(function(o,i){return""+e(o,i)!==t}):r.map(function(o,i){return""+e(o,i)===t?n:o})}}}var is={get:function(e){return e},set:function(e,t){return t}};function ss(e){return function(r){var n=e.channel||"state",o=e.itemKey,i=e.itemScope||ns,s=$.fromObservable(r[n].stream),a=s.fold(function(u,c){var p,y,h,d,l=u.dict;if(Array.isArray(c)){for(var f=Array(c.length),m=new Set,v=0,b=c.length;v<b;++v){var w=""+(o?o(c[v],v):v);if(m.add(w),l.has(w))f[v]=l.get(w);else{var S=o?os(o,w):""+v,A=i(w),O=typeof A=="string"?(p={"*":A},p[n]=S,p):Jt({},A,(y={},y[n]=S,y)),E=e.itemFactory?e.itemFactory(c[v],v):e.item,P=rt(E,O)(r);l.set(w,P),f[v]=P}f[v]._key=w}return l.forEach(function(j,T){m.has(T)||l.delete(T)}),m.clear(),{dict:l,arr:f}}else{l.clear();var w=""+(o?o(c,0):"this"),S=is,A=i(w),O=typeof A=="string"?(h={"*":A},h[n]=S,h):Jt({},A,(d={},d[n]=S,d)),E=e.itemFactory?e.itemFactory(c,0):e.item,P=rt(E,O)(r);return l.set(w,P),{dict:l,arr:[P]}}},{dict:new Map,arr:[]});return e.collectSinks(new rs(a))}}var sn={};Object.defineProperty(sn,"__esModule",{value:!0});var as=q,us=function(){function e(t){this.streams=t,this.type="concat",this.out=null,this.i=0}return e.prototype._start=function(t){this.out=t,this.streams[this.i]._add(this)},e.prototype._stop=function(){var t=this.streams;this.i<t.length&&t[this.i]._remove(this),this.i=0,this.out=null},e.prototype._n=function(t){var r=this.out;!r||r._n(t)},e.prototype._e=function(t){var r=this.out;!r||r._e(t)},e.prototype._c=function(){var t=this.out;if(!!t){var r=this.streams;r[this.i]._remove(this),++this.i<r.length?r[this.i]._add(this):t._c()}},e}();function cs(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new as.Stream(new us(e))}var an=sn.default=cs,un={};Object.defineProperty(un,"__esModule",{value:!0});function fs(){return typeof queueMicrotask!="undefined"?queueMicrotask:typeof setImmediate!="undefined"?setImmediate:typeof process!="undefined"?process.nextTick:setTimeout}var cn=un.default=fs,fe=cn();function ls(e,t){return t===void 0&&(t="state"),function(n){var o=$.create(),i=o.fold(function(c,p){return p(c)},void 0).drop(1),s=n;s[t]=new Nt(i,t);var a=e(s);if(a[t]){var u=an($.fromObservable(a[t]),$.never());u.subscribe({next:function(c){return fe(function(){return o._n(c)})},error:function(c){return fe(function(){return o._e(c)})},complete:function(){return fe(function(){return o._c()})}})}return a}}function ps(){var e;return typeof window!="undefined"?e=window:typeof global!="undefined"?e=global:e=this,e.Cyclejs=e.Cyclejs||{},e=e.Cyclejs,e.adaptStream=e.adaptStream||function(t){return t},e}function hs(e){return ps().adaptStream(e)}function ds(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=$.create());return t}function ys(e,t){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n](t[n],n),r[n]&&typeof r[n]=="object"&&(r[n]._isCycleSource=n));return r}function ms(e){for(var t in e)e.hasOwnProperty(t)&&e[t]&&typeof e[t].shamefullySendNext=="function"&&(e[t]=hs(e[t]));return e}function vs(e,t){var r=cn(),n=Object.keys(e).filter(function(a){return!!t[a]}),o={},i={};n.forEach(function(a){o[a]={_n:[],_e:[]},i[a]={next:function(u){return o[a]._n.push(u)},error:function(u){return o[a]._e.push(u)},complete:function(){}}});var s=n.map(function(a){return $.fromObservable(e[a]).subscribe(i[a])});return n.forEach(function(a){var u=t[a],c=function(y){r(function(){return u._n(y)})},p=function(y){r(function(){(console.error||console.log)(y),u._e(y)})};o[a]._n.forEach(c),o[a]._e.forEach(p),i[a].next=c,i[a].error=p,i[a]._n=c,i[a]._e=p}),o=null,function(){s.forEach(function(u){return u.unsubscribe()})}}function _s(e){Object.keys(e).forEach(function(t){return e[t]._c()})}function gs(e){for(var t in e)e.hasOwnProperty(t)&&e[t]&&e[t].dispose&&e[t].dispose()}function fn(e){return Object.keys(e).length===0}function bs(e,t){if(typeof e!="function")throw new Error("First argument given to Cycle must be the 'main' function.");if(typeof t!="object"||t===null)throw new Error("Second argument given to Cycle must be an object with driver functions as properties.");if(fn(t))throw new Error("Second argument given to Cycle must be an object with at least one driver function declared as a property.");var r=ws(t),n=e(r.sources);typeof window!="undefined"&&(window.Cyclejs=window.Cyclejs||{},window.Cyclejs.sinks=n);function o(){var i=r.run(n);return function(){i(),r.dispose()}}return{sinks:n,sources:r.sources,run:o}}function ws(e){if(typeof e!="object"||e===null)throw new Error("Argument given to setupReusable must be an object with driver functions as properties.");if(fn(e))throw new Error("Argument given to setupReusable must be an object with at least one driver function declared as a property.");var t=ds(e),r=ys(e,t),n=ms(r);function o(s){return vs(s,t)}function i(){gs(n),_s(t)}return{sources:n,run:o,dispose:i}}function Ss(e,t){var r=bs(e,t);return typeof window!="undefined"&&window.CyclejsDevTool_startGraphSerializer&&window.CyclejsDevTool_startGraphSerializer(r.sinks),r.run()}function $s(e,t){return document.createElement(e,t)}function As(e,t,r){return document.createElementNS(e,t,r)}function Os(){return lt(document.createDocumentFragment())}function Es(e){return document.createTextNode(e)}function Ps(e){return document.createComment(e)}function Ns(e,t,r){if(Y(e)){let n=e;for(;n&&Y(n);)n=lt(n).parent;e=n!=null?n:e}Y(t)&&(t=lt(t,e)),r&&Y(r)&&(r=lt(r).firstChildNode),e.insertBefore(t,r)}function Cs(e,t){e.removeChild(t)}function Is(e,t){Y(t)&&(t=lt(t,e)),e.appendChild(t)}function ln(e){if(Y(e)){for(;e&&Y(e);)e=lt(e).parent;return e!=null?e:null}return e.parentNode}function js(e){var t;if(Y(e)){const r=lt(e),n=ln(r);if(n&&r.lastChildNode){const o=Array.from(n.childNodes),i=o.indexOf(r.lastChildNode);return(t=o[i+1])!==null&&t!==void 0?t:null}return null}return e.nextSibling}function ks(e){return e.tagName}function xs(e,t){e.textContent=t}function Ds(e){return e.textContent}function Ts(e){return e.nodeType===1}function Ms(e){return e.nodeType===3}function Fs(e){return e.nodeType===8}function Y(e){return e.nodeType===11}function lt(e,t){var r,n,o;const i=e;return(r=i.parent)!==null&&r!==void 0||(i.parent=t!=null?t:null),(n=i.firstChildNode)!==null&&n!==void 0||(i.firstChildNode=e.firstChild),(o=i.lastChildNode)!==null&&o!==void 0||(i.lastChildNode=e.lastChild),i}const pn={createElement:$s,createElementNS:As,createTextNode:Es,createDocumentFragment:Os,createComment:Ps,insertBefore:Ns,removeChild:Cs,appendChild:Is,parentNode:ln,nextSibling:js,tagName:ks,setTextContent:xs,getTextContent:Ds,isElement:Ts,isText:Ms,isComment:Fs,isDocumentFragment:Y};function J(e,t,r,n,o){const i=t===void 0?void 0:t.key;return{sel:e,data:t,children:r,text:n,elm:o,key:i}}const Oe=Array.isArray;function Wt(e){return typeof e=="string"||typeof e=="number"||e instanceof String||e instanceof Number}function le(e){return e===void 0}function G(e){return e!==void 0}const pe=J("",{},[],void 0,void 0);function Pt(e,t){var r,n;const o=e.key===t.key,i=((r=e.data)===null||r===void 0?void 0:r.is)===((n=t.data)===null||n===void 0?void 0:n.is),s=e.sel===t.sel,a=!e.sel&&e.sel===t.sel?typeof e.text==typeof t.text:!0;return s&&o&&i&&a}function Ls(){throw new Error("The document fragment is not supported on this platform.")}function Rs(e,t){return e.isElement(t)}function Bs(e,t){return e.isDocumentFragment(t)}function Us(e,t,r){var n;const o={};for(let i=t;i<=r;++i){const s=(n=e[i])===null||n===void 0?void 0:n.key;s!==void 0&&(o[s]=i)}return o}const Ws=["create","update","remove","destroy","pre","post"];function Gs(e,t,r){const n={create:[],update:[],remove:[],destroy:[],pre:[],post:[]},o=t!==void 0?t:pn;for(const l of Ws)for(const f of e){const m=f[l];m!==void 0&&n[l].push(m)}function i(l){const f=l.id?"#"+l.id:"",m=l.getAttribute("class"),v=m?"."+m.split(" ").join("."):"";return J(o.tagName(l).toLowerCase()+f+v,{},[],void 0,l)}function s(l){return J(void 0,{},[],void 0,l)}function a(l,f){return function(){if(--f===0){const v=o.parentNode(l);o.removeChild(v,l)}}}function u(l,f){var m,v,b,w;let S,A=l.data;if(A!==void 0){const P=(m=A.hook)===null||m===void 0?void 0:m.init;G(P)&&(P(l),A=l.data)}const O=l.children,E=l.sel;if(E==="!")le(l.text)&&(l.text=""),l.elm=o.createComment(l.text);else if(E!==void 0){const P=E.indexOf("#"),j=E.indexOf(".",P),T=P>0?P:E.length,D=j>0?j:E.length,M=P!==-1||j!==-1?E.slice(0,Math.min(T,D)):E,W=l.elm=G(A)&&G(S=A.ns)?o.createElementNS(S,M,A):o.createElement(M,A);for(T<D&&W.setAttribute("id",E.slice(T+1,D)),j>0&&W.setAttribute("class",E.slice(D+1).replace(/\./g," ")),S=0;S<n.create.length;++S)n.create[S](pe,l);if(Oe(O))for(S=0;S<O.length;++S){const re=O[S];re!=null&&o.appendChild(W,u(re,f))}else Wt(l.text)&&o.appendChild(W,o.createTextNode(l.text));const nt=l.data.hook;G(nt)&&((v=nt.create)===null||v===void 0||v.call(nt,pe,l),nt.insert&&f.push(l))}else if(((b=r==null?void 0:r.experimental)===null||b===void 0?void 0:b.fragments)&&l.children){for(l.elm=((w=o.createDocumentFragment)!==null&&w!==void 0?w:Ls)(),S=0;S<n.create.length;++S)n.create[S](pe,l);for(S=0;S<l.children.length;++S){const P=l.children[S];P!=null&&o.appendChild(l.elm,u(P,f))}}else l.elm=o.createTextNode(l.text);return l.elm}function c(l,f,m,v,b,w){for(;v<=b;++v){const S=m[v];S!=null&&o.insertBefore(l,u(S,w),f)}}function p(l){var f,m;const v=l.data;if(v!==void 0){(m=(f=v==null?void 0:v.hook)===null||f===void 0?void 0:f.destroy)===null||m===void 0||m.call(f,l);for(let b=0;b<n.destroy.length;++b)n.destroy[b](l);if(l.children!==void 0)for(let b=0;b<l.children.length;++b){const w=l.children[b];w!=null&&typeof w!="string"&&p(w)}}}function y(l,f,m,v){for(var b,w;m<=v;++m){let S,A;const O=f[m];if(O!=null)if(G(O.sel)){p(O),S=n.remove.length+1,A=a(O.elm,S);for(let P=0;P<n.remove.length;++P)n.remove[P](O,A);const E=(w=(b=O==null?void 0:O.data)===null||b===void 0?void 0:b.hook)===null||w===void 0?void 0:w.remove;G(E)?E(O,A):A()}else O.children?(p(O),y(l,O.children,0,O.children.length-1)):o.removeChild(l,O.elm)}}function h(l,f,m,v){let b=0,w=0,S=f.length-1,A=f[0],O=f[S],E=m.length-1,P=m[0],j=m[E],T,D,M,W;for(;b<=S&&w<=E;)A==null?A=f[++b]:O==null?O=f[--S]:P==null?P=m[++w]:j==null?j=m[--E]:Pt(A,P)?(d(A,P,v),A=f[++b],P=m[++w]):Pt(O,j)?(d(O,j,v),O=f[--S],j=m[--E]):Pt(A,j)?(d(A,j,v),o.insertBefore(l,A.elm,o.nextSibling(O.elm)),A=f[++b],j=m[--E]):Pt(O,P)?(d(O,P,v),o.insertBefore(l,O.elm,A.elm),O=f[--S],P=m[++w]):(T===void 0&&(T=Us(f,b,S)),D=T[P.key],le(D)?o.insertBefore(l,u(P,v),A.elm):(M=f[D],M.sel!==P.sel?o.insertBefore(l,u(P,v),A.elm):(d(M,P,v),f[D]=void 0,o.insertBefore(l,M.elm,A.elm))),P=m[++w]);w<=E&&(W=m[E+1]==null?null:m[E+1].elm,c(l,W,m,w,E,v)),b<=S&&y(l,f,b,S)}function d(l,f,m){var v,b,w,S,A,O,E,P;const j=(v=f.data)===null||v===void 0?void 0:v.hook;(b=j==null?void 0:j.prepatch)===null||b===void 0||b.call(j,l,f);const T=f.elm=l.elm;if(l===f)return;if(f.data!==void 0||G(f.text)&&f.text!==l.text){(w=f.data)!==null&&w!==void 0||(f.data={}),(S=l.data)!==null&&S!==void 0||(l.data={});for(let W=0;W<n.update.length;++W)n.update[W](l,f);(E=(O=(A=f.data)===null||A===void 0?void 0:A.hook)===null||O===void 0?void 0:O.update)===null||E===void 0||E.call(O,l,f)}const D=l.children,M=f.children;le(f.text)?G(D)&&G(M)?D!==M&&h(T,D,M,m):G(M)?(G(l.text)&&o.setTextContent(T,""),c(T,null,M,0,M.length-1,m)):G(D)?y(T,D,0,D.length-1):G(l.text)&&o.setTextContent(T,""):l.text!==f.text&&(G(D)&&y(T,D,0,D.length-1),o.setTextContent(T,f.text)),(P=j==null?void 0:j.postpatch)===null||P===void 0||P.call(j,l,f)}return function(f,m){let v,b,w;const S=[];for(v=0;v<n.pre.length;++v)n.pre[v]();for(Rs(o,f)?f=i(f):Bs(o,f)&&(f=s(f)),Pt(f,m)?d(f,m,S):(b=f.elm,w=o.parentNode(b),u(m,S),w!==null&&(o.insertBefore(w,m.elm,o.nextSibling(b)),y(w,[f],0,0))),v=0;v<S.length;++v)S[v].data.hook.insert(S[v]);for(v=0;v<n.post.length;++v)n.post[v]();return m}}function Me(e,t,r){if(e.ns="http://www.w3.org/2000/svg",r!=="foreignObject"&&t!==void 0)for(let n=0;n<t.length;++n){const o=t[n];if(typeof o=="string")continue;const i=o.data;i!==void 0&&Me(i,o.children,o.sel)}}function Z(e,t,r){let n={},o,i,s;if(r!==void 0?(t!==null&&(n=t),Oe(r)?o=r:Wt(r)?i=r.toString():r&&r.sel&&(o=[r])):t!=null&&(Oe(t)?o=t:Wt(t)?i=t.toString():t&&t.sel?o=[t]:n=t),o!==void 0)for(s=0;s<o.length;++s)Wt(o[s])&&(o[s]=J(void 0,void 0,void 0,o[s],void 0));return e[0]==="s"&&e[1]==="v"&&e[2]==="g"&&(e.length===3||e[3]==="."||e[3]==="#")&&Me(n,o,e),J(e,n,o,i,void 0)}function Ee(e,t){const r=t!==void 0?t:pn;let n;if(r.isElement(e)){const o=e.id?"#"+e.id:"",i=e.getAttribute("class"),s=i?"."+i.split(" ").join("."):"",a=r.tagName(e).toLowerCase()+o+s,u={},c={},p={},y=[];let h,d,l;const f=e.attributes,m=e.childNodes;for(d=0,l=f.length;d<l;d++)h=f[d].nodeName,h[0]==="d"&&h[1]==="a"&&h[2]==="t"&&h[3]==="a"&&h[4]==="-"?c[h.slice(5)]=f[d].nodeValue||"":h!=="id"&&h!=="class"&&(u[h]=f[d].nodeValue);for(d=0,l=m.length;d<l;d++)y.push(Ee(m[d],t));return Object.keys(u).length>0&&(p.attrs=u),Object.keys(c).length>0&&(p.dataset=c),a[0]==="s"&&a[1]==="v"&&a[2]==="g"&&(a.length===3||a[3]==="."||a[3]==="#")&&Me(p,y,a),J(a,p,y,void 0,e)}else return r.isText(e)?(n=r.getTextContent(e),J(void 0,void 0,void 0,n,e)):r.isComment(e)?(n=r.getTextContent(e),J("!",{},[],n,e)):J("",{},[],void 0,e)}const qs="http://www.w3.org/1999/xlink",zs="http://www.w3.org/XML/1998/namespace",nr=58,Hs=120;function or(e,t){let r;const n=t.elm;let o=e.data.attrs,i=t.data.attrs;if(!(!o&&!i)&&o!==i){o=o||{},i=i||{};for(r in i){const s=i[r];o[r]!==s&&(s===!0?n.setAttribute(r,""):s===!1?n.removeAttribute(r):r.charCodeAt(0)!==Hs?n.setAttribute(r,s):r.charCodeAt(3)===nr?n.setAttributeNS(zs,r,s):r.charCodeAt(5)===nr?n.setAttributeNS(qs,r,s):n.setAttribute(r,s))}for(r in o)r in i||n.removeAttribute(r)}}const Vs={create:or,update:or};function ir(e,t){let r,n;const o=t.elm;let i=e.data.class,s=t.data.class;if(!(!i&&!s)&&i!==s){i=i||{},s=s||{};for(n in i)i[n]&&!Object.prototype.hasOwnProperty.call(s,n)&&o.classList.remove(n);for(n in s)r=s[n],r!==i[n]&&o.classList[r?"add":"remove"](n)}}const Js={create:ir,update:ir},sr=/[A-Z]/g;function ar(e,t){const r=t.elm;let n=e.data.dataset,o=t.data.dataset,i;if(!n&&!o||n===o)return;n=n||{},o=o||{};const s=r.dataset;for(i in n)o[i]||(s?i in s&&delete s[i]:r.removeAttribute("data-"+i.replace(sr,"-$&").toLowerCase()));for(i in o)n[i]!==o[i]&&(s?s[i]=o[i]:r.setAttribute("data-"+i.replace(sr,"-$&").toLowerCase(),o[i]))}const Ks={create:ar,update:ar};function ur(e,t){let r,n,o;const i=t.elm;let s=e.data.props,a=t.data.props;if(!(!s&&!a)&&s!==a){s=s||{},a=a||{};for(r in a)n=a[r],o=s[r],o!==n&&(r!=="value"||i[r]!==n)&&(i[r]=n)}}const Ys={create:ur,update:ur},cr=typeof window!="undefined"&&window.requestAnimationFrame.bind(window)||setTimeout,Xs=function(e){cr(function(){cr(e)})};let Pe=!1;function Zs(e,t,r){Xs(function(){e[t]=r})}function fr(e,t){let r,n;const o=t.elm;let i=e.data.style,s=t.data.style;if(!i&&!s||i===s)return;i=i||{},s=s||{};const a="delayed"in i;for(n in i)s[n]||(n[0]==="-"&&n[1]==="-"?o.style.removeProperty(n):o.style[n]="");for(n in s)if(r=s[n],n==="delayed"&&s.delayed)for(const u in s.delayed)r=s.delayed[u],(!a||r!==i.delayed[u])&&Zs(o.style,u,r);else n!=="remove"&&r!==i[n]&&(n[0]==="-"&&n[1]==="-"?o.style.setProperty(n,r):o.style[n]=r)}function Qs(e){let t,r;const n=e.elm,o=e.data.style;if(!(!o||!(t=o.destroy)))for(r in t)n.style[r]=t[r]}function ta(e,t){const r=e.data.style;if(!r||!r.remove){t();return}Pe||(e.elm.offsetLeft,Pe=!0);let n;const o=e.elm;let i=0;const s=r.remove;let a=0;const u=[];for(n in s)u.push(n),o.style[n]=s[n];const p=getComputedStyle(o)["transition-property"].split(", ");for(;i<p.length;++i)u.indexOf(p[i])!==-1&&a++;o.addEventListener("transitionend",function(y){y.target===o&&--a,a===0&&t()})}function ea(){Pe=!1}const ra={pre:ea,create:fr,update:fr,destroy:Qs,remove:ta};function Kt(e,t,r,n,o){r===void 0&&(r=!1),n===void 0&&(n=!1),o===void 0&&(o=!1);var i=null;return K.create({start:function(a){n?i=function(c){dn(c,n),a.next(c)}:i=function(c){a.next(c)},e.addEventListener(t,i,{capture:r,passive:o})},stop:function(){e.removeEventListener(t,i,r),i=null}})}function hn(e,t){for(var r=Object.keys(e),n=r.length,o=0;o<n;o++){var i=r[o];if(typeof e[i]=="object"&&typeof t[i]=="object"){if(!hn(e[i],t[i]))return!1}else if(e[i]!==t[i])return!1}return!0}function dn(e,t){if(t)if(typeof t=="boolean")e.preventDefault();else if(na(t))t(e)&&e.preventDefault();else if(typeof t=="object")hn(t,e)&&e.preventDefault();else throw new Error("preventDefault has to be either a boolean, predicate function or object")}function na(e){return typeof e=="function"}var oa=function(){function e(t){this._name=t}return e.prototype.select=function(t){return this},e.prototype.elements=function(){var t=z($.of([document]));return t._isCycleSource=this._name,t},e.prototype.element=function(){var t=z($.of(document));return t._isCycleSource=this._name,t},e.prototype.events=function(t,r,n){r===void 0&&(r={});var o;o=Kt(document,t,r.useCapture,r.preventDefault);var i=z(o);return i._isCycleSource=this._name,i},e}(),ia=function(){function e(t){this._name=t}return e.prototype.select=function(t){return this},e.prototype.elements=function(){var t=z($.of([document.body]));return t._isCycleSource=this._name,t},e.prototype.element=function(){var t=z($.of(document.body));return t._isCycleSource=this._name,t},e.prototype.events=function(t,r,n){r===void 0&&(r={});var o;o=Kt(document.body,t,r.useCapture,r.preventDefault);var i=z(o);return i._isCycleSource=this._name,i},e}();function sa(e){var t=1,r=11;return typeof HTMLElement=="object"?e instanceof HTMLElement||e instanceof DocumentFragment:e&&typeof e=="object"&&e!==null&&(e.nodeType===t||e.nodeType===r)&&typeof e.nodeName=="string"}function aa(e){return e.length>1&&(e[0]==="."||e[0]==="#")}function ua(e){return e.nodeType===11}function ca(e){if(typeof e!="string"&&!sa(e))throw new Error("Given container is not a DOM element neither a selector string.")}function fa(e){var t=typeof e=="string"?document.querySelector(e):e;if(typeof e=="string"&&t===null)throw new Error("Cannot render into unknown element `"+e+"`");return t}function yn(e){for(var t="",r=e.length-1;r>=0&&e[r].type==="selector";r--)t=e[r].scope+" "+t;return t.trim()}function Fe(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==t[r].type||e[r].scope!==t[r].scope)return!1;return!0}var mn=function(){function e(t,r){this.namespace=t,this.isolateModule=r,this._namespace=t.filter(function(n){return n.type!=="selector"})}return e.prototype.isDirectlyInScope=function(t){var r=this.isolateModule.getNamespace(t);if(!r||this._namespace.length>r.length||!Fe(this._namespace,r.slice(0,this._namespace.length)))return!1;for(var n=this._namespace.length;n<r.length;n++)if(r[n].type==="total")return!1;return!0},e}();function la(e){return Array.prototype.slice.call(e)}var vn=function(){function e(t,r){this.namespace=t,this.isolateModule=r}return e.prototype.call=function(){var t=this.namespace,r=yn(t),n=new mn(t,this.isolateModule),o=this.isolateModule.getElement(t.filter(function(i){return i.type!=="selector"}));return o===void 0?[]:r===""?[o]:la(o.querySelectorAll(r)).filter(n.isDirectlyInScope,n).concat(o.matches(r)?[o]:[])},e}(),kt=globalThis&&globalThis.__assign||function(){return kt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},kt.apply(this,arguments)};function pa(e){return function(t,r){return r===":root"?t:t.map(function(n){if(!n)return n;var o=_n(r),i=kt({},n,{data:kt({},n.data,{isolate:!n.data||!Array.isArray(n.data.isolate)?e.concat([o]):n.data.isolate})});return kt({},i,{key:i.key!==void 0?i.key:JSON.stringify(i.data.isolate)})})}}function _n(e){return{type:aa(e)?"sibling":"total",scope:e}}var ha=function(){function e(t,r,n,o,i,s){n===void 0&&(n=[]),this._rootElement$=t,this._sanitation$=r,this._namespace=n,this._isolateModule=o,this._eventDelegator=i,this._name=s,this.isolateSource=function(a,u){return new e(a._rootElement$,a._sanitation$,a._namespace.concat(_n(u)),a._isolateModule,a._eventDelegator,a._name)},this.isolateSink=pa(this._namespace)}return e.prototype._elements=function(){if(this._namespace.length===0)return this._rootElement$.map(function(r){return[r]});var t=new vn(this._namespace,this._isolateModule);return this._rootElement$.map(function(){return t.call()})},e.prototype.elements=function(){var t=z(this._elements().remember());return t._isCycleSource=this._name,t},e.prototype.element=function(){var t=z(this._elements().filter(function(r){return r.length>0}).map(function(r){return r[0]}).remember());return t._isCycleSource=this._name,t},Object.defineProperty(e.prototype,"namespace",{get:function(){return this._namespace},enumerable:!0,configurable:!0}),e.prototype.select=function(t){if(typeof t!="string")throw new Error("DOM driver's select() expects the argument to be a string as a CSS selector");if(t==="document")return new oa(this._name);if(t==="body")return new ia(this._name);var r=t===":root"?[]:this._namespace.concat({type:"selector",scope:t.trim()});return new e(this._rootElement$,this._sanitation$,r,this._isolateModule,this._eventDelegator,this._name)},e.prototype.events=function(t,r,n){if(r===void 0&&(r={}),typeof t!="string")throw new Error("DOM driver's events() expects argument to be a string representing the event type to listen for.");var o=this._eventDelegator.addEventListener(t,this._namespace,r,n),i=z(o);return i._isCycleSource=this._name,i},e.prototype.dispose=function(){this._sanitation$.shamefullySendNext(null)},e}(),At={},da=V&&V.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)n[o]=i[s];return n};Object.defineProperty(At,"__esModule",{value:!0});At.SampleCombineOperator=At.SampleCombineListener=void 0;var ya=q,Q={},gn=function(){function e(t,r){this.i=t,this.p=r,r.ils[t]=this}return e.prototype._n=function(t){var r=this.p;r.out!==Q&&r.up(t,this.i)},e.prototype._e=function(t){this.p._e(t)},e.prototype._c=function(){this.p.down(this.i,this)},e}();At.SampleCombineListener=gn;var bn=function(){function e(t,r){this.type="sampleCombine",this.ins=t,this.others=r,this.out=Q,this.ils=[],this.Nn=0,this.vals=[]}return e.prototype._start=function(t){this.out=t;for(var r=this.others,n=this.Nn=r.length,o=this.vals=new Array(n),i=0;i<n;i++)o[i]=Q,r[i]._add(new gn(i,this));this.ins._add(this)},e.prototype._stop=function(){var t=this.others,r=t.length,n=this.ils;this.ins._remove(this);for(var o=0;o<r;o++)t[o]._remove(n[o]);this.out=Q,this.vals=[],this.ils=[]},e.prototype._n=function(t){var r=this.out;r!==Q&&(this.Nn>0||r._n(da([t],this.vals)))},e.prototype._e=function(t){var r=this.out;r!==Q&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==Q&&t._c()},e.prototype.up=function(t,r){var n=this.vals[r];this.Nn>0&&n===Q&&this.Nn--,this.vals[r]=t},e.prototype.down=function(t,r){this.others[t]._remove(r)},e}();At.SampleCombineOperator=bn;var wn;wn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return function(o){return new ya.Stream(new bn(o,t))}};var ma=At.default=wn;globalThis&&globalThis.__assign;function Sn(e){if(!e.sel)return{tagName:"",id:"",className:""};var t=e.sel,r=t.indexOf("#"),n=t.indexOf(".",r),o=r>0?r:t.length,i=n>0?n:t.length,s=r!==-1||n!==-1?t.slice(0,Math.min(o,i)):t,a=o<i?t.slice(o+1,i):void 0,u=n>0?t.slice(i+1).replace(/\./g," "):void 0;return{tagName:s,id:a,className:u}}function va(e){var t=Sn(e).className,r=t===void 0?"":t;if(!e.data)return r;var n=e.data,o=n.class,i=n.props;if(o){var s=Object.keys(o).filter(function(a){return o[a]});r+=" "+s.join(" ")}return i&&i.className&&(r+=" "+i.className),r&&r.trim()}var Ct;typeof self!="undefined"?Ct=self:typeof window!="undefined"?Ct=window:typeof global!="undefined"?Ct=global:Ct=Function("return this")();var lr=Ct.Symbol;typeof lr=="function"&&lr("parent");var _a=function(){function e(t){this.rootElement=t}return e.prototype.call=function(t){if(ua(this.rootElement))return this.wrapDocFrag(t===null?[]:[t]);if(t===null)return this.wrap([]);var r=Sn(t),n=r.tagName,o=r.id,i=va(t),s=t.data||{},a=s.props||{},u=a.id,c=u===void 0?o:u,p=typeof c=="string"&&c.toUpperCase()===this.rootElement.id.toUpperCase()&&n.toUpperCase()===this.rootElement.tagName.toUpperCase()&&i.toUpperCase()===this.rootElement.className.toUpperCase();return p?t:this.wrap([t])},e.prototype.wrapDocFrag=function(t){return J("",{isolate:[]},t,void 0,this.rootElement)},e.prototype.wrap=function(t){var r=this.rootElement,n=r.tagName,o=r.id,i=r.className,s=o?"#"+o:"",a=i?"."+i.split(" ").join("."):"",u=Z(""+n.toLowerCase()+s+a,{},t);return u.data=u.data||{},u.data.isolate=u.data.isolate||[],u},e}(),ga=[ra,Js,Ys,Vs,Ks],$n=function(){function e(t){this.mapper=t,this.tree=[void 0,{}]}return e.prototype.set=function(t,r,n){for(var o=this.tree,i=n!==void 0?n:t.length,s=0;s<i;s++){var a=this.mapper(t[s]),u=o[1][a];u||(u=[void 0,{}],o[1][a]=u),o=u}o[0]=r},e.prototype.getDefault=function(t,r,n){return this.get(t,r,n)},e.prototype.get=function(t,r,n){for(var o=this.tree,i=n!==void 0?n:t.length,s=0;s<i;s++){var a=this.mapper(t[s]),u=o[1][a];if(!u)if(r)u=[void 0,{}],o[1][a]=u;else return;o=u}return r&&!o[0]&&(o[0]=r()),o[0]},e.prototype.delete=function(t){for(var r=this.tree,n=0;n<t.length-1;n++){var o=r[1][this.mapper(t[n])];if(!o)return;r=o}delete r[1][this.mapper(t[t.length-1])]},e}(),ba=function(){function e(){this.namespaceTree=new $n(function(t){return t.scope}),this.namespaceByElement=new Map,this.vnodesBeingRemoved=[]}return e.prototype.setEventDelegator=function(t){this.eventDelegator=t},e.prototype.insertElement=function(t,r){this.namespaceByElement.set(r,t),this.namespaceTree.set(t,r)},e.prototype.removeElement=function(t){this.namespaceByElement.delete(t);var r=this.getNamespace(t);r&&this.namespaceTree.delete(r)},e.prototype.getElement=function(t,r){return this.namespaceTree.get(t,void 0,r)},e.prototype.getRootElement=function(t){if(this.namespaceByElement.has(t))return t;for(var r=t;!this.namespaceByElement.has(r);)if(r=r.parentNode,r){if(r.tagName==="HTML")throw new Error("No root element found, this should not happen at all")}else return;return r},e.prototype.getNamespace=function(t){var r=this.getRootElement(t);if(!!r)return this.namespaceByElement.get(r)},e.prototype.createModule=function(){var t=this;return{create:function(r,n){var o=n.elm,i=n.data,s=i===void 0?{}:i,a=s.isolate;Array.isArray(a)&&t.insertElement(a,o)},update:function(r,n){var o=r.elm,i=r.data,s=i===void 0?{}:i,a=n.elm,u=n.data,c=u===void 0?{}:u,p=s.isolate,y=c.isolate;Fe(p,y)||Array.isArray(p)&&t.removeElement(o),Array.isArray(y)&&t.insertElement(y,a)},destroy:function(r){t.vnodesBeingRemoved.push(r)},remove:function(r,n){t.vnodesBeingRemoved.push(r),n()},post:function(){for(var r=t.vnodesBeingRemoved,n=r.length-1;n>=0;n--){var o=r[n],i=o.data!==void 0?o.data.isolation:void 0;i!==void 0&&t.removeElement(i),t.eventDelegator.removeElement(o.elm,i)}t.vnodesBeingRemoved=[]}}},e}(),wa=function(){function e(){this.arr=[],this.prios=[]}return e.prototype.add=function(t,r){for(var n=0;n<this.arr.length;n++)if(this.prios[n]<r){this.arr.splice(n,0,t),this.prios.splice(n,0,r);return}this.arr.push(t),this.prios.push(r)},e.prototype.forEach=function(t){for(var r=0;r<this.arr.length;r++)t(this.arr[r],r,this.arr)},e.prototype.delete=function(t){for(var r=0;r<this.arr.length;r++)if(this.arr[r]===t){this.arr.splice(r,1),this.prios.splice(r,1);return}},e}(),Yt=globalThis&&globalThis.__assign||function(){return Yt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Yt.apply(this,arguments)},Sa=["blur","canplay","canplaythrough","durationchange","emptied","ended","focus","load","loadeddata","loadedmetadata","mouseenter","mouseleave","pause","play","playing","ratechange","reset","scroll","seeked","seeking","stalled","submit","suspend","timeupdate","unload","volumechange","waiting"],$a=function(){function e(t,r){var n=this;this.rootElement$=t,this.isolateModule=r,this.virtualListeners=new $n(function(o){return o.scope}),this.nonBubblingListenersToAdd=new Set,this.virtualNonBubblingListener=[],this.isolateModule.setEventDelegator(this),this.domListeners=new Map,this.domListenersToAdd=new Map,this.nonBubblingListeners=new Map,t.addListener({next:function(o){n.origin!==o&&(n.origin=o,n.resetEventListeners(),n.domListenersToAdd.forEach(function(i,s){return n.setupDOMListener(s,i)}),n.domListenersToAdd.clear()),n.nonBubblingListenersToAdd.forEach(function(i){n.setupNonBubblingListener(i)})}})}return e.prototype.addEventListener=function(t,r,n,o){var i=$.never(),s,a=new mn(r,this.isolateModule),u=o===void 0?Sa.indexOf(t)===-1:o;if(u)return this.domListeners.has(t)||this.setupDOMListener(t,!!n.passive),s=this.insertListener(i,a,t,n),i;var c=[];this.nonBubblingListenersToAdd.forEach(function(A){return c.push(A)});for(var p=void 0,y=0,h=c.length,d=function(A){A[0];var O=A[1],E=A[2];return A[3],t===O&&Fe(E.namespace,r)};!p&&y<h;){var l=c[y];p=d(l)?l:p,y++}var f=p,m;if(f){var b=f[0];m=b}else{var v=new vn(r,this.isolateModule);s=this.insertListener(i,a,t,n),f=[i,t,v,s],m=i,this.nonBubblingListenersToAdd.add(f),this.setupNonBubblingListener(f)}var w=this,S=null;return $.create({start:function(A){S=m.subscribe(A)},stop:function(){f[0];var A=f[1],O=f[2];f[3];var E=O.call();E.forEach(function(P){var j=P.subs;j&&j[A]&&(j[A].unsubscribe(),delete j[A])}),w.nonBubblingListenersToAdd.delete(f),S.unsubscribe()}})},e.prototype.removeElement=function(t,r){r!==void 0&&this.virtualListeners.delete(r);var n=[];this.nonBubblingListeners.forEach(function(s,a){if(s.has(t)){n.push([a,t]);var u=t.subs;u&&Object.keys(u).forEach(function(c){u[c].unsubscribe()})}});for(var o=0;o<n.length;o++){var i=this.nonBubblingListeners.get(n[o][0]);!i||(i.delete(n[o][1]),i.size===0?this.nonBubblingListeners.delete(n[o][0]):this.nonBubblingListeners.set(n[o][0],i))}},e.prototype.insertListener=function(t,r,n,o){var i=[],s=r._namespace,a=s.length;do i.push(this.getVirtualListeners(n,s,!0,a)),a--;while(a>=0&&s[a].type!=="total");for(var u=Yt({},o,{scopeChecker:r,subject:t,bubbles:!!o.bubbles,useCapture:!!o.useCapture,passive:!!o.passive}),c=0;c<i.length;c++)i[c].add(u,s.length);return u},e.prototype.getVirtualListeners=function(t,r,n,o){n===void 0&&(n=!1);var i=o!==void 0?o:r.length;if(!n)for(var s=i-1;s>=0;s--){if(r[s].type==="total"){i=s+1;break}i=s}var a=this.virtualListeners.getDefault(r,function(){return new Map},i);return a.has(t)||a.set(t,new wa),a.get(t)},e.prototype.setupDOMListener=function(t,r){var n=this;if(this.origin){var o=Kt(this.origin,t,!1,!1,r).subscribe({next:function(i){return n.onEvent(t,i,r)},error:function(){},complete:function(){}});this.domListeners.set(t,{sub:o,passive:r})}else this.domListenersToAdd.set(t,r)},e.prototype.setupNonBubblingListener=function(t){t[0];var r=t[1],n=t[2],o=t[3];if(!!this.origin){var i=n.call();if(i.length){var s=this;i.forEach(function(a){var u,c=a.subs;if(!c||!c[r]){var p=Kt(a,r,!1,!1,o.passive).subscribe({next:function(h){return s.onEvent(r,h,!!o.passive,!1)},error:function(){},complete:function(){}});s.nonBubblingListeners.has(r)||s.nonBubblingListeners.set(r,new Map);var y=s.nonBubblingListeners.get(r);if(!y)return;y.set(a,{sub:p,destination:o}),a.subs=Yt({},c,(u={},u[r]=p,u))}})}}},e.prototype.resetEventListeners=function(){for(var t=this.domListeners.entries(),r=t.next();!r.done;){var n=r.value,o=n[0],i=n[1],s=i.sub,a=i.passive;s.unsubscribe(),this.setupDOMListener(o,a),r=t.next()}},e.prototype.putNonBubblingListener=function(t,r,n,o){var i=this.nonBubblingListeners.get(t);if(!!i){var s=i.get(r);s&&s.destination.passive===o&&s.destination.useCapture===n&&(this.virtualNonBubblingListener[0]=s.destination)}},e.prototype.onEvent=function(t,r,n,o){o===void 0&&(o=!0);var i=this.patchEvent(r),s=this.isolateModule.getRootElement(r.target);if(o){var a=this.isolateModule.getNamespace(r.target);if(!a)return;var u=this.getVirtualListeners(t,a);this.bubble(t,r.target,s,i,u,a,a.length-1,!0,n),this.bubble(t,r.target,s,i,u,a,a.length-1,!1,n)}else this.putNonBubblingListener(t,r.target,!0,n),this.doBubbleStep(t,r.target,s,i,this.virtualNonBubblingListener,!0,n),this.putNonBubblingListener(t,r.target,!1,n),this.doBubbleStep(t,r.target,s,i,this.virtualNonBubblingListener,!1,n),r.stopPropagation()},e.prototype.bubble=function(t,r,n,o,i,s,a,u,c){!u&&!o.propagationHasBeenStopped&&this.doBubbleStep(t,r,n,o,i,u,c);var p=n,y=a;if(r===n)if(a>=0&&s[a].type==="sibling")p=this.isolateModule.getElement(s,a),y--;else return;r.parentNode&&p&&this.bubble(t,r.parentNode,p,o,i,s,y,u,c),u&&!o.propagationHasBeenStopped&&this.doBubbleStep(t,r,n,o,i,u,c)},e.prototype.doBubbleStep=function(t,r,n,o,i,s,a){!n||(this.mutateEventCurrentTarget(o,r),i.forEach(function(u){if(u.passive===a&&u.useCapture===s){var c=yn(u.scopeChecker.namespace);!o.propagationHasBeenStopped&&u.scopeChecker.isDirectlyInScope(r)&&(c!==""&&r.matches(c)||c===""&&r===n)&&(dn(o,u.preventDefault),u.subject.shamefullySendNext(o))}}))},e.prototype.patchEvent=function(t){var r=t;r.propagationHasBeenStopped=!1;var n=r.stopPropagation;return r.stopPropagation=function(){n.call(this),this.propagationHasBeenStopped=!0},r},e.prototype.mutateEventCurrentTarget=function(t,r){try{Object.defineProperty(t,"currentTarget",{value:r,configurable:!0})}catch{console.log("please use event.ownerTarget")}t.ownerTarget=r},e}();function Aa(e){if(!Array.isArray(e))throw new Error("Optional modules option must be an array for snabbdom modules")}function Oa(e){if(!e||typeof e.addListener!="function"||typeof e.fold!="function")throw new Error("The DOM driver function expects as input a Stream of virtual DOM elements")}function Ea(e){return $.merge(e,$.never())}function Pa(e){return e.elm}function Na(e){(console.error||console.log)(e)}function Ca(){return $.create({start:function(e){document.readyState==="loading"?document.addEventListener("readystatechange",function(){var t=document.readyState;(t==="interactive"||t==="complete")&&(e.next(null),e.complete())}):(e.next(null),e.complete())},stop:function(){}})}function Ia(e){return e.data=e.data||{},e.data.isolate=[],e}function ja(e,t){t===void 0&&(t={}),ca(e);var r=t.modules||ga;Aa(r);var n=new ba,o=t&&t.snabbdomOptions||void 0,i=Gs([n.createModule()].concat(r),void 0,o),s=Ca(),a,u,c=$.create({start:function(y){u=new MutationObserver(function(){return y.next(null)})},stop:function(){u.disconnect()}});function p(y,h){h===void 0&&(h="DOM"),Oa(y);var d=$.create(),l=s.map(function(){var w=fa(e)||document.body;return a=new _a(w),w}),f=y.remember();f.addListener({}),c.addListener({});var m=l.map(function(w){return $.merge(f.endWhen(d),d).map(function(S){return a.call(S)}).startWith(Ia(Ee(w))).fold(i,Ee(w)).drop(1).map(Pa).startWith(w).map(function(S){return u.observe(S,{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0}),S}).compose(Ea)}).flatten(),v=an(s,c).endWhen(d).compose(ma(m)).map(function(w){return w[1]}).remember();v.addListener({error:t.reportSnabbdomError||Na});var b=new $a(v,n);return new ha(v,d,[],n,b,h)}return p}function ka(e){return typeof e=="string"&&e.length>0}function xa(e){return ka(e)&&(e[0]==="."||e[0]==="#")}function An(e){return function(r,n,o){var i=typeof r!="undefined",s=typeof n!="undefined",a=typeof o!="undefined";return xa(r)?s&&a?Z(e+r,n,o):s?Z(e+r,n):Z(e+r,{}):a?Z(e+r,n,o):s?Z(e,r,n):i?Z(e,r):Z(e,{})}}var Da=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","colorProfile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotlight","feTile","feTurbulence","filter","font","fontFace","fontFaceFormat","fontFaceName","fontFaceSrc","fontFaceUri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missingGlyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Ta=An("svg");Da.forEach(function(e){Ta[e]=An(e)});var Ma=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","meta","nav","noscript","object","ol","optgroup","option","p","param","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","u","ul","video"];Ma.forEach(function(e){});function Fa(e,t,r){const{combineList:n=["DOM"],globalList:o=["EVENTS"],stateSourceName:i="STATE",domSourceName:s="DOM",container:a="div",containerClass:u}=r;return c=>{const p=Date.now(),y={item:e,itemKey:(d,l)=>typeof d.id!="undefined"?d.id:l,itemScope:d=>d,channel:i,collectSinks:d=>Object.entries(c).reduce((l,[f,m])=>{if(n.includes(f)){const v=d.pickCombine(f);f===s&&a?l[s]=v.map(b=>({sel:a,data:u?{props:{className:u}}:{},children:b,key:p,text:void 0,elm:void 0})):l[f]=v}else l[f]=d.pickMerge(f);return l},{})},h={[i]:t};return o.forEach(d=>h[d]=null),n.forEach(d=>h[d]=null),La(y,h,c)}}function La(e,t,r){return rt(ss(e),t)(r)}var H=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},ee={},U={},On={exports:{}},En={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r){var n,o=r.Symbol;if(typeof o=="function")if(o.observable)n=o.observable;else{n=o.for("https://github.com/benlesh/symbol-observable");try{o.observable=n}catch{}}else n="@@observable";return n}})(En);(function(e){e.exports=En})(On);var pr=Object.prototype.toString,Pn=function(t){var r=pr.call(t),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&pr.call(t.callee)==="[object Function]"),n},he,hr;function Ra(){if(hr)return he;hr=1;var e;if(!Object.keys){var t=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=Pn,o=Object.prototype.propertyIsEnumerable,i=!o.call({toString:null},"toString"),s=o.call(function(){},"prototype"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],u=function(h){var d=h.constructor;return d&&d.prototype===h},c={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if(typeof window=="undefined")return!1;for(var h in window)try{if(!c["$"+h]&&t.call(window,h)&&window[h]!==null&&typeof window[h]=="object")try{u(window[h])}catch{return!0}}catch{return!0}return!1}(),y=function(h){if(typeof window=="undefined"||!p)return u(h);try{return u(h)}catch{return!1}};e=function(d){var l=d!==null&&typeof d=="object",f=r.call(d)==="[object Function]",m=n(d),v=l&&r.call(d)==="[object String]",b=[];if(!l&&!f&&!m)throw new TypeError("Object.keys called on a non-object");var w=s&&f;if(v&&d.length>0&&!t.call(d,0))for(var S=0;S<d.length;++S)b.push(String(S));if(m&&d.length>0)for(var A=0;A<d.length;++A)b.push(String(A));else for(var O in d)!(w&&O==="prototype")&&t.call(d,O)&&b.push(String(O));if(i)for(var E=y(d),P=0;P<a.length;++P)!(E&&a[P]==="constructor")&&t.call(d,a[P])&&b.push(a[P]);return b}}return he=e,he}var Ba=Array.prototype.slice,Ua=Pn,dr=Object.keys,Gt=dr?function(t){return dr(t)}:Ra(),yr=Object.keys;Gt.shim=function(){if(Object.keys){var t=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);t||(Object.keys=function(n){return Ua(n)?yr(Ba.call(n)):yr(n)})}else Object.keys=Gt;return Object.keys||Gt};var Wa=Gt,Ga=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var o=42;t[r]=o;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var i=Object.getOwnPropertySymbols(t);if(i.length!==1||i[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(t,r);if(s.value!==o||s.enumerable!==!0)return!1}return!0},mr=typeof Symbol!="undefined"&&Symbol,qa=Ga,za=function(){return typeof mr!="function"||typeof Symbol!="function"||typeof mr("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:qa()},vr={foo:{}},Ha=Object,Va=function(){return{__proto__:vr}.foo===vr.foo&&!({__proto__:null}instanceof Ha)},Ja="Function.prototype.bind called on incompatible ",de=Array.prototype.slice,Ka=Object.prototype.toString,Ya="[object Function]",Xa=function(t){var r=this;if(typeof r!="function"||Ka.call(r)!==Ya)throw new TypeError(Ja+r);for(var n=de.call(arguments,1),o,i=function(){if(this instanceof o){var p=r.apply(this,n.concat(de.call(arguments)));return Object(p)===p?p:this}else return r.apply(t,n.concat(de.call(arguments)))},s=Math.max(0,r.length-n.length),a=[],u=0;u<s;u++)a.push("$"+u);if(o=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var c=function(){};c.prototype=r.prototype,o.prototype=new c,c.prototype=null}return o},Za=Xa,Nn=Function.prototype.bind||Za,Qa=Nn,tu=Qa.call(Function.call,Object.prototype.hasOwnProperty),I,Ot=SyntaxError,Cn=Function,St=TypeError,ye=function(e){try{return Cn('"use strict"; return ('+e+").constructor;")()}catch{}},pt=Object.getOwnPropertyDescriptor;if(pt)try{pt({},"")}catch{pt=null}var me=function(){throw new St},eu=pt?function(){try{return arguments.callee,me}catch{try{return pt(arguments,"callee").get}catch{return me}}}():me,mt=za(),ru=Va(),L=Object.getPrototypeOf||(ru?function(e){return e.__proto__}:null),gt={},nu=typeof Uint8Array=="undefined"||!L?I:L(Uint8Array),ht={"%AggregateError%":typeof AggregateError=="undefined"?I:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?I:ArrayBuffer,"%ArrayIteratorPrototype%":mt&&L?L([][Symbol.iterator]()):I,"%AsyncFromSyncIteratorPrototype%":I,"%AsyncFunction%":gt,"%AsyncGenerator%":gt,"%AsyncGeneratorFunction%":gt,"%AsyncIteratorPrototype%":gt,"%Atomics%":typeof Atomics=="undefined"?I:Atomics,"%BigInt%":typeof BigInt=="undefined"?I:BigInt,"%BigInt64Array%":typeof BigInt64Array=="undefined"?I:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array=="undefined"?I:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?I:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?I:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?I:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?I:FinalizationRegistry,"%Function%":Cn,"%GeneratorFunction%":gt,"%Int8Array%":typeof Int8Array=="undefined"?I:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?I:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?I:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":mt&&L?L(L([][Symbol.iterator]())):I,"%JSON%":typeof JSON=="object"?JSON:I,"%Map%":typeof Map=="undefined"?I:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!mt||!L?I:L(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?I:Promise,"%Proxy%":typeof Proxy=="undefined"?I:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?I:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?I:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!mt||!L?I:L(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?I:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":mt&&L?L(""[Symbol.iterator]()):I,"%Symbol%":mt?Symbol:I,"%SyntaxError%":Ot,"%ThrowTypeError%":eu,"%TypedArray%":nu,"%TypeError%":St,"%Uint8Array%":typeof Uint8Array=="undefined"?I:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?I:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?I:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?I:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?I:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?I:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?I:WeakSet};if(L)try{null.error}catch(e){var ou=L(L(e));ht["%Error.prototype%"]=ou}var iu=function e(t){var r;if(t==="%AsyncFunction%")r=ye("async function () {}");else if(t==="%GeneratorFunction%")r=ye("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=ye("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var o=e("%AsyncGenerator%");o&&L&&(r=L(o.prototype))}return ht[t]=r,r},_r={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Dt=Nn,Xt=tu,su=Dt.call(Function.call,Array.prototype.concat),au=Dt.call(Function.apply,Array.prototype.splice),gr=Dt.call(Function.call,String.prototype.replace),Zt=Dt.call(Function.call,String.prototype.slice),uu=Dt.call(Function.call,RegExp.prototype.exec),cu=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,fu=/\\(\\)?/g,lu=function(t){var r=Zt(t,0,1),n=Zt(t,-1);if(r==="%"&&n!=="%")throw new Ot("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Ot("invalid intrinsic syntax, expected opening `%`");var o=[];return gr(t,cu,function(i,s,a,u){o[o.length]=a?gr(u,fu,"$1"):s||i}),o},pu=function(t,r){var n=t,o;if(Xt(_r,n)&&(o=_r[n],n="%"+o[0]+"%"),Xt(ht,n)){var i=ht[n];if(i===gt&&(i=iu(n)),typeof i=="undefined"&&!r)throw new St("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new Ot("intrinsic "+t+" does not exist!")},hu=function(t,r){if(typeof t!="string"||t.length===0)throw new St("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new St('"allowMissing" argument must be a boolean');if(uu(/^%?[^%]*%?$/,t)===null)throw new Ot("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=lu(t),o=n.length>0?n[0]:"",i=pu("%"+o+"%",r),s=i.name,a=i.value,u=!1,c=i.alias;c&&(o=c[0],au(n,su([0,1],c)));for(var p=1,y=!0;p<n.length;p+=1){var h=n[p],d=Zt(h,0,1),l=Zt(h,-1);if((d==='"'||d==="'"||d==="`"||l==='"'||l==="'"||l==="`")&&d!==l)throw new Ot("property names with quotes must have matching quotes");if((h==="constructor"||!y)&&(u=!0),o+="."+h,s="%"+o+"%",Xt(ht,s))a=ht[s];else if(a!=null){if(!(h in a)){if(!r)throw new St("base intrinsic for "+t+" exists, but the property is not available.");return}if(pt&&p+1>=n.length){var f=pt(a,h);y=!!f,y&&"get"in f&&!("originalValue"in f.get)?a=f.get:a=a[h]}else y=Xt(a,h),a=a[h];y&&!u&&(ht[s]=a)}}return a},du=hu,Ne=du("%Object.defineProperty%",!0),Ce=function(){if(Ne)try{return Ne({},"a",{value:1}),!0}catch{return!1}return!1};Ce.hasArrayLengthDefineBug=function(){if(!Ce())return null;try{return Ne([],"length",{value:1}).length!==1}catch{return!0}};var yu=Ce,mu=Wa,vu=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",_u=Object.prototype.toString,gu=Array.prototype.concat,In=Object.defineProperty,bu=function(e){return typeof e=="function"&&_u.call(e)==="[object Function]"},wu=yu(),jn=In&&wu,Su=function(e,t,r,n){if(t in e){if(n===!0){if(e[t]===r)return}else if(!bu(n)||!n())return}jn?In(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r},kn=function(e,t){var r=arguments.length>2?arguments[2]:{},n=mu(t);vu&&(n=gu.call(n,Object.getOwnPropertySymbols(t)));for(var o=0;o<n.length;o+=1)Su(e,n[o],t[n[o]],r[n[o]])};kn.supportsDescriptors=!!jn;var xn=kn,Dn=H,$u=Dn,Tn=function(){return typeof H!="object"||!H||H.Math!==Math||H.Array!==Array?$u:H},Au=xn,Ou=Tn,Eu=function(){var t=Ou();if(Au.supportsDescriptors){var r=Object.getOwnPropertyDescriptor(t,"globalThis");(!r||r.configurable&&(r.enumerable||!r.writable||globalThis!==t))&&Object.defineProperty(t,"globalThis",{configurable:!0,enumerable:!1,value:t,writable:!0})}else(typeof globalThis!="object"||globalThis!==t)&&(t.globalThis=t);return t},Pu=xn,Nu=Dn,Mn=Tn,Cu=Eu,Iu=Mn(),Fn=function(){return Iu};Pu(Fn,{getPolyfill:Mn,implementation:Nu,shim:Cu});var ju=Fn,ku=H&&H.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(U,"__esModule",{value:!0});U.NO_IL=U.NO=U.MemoryStream=U.Stream=void 0;var xu=On.exports,Du=ju,Rt=xu.default(Du.getPolyfill()),g={};U.NO=g;function B(){}function qt(e){for(var t=e.length,r=Array(t),n=0;n<t;++n)r[n]=e[n];return r}function Tu(e,t){return function(n){return e(n)&&t(n)}}function Le(e,t,r){try{return e.f(t)}catch(n){return r._e(n),g}}var ut={_n:B,_e:B,_c:B};U.NO_IL=ut;function br(e){e._start=function(r){r.next=r._n,r.error=r._e,r.complete=r._c,this.start(r)},e._stop=e.stop}var Mu=function(){function e(t,r){this._stream=t,this._listener=r}return e.prototype.unsubscribe=function(){this._stream._remove(this._listener)},e}(),Fu=function(){function e(t){this._listener=t}return e.prototype.next=function(t){this._listener._n(t)},e.prototype.error=function(t){this._listener._e(t)},e.prototype.complete=function(){this._listener._c()},e}(),Lu=function(){function e(t){this.type="fromObservable",this.ins=t,this.active=!1}return e.prototype._start=function(t){this.out=t,this.active=!0,this._sub=this.ins.subscribe(new Fu(t)),this.active||this._sub.unsubscribe()},e.prototype._stop=function(){this._sub&&this._sub.unsubscribe(),this.active=!1},e}(),Ru=function(){function e(t){this.type="merge",this.insArr=t,this.out=g,this.ac=0}return e.prototype._start=function(t){this.out=t;var r=this.insArr,n=r.length;this.ac=n;for(var o=0;o<n;o++)r[o]._add(this)},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=0;n<r;n++)t[n]._remove(this);this.out=g},e.prototype._n=function(t){var r=this.out;r!==g&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==g&&r._e(t)},e.prototype._c=function(){if(--this.ac<=0){var t=this.out;if(t===g)return;t._c()}},e}(),Bu=function(){function e(t,r,n){this.i=t,this.out=r,this.p=n,n.ils.push(this)}return e.prototype._n=function(t){var r=this.p,n=this.out;if(n!==g&&r.up(t,this.i)){var o=qt(r.vals);n._n(o)}},e.prototype._e=function(t){var r=this.out;r!==g&&r._e(t)},e.prototype._c=function(){var t=this.p;t.out!==g&&--t.Nc===0&&t.out._c()},e}(),Uu=function(){function e(t){this.type="combine",this.insArr=t,this.out=g,this.ils=[],this.Nc=this.Nn=0,this.vals=[]}return e.prototype.up=function(t,r){var n=this.vals[r],o=this.Nn?n===g?--this.Nn:this.Nn:0;return this.vals[r]=t,o===0},e.prototype._start=function(t){this.out=t;var r=this.insArr,n=this.Nc=this.Nn=r.length,o=this.vals=new Array(n);if(n===0)t._n([]),t._c();else for(var i=0;i<n;i++)o[i]=g,r[i]._add(new Bu(i,t,this))},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=this.ils,o=0;o<r;o++)t[o]._remove(n[o]);this.out=g,this.ils=[],this.vals=[]},e}(),Wu=function(){function e(t){this.type="fromArray",this.a=t}return e.prototype._start=function(t){for(var r=this.a,n=0,o=r.length;n<o;n++)t._n(r[n]);t._c()},e.prototype._stop=function(){},e}(),Gu=function(){function e(t){this.type="fromPromise",this.on=!1,this.p=t}return e.prototype._start=function(t){var r=this;this.on=!0,this.p.then(function(n){r.on&&(t._n(n),t._c())},function(n){t._e(n)}).then(B,function(n){setTimeout(function(){throw n})})},e.prototype._stop=function(){this.on=!1},e}(),qu=function(){function e(t){this.type="periodic",this.period=t,this.intervalID=-1,this.i=0}return e.prototype._start=function(t){var r=this;function n(){t._n(r.i++)}this.intervalID=setInterval(n,this.period)},e.prototype._stop=function(){this.intervalID!==-1&&clearInterval(this.intervalID),this.intervalID=-1,this.i=0},e}(),zu=function(){function e(t,r){this.type="debug",this.ins=t,this.out=g,this.s=B,this.l="",typeof r=="string"?this.l=r:typeof r=="function"&&(this.s=r)}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=g},e.prototype._n=function(t){var r=this.out;if(r!==g){var n=this.s,o=this.l;if(n!==B)try{n(t)}catch(i){r._e(i)}else o?console.log(o+":",t):console.log(t);r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==g&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==g&&t._c()},e}(),Hu=function(){function e(t,r){this.type="drop",this.ins=r,this.out=g,this.max=t,this.dropped=0}return e.prototype._start=function(t){this.out=t,this.dropped=0,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=g},e.prototype._n=function(t){var r=this.out;r!==g&&this.dropped++>=this.max&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==g&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==g&&t._c()},e}(),Vu=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(){this.op.end()},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.end()},e}(),Ju=function(){function e(t,r){this.type="endWhen",this.ins=r,this.out=g,this.o=t,this.oil=ut}return e.prototype._start=function(t){this.out=t,this.o._add(this.oil=new Vu(t,this)),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.o._remove(this.oil),this.out=g,this.oil=ut},e.prototype.end=function(){var t=this.out;t!==g&&t._c()},e.prototype._n=function(t){var r=this.out;r!==g&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==g&&r._e(t)},e.prototype._c=function(){this.end()},e}(),ve=function(){function e(t,r){this.type="filter",this.ins=r,this.out=g,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=g},e.prototype._n=function(t){var r=this.out;if(r!==g){var n=Le(this,t,r);n===g||!n||r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==g&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==g&&t._c()},e}(),Ku=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(t){this.out._n(t)},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.inner=g,this.op.less()},e}(),Yu=function(){function e(t){this.type="flatten",this.ins=t,this.out=g,this.open=!0,this.inner=g,this.il=ut}return e.prototype._start=function(t){this.out=t,this.open=!0,this.inner=g,this.il=ut,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.inner!==g&&this.inner._remove(this.il),this.out=g,this.open=!0,this.inner=g,this.il=ut},e.prototype.less=function(){var t=this.out;t!==g&&!this.open&&this.inner===g&&t._c()},e.prototype._n=function(t){var r=this.out;if(r!==g){var n=this,o=n.inner,i=n.il;o!==g&&i!==ut&&o._remove(i),(this.inner=t)._add(this.il=new Ku(r,this))}},e.prototype._e=function(t){var r=this.out;r!==g&&r._e(t)},e.prototype._c=function(){this.open=!1,this.less()},e}(),Xu=function(){function e(t,r,n){var o=this;this.type="fold",this.ins=n,this.out=g,this.f=function(i){return t(o.acc,i)},this.acc=this.seed=r}return e.prototype._start=function(t){this.out=t,this.acc=this.seed,t._n(this.acc),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=g,this.acc=this.seed},e.prototype._n=function(t){var r=this.out;if(r!==g){var n=Le(this,t,r);n!==g&&r._n(this.acc=n)}},e.prototype._e=function(t){var r=this.out;r!==g&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==g&&t._c()},e}(),Zu=function(){function e(t){this.type="last",this.ins=t,this.out=g,this.has=!1,this.val=g}return e.prototype._start=function(t){this.out=t,this.has=!1,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=g,this.val=g},e.prototype._n=function(t){this.has=!0,this.val=t},e.prototype._e=function(t){var r=this.out;r!==g&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==g&&(this.has?(t._n(this.val),t._c()):t._e(new Error("last() failed because input stream completed")))},e}(),Qu=function(){function e(t,r){this.type="map",this.ins=r,this.out=g,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=g},e.prototype._n=function(t){var r=this.out;if(r!==g){var n=Le(this,t,r);n!==g&&r._n(n)}},e.prototype._e=function(t){var r=this.out;r!==g&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==g&&t._c()},e}(),tc=function(){function e(t){this.type="remember",this.ins=t,this.out=g}return e.prototype._start=function(t){this.out=t,this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=g},e}(),ec=function(){function e(t,r){this.type="replaceError",this.ins=r,this.out=g,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=g},e.prototype._n=function(t){var r=this.out;r!==g&&r._n(t)},e.prototype._e=function(t){var r=this.out;if(r!==g)try{this.ins._remove(this),(this.ins=this.f(t))._add(this)}catch(n){r._e(n)}},e.prototype._c=function(){var t=this.out;t!==g&&t._c()},e}(),rc=function(){function e(t,r){this.type="startWith",this.ins=t,this.out=g,this.val=r}return e.prototype._start=function(t){this.out=t,this.out._n(this.val),this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=g},e}(),nc=function(){function e(t,r){this.type="take",this.ins=r,this.out=g,this.max=t,this.taken=0}return e.prototype._start=function(t){this.out=t,this.taken=0,this.max<=0?t._c():this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=g},e.prototype._n=function(t){var r=this.out;if(r!==g){var n=++this.taken;n<this.max?r._n(t):n===this.max&&(r._n(t),r._c())}},e.prototype._e=function(t){var r=this.out;r!==g&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==g&&t._c()},e}(),Re=function(){function e(t){this._prod=t||g,this._ils=[],this._stopID=g,this._dl=g,this._d=!1,this._target=null,this._err=g}return e.prototype._n=function(t){var r=this._ils,n=r.length;if(this._d&&this._dl._n(t),n==1)r[0]._n(t);else{if(n==0)return;for(var o=qt(r),i=0;i<n;i++)o[i]._n(t)}},e.prototype._e=function(t){if(this._err===g){this._err=t;var r=this._ils,n=r.length;if(this._x(),this._d&&this._dl._e(t),n==1)r[0]._e(t);else{if(n==0)return;for(var o=qt(r),i=0;i<n;i++)o[i]._e(t)}if(!this._d&&n==0)throw this._err}},e.prototype._c=function(){var t=this._ils,r=t.length;if(this._x(),this._d&&this._dl._c(),r==1)t[0]._c();else{if(r==0)return;for(var n=qt(t),o=0;o<r;o++)n[o]._c()}},e.prototype._x=function(){this._ils.length!==0&&(this._prod!==g&&this._prod._stop(),this._err=g,this._ils=[])},e.prototype._stopNow=function(){this._prod._stop(),this._err=g,this._stopID=g},e.prototype._add=function(t){var r=this._target;if(r)return r._add(t);var n=this._ils;if(n.push(t),!(n.length>1))if(this._stopID!==g)clearTimeout(this._stopID),this._stopID=g;else{var o=this._prod;o!==g&&o._start(this)}},e.prototype._remove=function(t){var r=this,n=this._target;if(n)return n._remove(t);var o=this._ils,i=o.indexOf(t);i>-1&&(o.splice(i,1),this._prod!==g&&o.length<=0?(this._err=g,this._stopID=setTimeout(function(){return r._stopNow()})):o.length===1&&this._pruneCycles())},e.prototype._pruneCycles=function(){this._hasNoSinks(this,[])&&this._remove(this._ils[0])},e.prototype._hasNoSinks=function(t,r){if(r.indexOf(t)!==-1)return!0;if(t.out===this)return!0;if(t.out&&t.out!==g)return this._hasNoSinks(t.out,r.concat(t));if(t._ils){for(var n=0,o=t._ils.length;n<o;n++)if(!this._hasNoSinks(t._ils[n],r.concat(t)))return!1;return!0}else return!1},e.prototype.ctor=function(){return this instanceof tt?tt:e},e.prototype.addListener=function(t){t._n=t.next||B,t._e=t.error||B,t._c=t.complete||B,this._add(t)},e.prototype.removeListener=function(t){this._remove(t)},e.prototype.subscribe=function(t){return this.addListener(t),new Mu(this,t)},e.prototype[Rt]=function(){return this},e.create=function(t){if(t){if(typeof t.start!="function"||typeof t.stop!="function")throw new Error("producer requires both start and stop functions");br(t)}return new e(t)},e.createWithMemory=function(t){return t&&br(t),new tt(t)},e.never=function(){return new e({_start:B,_stop:B})},e.empty=function(){return new e({_start:function(t){t._c()},_stop:B})},e.throw=function(t){return new e({_start:function(r){r._e(t)},_stop:B})},e.from=function(t){if(typeof t[Rt]=="function")return e.fromObservable(t);if(typeof t.then=="function")return e.fromPromise(t);if(Array.isArray(t))return e.fromArray(t);throw new TypeError("Type of input to from() must be an Array, Promise, or Observable")},e.of=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.fromArray(t)},e.fromArray=function(t){return new e(new Wu(t))},e.fromPromise=function(t){return new e(new Gu(t))},e.fromObservable=function(t){if(t.endWhen!==void 0)return t;var r=typeof t[Rt]=="function"?t[Rt]():t;return new e(new Lu(r))},e.periodic=function(t){return new e(new qu(t))},e.prototype._map=function(t){return new(this.ctor())(new Qu(t,this))},e.prototype.map=function(t){return this._map(t)},e.prototype.mapTo=function(t){var r=this.map(function(){return t}),n=r._prod;return n.type="mapTo",r},e.prototype.filter=function(t){var r=this._prod;return r instanceof ve?new e(new ve(Tu(r.f,t),r.ins)):new e(new ve(t,this))},e.prototype.take=function(t){return new(this.ctor())(new nc(t,this))},e.prototype.drop=function(t){return new e(new Hu(t,this))},e.prototype.last=function(){return new e(new Zu(this))},e.prototype.startWith=function(t){return new tt(new rc(this,t))},e.prototype.endWhen=function(t){return new(this.ctor())(new Ju(t,this))},e.prototype.fold=function(t,r){return new tt(new Xu(t,r,this))},e.prototype.replaceError=function(t){return new(this.ctor())(new ec(t,this))},e.prototype.flatten=function(){return new e(new Yu(this))},e.prototype.compose=function(t){return t(this)},e.prototype.remember=function(){return new tt(new tc(this))},e.prototype.debug=function(t){return new(this.ctor())(new zu(this,t))},e.prototype.imitate=function(t){if(t instanceof tt)throw new Error("A MemoryStream was given to imitate(), but it only supports a Stream. Read more about this restriction here: https://github.com/staltz/xstream#faq");this._target=t;for(var r=this._ils,n=r.length,o=0;o<n;o++)t._add(r[o]);this._ils=[]},e.prototype.shamefullySendNext=function(t){this._n(t)},e.prototype.shamefullySendError=function(t){this._e(t)},e.prototype.shamefullySendComplete=function(){this._c()},e.prototype.setDebugListener=function(t){t?(this._d=!0,t._n=t.next||B,t._e=t.error||B,t._c=t.complete||B,this._dl=t):(this._d=!1,this._dl=g)},e.merge=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new Ru(r))},e.combine=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new Uu(r))},e}();U.Stream=Re;var tt=function(e){ku(t,e);function t(r){var n=e.call(this,r)||this;return n._has=!1,n}return t.prototype._n=function(r){this._v=r,this._has=!0,e.prototype._n.call(this,r)},t.prototype._add=function(r){var n=this._target;if(n)return n._add(r);var o=this._ils;if(o.push(r),o.length>1){this._has&&r._n(this._v);return}if(this._stopID!==g)this._has&&r._n(this._v),clearTimeout(this._stopID),this._stopID=g;else if(this._has)r._n(this._v);else{var i=this._prod;i!==g&&i._start(this)}},t.prototype._stopNow=function(){this._has=!1,e.prototype._stopNow.call(this)},t.prototype._x=function(){this._has=!1,e.prototype._x.call(this)},t.prototype.map=function(r){return this._map(r)},t.prototype.mapTo=function(r){return e.prototype.mapTo.call(this,r)},t.prototype.take=function(r){return e.prototype.take.call(this,r)},t.prototype.endWhen=function(r){return e.prototype.endWhen.call(this,r)},t.prototype.replaceError=function(r){return e.prototype.replaceError.call(this,r)},t.prototype.remember=function(){return this},t.prototype.debug=function(r){return e.prototype.debug.call(this,r)},t}(Re);U.MemoryStream=tt;var oc=Re;U.default=oc;Object.defineProperty(ee,"__esModule",{value:!0});ee.DropRepeatsOperator=void 0;var ic=U,_e={},Ln=function(){function e(t,r){this.ins=t,this.type="dropRepeats",this.out=null,this.v=_e,this.isEq=r||function(n,o){return n===o}}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.v=_e},e.prototype._n=function(t){var r=this.out;if(!!r){var n=this.v;n!==_e&&this.isEq(t,n)||(this.v=t,r._n(t))}},e.prototype._e=function(t){var r=this.out;!r||r._e(t)},e.prototype._c=function(){var t=this.out;!t||t._c()},e}();ee.DropRepeatsOperator=Ln;function sc(e){return e===void 0&&(e=void 0),function(r){return new ic.Stream(new Ln(r,e))}}var Qt=ee.default=sc;function ac(e,t,r,n={}){const{switched:o=["DOM"],stateSourceName:i="STATE"}=n,s=typeof t;if(!t)throw new Error("Missing 'name$' parameter for switchable()");if(!(s==="string"||s==="function"||t instanceof K))throw new Error("Invalid 'name$' parameter for switchable(): expects Stream, String, or Function");if(t instanceof K){const a=t.compose(Qt()).startWith(r).remember();return u=>wr(e,u,a,o)}else{const a=s==="function"&&t||(u=>u[t]);return u=>{const c=u&&(typeof i=="string"&&u[i]||u.STATE||u.state).stream;if(!c instanceof K)throw new Error(`Could not find the state source: ${i}`);const p=c.map(a).filter(y=>typeof y=="string").compose(Qt()).startWith(r).remember();return wr(e,u,p,o,i)}}}function wr(e,t,r,n=["DOM"],o="STATE"){typeof n=="string"&&(n=[n]);const i=Object.entries(e).map(([a,u])=>{if(t[o]){const c=t[o].stream,p=$.combine(r,c).filter(([h,d])=>h==a).map(([h,d])=>d).remember(),y=new t[o].constructor(p,t[o]._name);return[a,u(k(N({},t),{state:y}))]}return[a,u(t)]});return Object.keys(t).reduce((a,u)=>{if(n.includes(u))a[u]=r.map(c=>{const p=i.find(([y,h])=>y===c);return p&&p[1][u]||$.never()}).flatten().remember().startWith(void 0);else{const c=i.filter(([p,y])=>y[u]!==void 0).map(([p,y])=>y[u]);a[u]=$.merge(...c)}return a},{})}var Rn={};Object.defineProperty(Rn,"__esModule",{value:!0});var uc=U,cc=function(){function e(t,r){this.dt=t,this.ins=r,this.type="delay",this.out=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null},e.prototype._n=function(t){var r=this.out;if(!!r)var n=setInterval(function(){r._n(t),clearInterval(n)},this.dt)},e.prototype._e=function(t){var r=this.out;if(!!r)var n=setInterval(function(){r._e(t),clearInterval(n)},this.dt)},e.prototype._c=function(){var t=this.out;if(!!t)var r=setInterval(function(){t._c(),clearInterval(r)},this.dt)},e}();function fc(e){return function(r){return new uc.Stream(new cc(e,r))}}var Sr=Rn.default=fc,Bn={};Object.defineProperty(Bn,"__esModule",{value:!0});var lc=U,pc=function(){function e(t){this.streams=t,this.type="concat",this.out=null,this.i=0}return e.prototype._start=function(t){this.out=t,this.streams[this.i]._add(this)},e.prototype._stop=function(){var t=this.streams;this.i<t.length&&t[this.i]._remove(this),this.i=0,this.out=null},e.prototype._n=function(t){var r=this.out;!r||r._n(t)},e.prototype._e=function(t){var r=this.out;!r||r._e(t)},e.prototype._c=function(){var t=this.out;if(!!t){var r=this.streams;r[this.i]._remove(this),++this.i<r.length?r[this.i]._add(this):t._c()}},e}();function hc(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new lc.Stream(new pc(e))}var $r=Bn.default=hc,Un={};Object.defineProperty(Un,"__esModule",{value:!0});var It=U,dc=function(){function e(t,r){this.dt=t,this.ins=r,this.type="debounce",this.out=null,this.id=null,this.t=It.NO}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.clearInterval()},e.prototype.clearInterval=function(){var t=this.id;t!==null&&clearInterval(t),this.id=null},e.prototype._n=function(t){var r=this,n=this.out;!n||(this.clearInterval(),this.t=t,this.id=setInterval(function(){r.clearInterval(),n._n(t),r.t=It.NO},this.dt))},e.prototype._e=function(t){var r=this.out;!r||(this.clearInterval(),r._e(t))},e.prototype._c=function(){var t=this.out;!t||(this.clearInterval(),this.t!=It.NO&&t._n(this.t),this.t=It.NO,t._c())},e}();function yc(e){return function(r){return new It.Stream(new dc(e,r))}}var ge=Un.default=yc;const Ie=typeof window!="undefined"&&window||process&&process.env||{},Ar="request",mc="BOOTSTRAP",vt="INITIALIZE",vc="HYDRATE";let Or=!0;const bt="~#~#~ABORT~#~#~";function Wn(e){const{name:t,sources:r,isolateOpts:n,stateSourceName:o="STATE"}=e;if(r&&typeof r!="object")throw new Error("Sources must be a Cycle.js sources object:",t);let i;typeof n=="string"?i={[o]:n}:n===!0?i={}:i=n;const s=typeof r=="undefined";if(typeof i=="object"){const a=u=>{const c=k(N({},e),{sources:u});return new be(c).sinks};return s?rt(a,i):rt(a,i)(r)}else return s?a=>new be(k(N({},e),{sources:a})).sinks:new be(e).sinks}class be{constructor({name:t="NO NAME",sources:r,intent:n,request:o,model:i,response:s,view:a,children:u={},components:c={},initialState:p,calculated:y,storeCalculatedInState:h=!0,DOMSourceName:d="DOM",stateSourceName:l="STATE",requestSourceName:f="HTTP"}){if(!r||typeof r!="object")throw new Error("Missing or invalid sources");this.name=t,this.sources=r,this.intent=n,this.request=o,this.model=i,this.response=s,this.view=a,this.children=u,this.components=c,this.initialState=p,this.calculated=y,this.storeCalculatedInState=h,this.DOMSourceName=d,this.stateSourceName=l,this.requestSourceName=f,this.sourceNames=Object.keys(r),this.isSubComponent=this.sourceNames.includes("props$");const m=r[l]&&r[l].stream;m&&(this.currentState=p||{},this.sources[this.stateSourceName]=new Nt(m.map(v=>(this.currentState=v,v)))),Or&&typeof this.intent=="undefined"&&typeof this.model=="undefined"&&(this.initialState=p||!0,this.intent=v=>({__NOOP_ACTION__:$.never()}),this.model={__NOOP_ACTION__:v=>v}),Or=!1,this.log=_c(t),this.initIntent$(),this.initAction$(),this.initResponse$(),this.initState(),this.initModel$(),this.initSendResponse$(),this.initChildren$(),this.initSubComponentSink$(),this.initSubComponentsRendered$(),this.initVdom$(),this.initSinks()}initIntent$(){if(!!this.intent){if(typeof this.intent!="function")throw new Error("Intent must be a function");if(this.intent$=this.intent(this.sources),!(this.intent$ instanceof K)&&typeof this.intent$!="object")throw new Error("Intent must return either an action$ stream or map of event streams")}}initAction$(){const t=this.sources&&this.sources[this.requestSourceName]||null;if(!this.intent$){this.action$=$.never();return}let r;if(this.intent$ instanceof K)r=this.intent$;else{const a=Object.entries(this.intent$).map(([u,c])=>c.map(p=>({type:u,data:p})));r=$.merge($.never(),...a)}const n=r instanceof K?r:r.apply&&r(this.sources)||$.never(),o=$r($.of({type:mc}),n).compose(Sr(10));let i;t&&typeof t.select=="function"?i=t.select("initial").flatten():i=$.never();const s=i.map(a=>({type:vc,data:a}));this.action$=$.merge(o,s).compose(this.log(({type:a})=>`Action triggered: <${a}>`))}initResponse$(){if(typeof this.request=="undefined")return;if(typeof this.request!="object")throw new Error("The request parameter must be an object");const t=this.sources[this.requestSourceName],n=Object.entries(this.request).reduce((o,[i,s])=>{const a=i.toLowerCase();if(typeof t[a]!="function")throw new Error("Invalid method in request object:",i);const c=Object.entries(s).reduce((y,[h,d])=>{const l=`[${a.toUpperCase()}]:${h||"none"}`,f=typeof d;if(f==="undefined")throw new Error(`Action for '${h}' route in request object not specified`);if(f!=="string"&&f!=="function")throw new Error(`Invalid action for '${h}' route: expecting string or function`);const m=f==="function"?"[ FUNCTION ]":`< ${d} >`;console.log(`[${this.name}] Adding ${this.requestSourceName} route:`,a.toUpperCase(),`'${h}' <${m}>`);const v=t[a](h).compose(Qt((b,w)=>b.id==w.id)).map(b=>{if(!b||!b.id)throw new Error(`No id found in request: ${l}`);try{const w=b.id,S=b.params,A=b.body,O=b.cookies,E=f==="function"?"FUNCTION":d,P={params:S,body:A,cookies:O,req:b},j={type:E,data:A,req:b,_reqId:w,_action:E},T=new Date().toISOString(),D=b.get?b.get("host"):"0.0.0.0";if(console.log(`${T} ${D} ${b.method} ${b.url}`),Ie.DEBUG&&this.action$.setDebugListener({next:({type:M})=>console.log(`[${this.name}] Action from ${this.requestSourceName} request: <${M}>`)}),f==="function"){const M=this.addCalculated(this.currentState),W=d(M,b);return $.of(k(N({},j),{data:W}))}else{this.action$.shamefullySendNext(j);const W=Object.entries(this.sources).reduce((nt,[re,ne])=>{if(!ne||typeof ne[Ar]!="function")return nt;const oo=ne[Ar](w);return[...nt,oo]},[]);return $.merge(...W)}}catch(w){console.error(w)}}).flatten();return[...y,v]},[]),p=$.merge(...c);return[...o,p]},[]);if(this.response$=$.merge(...n).compose(this.log(o=>o._action?`[${this.requestSourceName}] response data received for Action: <${o._action}>`:`[${this.requestSourceName}] response data received from FUNCTION`)),typeof this.response!="undefined"&&typeof this.response$=="undefined")throw new Error("Cannot have a response parameter without a request parameter")}initState(){this.model!=null&&(this.model[vt]===void 0?this.model[vt]={[this.stateSourceName]:(t,r)=>N({},this.addCalculated(r))}:Object.keys(this.model[vt]).forEach(t=>{t!==this.stateSourceName&&(console.warn(`${vt} can only be used with the ${this.stateSourceName} source... disregarding ${t}`),delete this.model[vt][t])}))}initModel$(){if(typeof this.model=="undefined"){this.model$=this.sourceNames.reduce((u,c)=>(u[c]=$.never(),u),{});return}const t={type:vt,data:this.initialState},r=this.initialState?$r($.of(t),this.action$).compose(Sr(0)):this.action$,n=this.makeOnAction(r,!0,this.action$),o=this.makeOnAction(this.action$,!1,this.action$),i=Object.entries(this.model),s={};i.forEach(u=>{let[c,p]=u;if(typeof p=="function"&&(p={[this.stateSourceName]:p}),typeof p!="object")throw new Error(`Entry for each action must be an object: ${this.name} ${c}`);Object.entries(p).forEach(h=>{const[d,l]=h,f=d==this.stateSourceName,b=(f?n:o)(c,l).compose(this.log(w=>{if(f)return`State reducer added: <${c}>`;{const S=w&&(w.type||w.command||w.name||w.key||Array.isArray(w)&&"Array"||w);return`Data sent to [${d}]: <${c}> ${S}`}}));Array.isArray(s[d])?s[d].push(b):s[d]=[b]})});const a=Object.entries(s).reduce((u,c)=>{const[p,y]=c;return u[p]=$.merge($.never(),...y),u},{});this.model$=a}initSendResponse$(){const t=typeof this.response;if(t!="function"&&t!="undefined")throw new Error("The response parameter must be a function");if(t=="undefined"){this.response$&&this.response$.subscribe({next:this.log(({_reqId:s,_action:a})=>`Unhandled response for request: ${a} ${s}`)}),this.sendResponse$=$.never();return}const r={select:s=>typeof s=="undefined"?this.response$:(Array.isArray(s)||(s=[s]),this.response$.filter(({_action:a})=>s.length>0?a==="FUNCTION"||s.includes(a):!0))},n=this.response(r);if(typeof n!="object")throw new Error("The response function must return an object");const i=Object.entries(n).reduce((s,[a,u])=>{const c=u.map(({_reqId:p,_action:y,data:h})=>{if(!p)throw new Error(`No request id found for response for: ${a}`);return{_reqId:p,_action:y,command:a,data:h}});return[...s,c]},[]);this.sendResponse$=$.merge(...i).compose(this.log(({_reqId:s,_action:a})=>`[${this.requestSourceName}] response sent for: <${a}>`))}initChildren$(){const t=this.sourceNames.reduce((r,n)=>(n==this.DOMSourceName?r[n]={}:r[n]=[],r),{});this.children$=Object.entries(this.children).reduce((r,[n,o])=>{const i=o(this.sources);return this.sourceNames.forEach(s=>{s==this.DOMSourceName?r[s][n]=i[s]:r[s].push(i[s])}),r},t)}initSubComponentSink$(){const t=$.create({start:r=>{this.newSubComponentSinks=r.next.bind(r)},stop:r=>{}});t.subscribe({next:r=>r}),this.subComponentSink$=t.filter(r=>Object.keys(r).length>0)}initSubComponentsRendered$(){const t=$.create({start:r=>{this.subComponentsRendered=r.next.bind(r)},stop:r=>{}});this.subComponentsRendered$=t.startWith(null)}initVdom$(){if(typeof this.view!="function"){this.vdom$=$.of(null);return}const t=this.collectRenderParameters();this.vdom$=t.map(this.view).map(r=>r||{sel:"div",data:{},children:[]}).compose(this.instantiateSubComponents.bind(this)).filter(r=>r!==void 0).compose(this.renderVdom.bind(this))}initSinks(){this.sinks=this.sourceNames.reduce((t,r)=>{if(r==this.DOMSourceName)return t;const n=this.subComponentSink$?this.subComponentSink$.map(o=>o[r]).filter(o=>!!o).flatten():$.never();return r===this.stateSourceName?t[r]=$.merge(this.model$[r]||$.never(),n,this.sources[this.stateSourceName].stream.filter(o=>!1),...this.children$[r]):t[r]=$.merge(this.model$[r]||$.never(),n,...this.children$[r]),t},{}),this.sinks[this.DOMSourceName]=this.vdom$,this.sinks[this.requestSourceName]=$.merge(this.sendResponse$,this.sinks[this.requestSourceName])}makeOnAction(t,r=!0,n){return n=n||t,(o,i)=>{const s=t.filter(({type:u})=>u==o);let a;if(typeof i=="function")a=s.map(u=>{const c=(y,h)=>{const d=u._reqId||u.req&&u.req.id,l=d?typeof h=="object"?k(N({},h),{_reqId:d,_action:o}):{data:h,_reqId:d,_action:o}:h;setTimeout(()=>{n.shamefullySendNext({type:y,data:l})},10)};let p=u.data;if(p&&p.data&&p._reqId&&(p=p.data),r)return y=>{const h=this.isSubComponent?this.currentState:y,d=this.addCalculated(h),l=i(d,p,c,u.req);return l==bt?h:this.cleanupCalculated(l)};{const y=this.addCalculated(this.currentState),h=i(y,p,c,u.req),d=typeof h,l=u._reqId||u.req&&u.req.id;if(["string","number","boolean","function"].includes(d))return h;if(d=="object")return k(N({},h),{_reqId:l,_action:o});if(d=="undefined")return console.warn(`'undefined' value sent to ${o}`),h;throw new Error(`Invalid reducer type for ${o} ${d}`)}}).filter(u=>u!=bt);else if(i===void 0||i===!0)a=s.map(({data:u})=>u);else{const u=i;a=s.mapTo(u)}return a}}addCalculated(t){if(!this.calculated||typeof t!="object"||t instanceof Array)return t;if(typeof this.calculated!="object")throw new Error("'calculated' parameter must be an object mapping calculated state field named to functions");const n=Object.entries(this.calculated).reduce((o,[i,s])=>{if(typeof s!="function")throw new Error(`Missing or invalid calculator function for calculated field '${i}`);try{o[i]=s(t)}catch(a){console.warn(`Calculated field '${i}' threw an error during calculation: ${a.message}`)}return o},{});return N(N({},t),n)}cleanupCalculated(t){if(!t||typeof t!="object"||t instanceof Array)return t;const u=this.storeCalculatedInState?this.addCalculated(t):t,{__props:n,__children:o}=u,i=dt(u,["__props","__children"]),s=N({},i);return this.calculated&&Object.keys(this.calculated).forEach(c=>{this.initialState&&typeof this.initialState[c]!="undefined"?s[c]=this.initialState[c]:delete s[c]}),s}collectRenderParameters(){const t=this.sources[this.stateSourceName],r=N({},this.children$[this.DOMSourceName]),n=t&&t.isolateSource(t,{get:u=>this.addCalculated(u)}),o=n&&n.stream||$.never();r.state=o,r[this.stateSourceName]=o,this.sources.props$&&(r.__props=this.sources.props$),this.sources.children$&&(r.__children=this.sources.children$);const i=[],s=[];return Object.entries(r).forEach(([u,c])=>{i.push(u),s.push(c)}),$.combine(...s).map(u=>i.reduce((c,p,y)=>(c[p]=u[y],c),{}))}instantiateSubComponents(t){return t.fold((r,n)=>{const o=Object.keys(this.components),i=Gn(n,o),s=Object.entries(i),a={"::ROOT::":n};if(s.length===0)return a;const u={},c=s.reduce((y,[h,d])=>{const l=d.data,f=l.props||{},m=d.children||[],v=l.isCollection||!1,b=l.isSwitchable||!1;if(r[h]){const E=r[h];return y[h]=E,E.props$.shamefullySendNext(f),E.children$.shamefullySendNext(m),y}const w=$.create().startWith(f),S=$.create().startWith(m);let A;v?A=this.instantiateCollection.bind(this):b?A=this.instantiateSwitchable.bind(this):A=this.instantiateCustomComponent.bind(this);const O=A(d,w,S);return O[this.DOMSourceName]=O[this.DOMSourceName]?this.makeCoordinatedSubComponentDomSink(O[this.DOMSourceName]):$.never(),y[h]={sink$:O,props$:w,children$:S},Object.entries(O).map(([E,P])=>{u[E]||(u[E]=[]),E!==this.DOMSourceName&&u[E].push(P)}),y},a),p=Object.entries(u).reduce((y,[h,d])=>(d.length===0||(y[h]=d.length===1?d[0]:$.merge(...d)),y),{});return this.newSubComponentSinks(p),c},{})}makeCoordinatedSubComponentDomSink(t){const r=t.remember(),n=(i,s)=>JSON.stringify(i)===JSON.stringify(s);return this.sources[this.stateSourceName].stream.compose(Qt(n)).map(i=>r).compose(ge(10)).flatten().debug(i=>this.subComponentsRendered()).remember()}instantiateCollection(t,r,n){const i=t.data.props||{};t.children;const s=$.combine(this.sources[this.stateSourceName].stream.startWith(this.currentState),r,n).map(([f,m,v])=>typeof f=="object"?k(N({},this.addCalculated(f)),{__props:m,__children:v}):{value:f,__props:m,__children:v}),a=new Nt(s),u=i.from;let c;const p=typeof i.of=="function"?i.of:this.components[i.of],y=f=>{if(typeof f=="object"){const m=f,{__props:v,__children:b}=m;return dt(m,["__props","__children"])}else return f},h={get:f=>{const{__props:m,__children:v}=f;return Array.isArray(f[u])?f[u].map(b=>typeof b=="object"?k(N({},b),{__props:m,__children:v}):{value:b,__props:m,__children:v}):[]},set:(f,m)=>this.calculated&&u in this.calculated?(console.warn(`Collection sub-component of ${this.name} attempted to update state on a calculated field '${u}': Update ignored`),f):k(N({},f),{[u]:m.map(y)})};u===void 0?c={get:f=>!(f instanceof Array)&&f.value&&f.value instanceof Array?f.value:f,set:(f,m)=>(console.log("COLL SET",m),m)}:typeof u=="string"?typeof this.currentState=="object"?!(u in this.currentState)&&!(u in this.calculated)?(console.error(`Collection component in ${this.name} is attempting to use non-existent state property '${u}': To fix this error, specify a valid array property on the state.  Attempting to use parent component state.`),c=void 0):(Array.isArray(this.currentState[u])||console.warn(`State property '${u}' in collection comopnent of ${this.name} is not an array: No components will be instantiated in the collection.`),c=h):(Array.isArray(this.currentState[u])||console.warn(`State property '${u}' in collection component of ${this.name} is not an array: No components will be instantiated in the collection.`),c=h):typeof u=="object"?typeof u.get!="function"?(console.error(`Collection component in ${this.name} has an invalid 'from' field: Expecting 'undefined', a string indicating an array property in the state, or an object with 'get' and 'set' functions for retrieving and setting child state from the current state. Attempting to use parent component state.`),c=void 0):c={get:u.get,set:u.set}:(console.error(`Collection component in ${this.name} has an invalid 'from' field: Expecting 'undefined', a string indicating an array property in the state, or an object with 'get' and 'set' functions for retrieving and setting child state from the current state. Attempting to use parent component state.`),c=void 0);const d=k(N({},this.sources),{[this.stateSourceName]:a,props$:r,children$:n}),l=Fa(p,c,{container:null})(d);if(typeof l!="object")throw new Error("Invalid sinks returned from component factory of collection element");return l}instantiateSwitchable(t,r,n){const i=t.data.props||{};t.children;const s=$.combine(this.sources[this.stateSourceName].stream.startWith(this.currentState),r,n).map(([f,m,v])=>typeof f=="object"?k(N({},this.addCalculated(f)),{__props:m,__children:v}):{value:f,__props:m,__children:v}),a=new Nt(s),u=i.state;let c;const p={get:f=>{const{__props:m,__children:v}=f;return typeof f[u]=="object"&&!(f[u]instanceof Array)?k(N({},f[u]),{__props:m,__children:v}):{value:f[u],__props:m,__children:v}},set:(f,m)=>{if(this.calculated&&u in this.calculated)return console.warn(`Switchable sub-component of ${this.name} attempted to update state on a calculated field '${u}': Update ignored`),f;if(console.log("SWITCH SET",m),typeof m!="object"||m instanceof Array)return k(N({},f),{[u]:m});const S=m,{__props:v,__children:b}=S,w=dt(S,["__props","__children"]);return k(N({},f),{[u]:w})}},y={get:f=>f,set:(f,m)=>{if(typeof m!="object"||m instanceof Array)return m;const S=m,{__props:v,__children:b}=S;return dt(S,["__props","__children"])}};typeof u=="undefined"?c=y:typeof u=="string"?c=p:typeof u=="object"?typeof u.get!="function"?(console.error(`Switchable component in ${this.name} has an invalid 'state' field: Expecting 'undefined', a string indicating an array property in the state, or an object with 'get' and 'set' functions for retrieving and setting sub-component state from the current state. Attempting to use parent component state.`),c=y):c={get:u.get,set:u.set}:(console.error(`Invalid state provided to switchable sub-component of ${this.name}: Expecting string, object, or undefined, but found ${typeof u}. Attempting to use parent component state.`),c=y);const h=i.of,d=k(N({},this.sources),{[this.stateSourceName]:a,props$:r,children$:n}),l=rt(ac(h,r.map(f=>f.current)),{[this.stateSourceName]:c})(d);if(typeof l!="object")throw new Error("Invalid sinks returned from component factory of switchable element");return l}instantiateCustomComponent(t,r,n){const o=t.sel,s=t.data.props||{};t.children;const a=$.combine(this.sources[this.stateSourceName].stream.startWith(this.currentState),r,n).map(([m,v,b])=>typeof m=="object"?k(N({},this.addCalculated(m)),{__props:v,__children:b}):{value:m,__props:v,__children:b}),u=new Nt(a),c=s.state,p=o==="sygnal-factory"?s.sygnalFactory:this.components[o]||s.sygnalFactory;if(!p)throw o==="sygnal-factory"?new Error("Component not found on element with Capitalized selector and nameless function: JSX transpilation replaces selectors starting with upper case letters with functions in-scope with the same name, Sygnal cannot see the name of the resulting component."):new Error(`Component not found: ${o}`);let y;const h={get:m=>{const{__props:v,__children:b}=m;return typeof m[c]=="object"?k(N({},m[c]),{__props:v,__children:b}):{value:m[c],__props:v,__children:b}},set:(m,v)=>this.calculated&&c in this.calculated?(console.warn(`Sub-component of ${this.name} attempted to update state on a calculated field '${c}': Update ignored`),m):k(N({},m),{[c]:v})},d={get:m=>m,set:(m,v)=>{if(typeof v!="object"||v instanceof Array)return v;const A=v,{__props:b,__children:w}=A;return dt(A,["__props","__children"])}};typeof c=="undefined"?y=d:typeof c=="string"?y=h:typeof c=="object"?typeof c.get!="function"?(console.error(`Sub-component in ${this.name} has an invalid 'state' field: Expecting 'undefined', a string indicating an array property in the state, or an object with 'get' and 'set' functions for retrieving and setting sub-component state from the current state. Attempting to use parent component state.`),y=d):y={get:c.get,set:c.set}:(console.error(`Invalid state provided to sub-component of ${this.name}: Expecting string, object, or undefined, but found ${typeof c}. Attempting to use parent component state.`),y=d);const l=k(N({},this.sources),{[this.stateSourceName]:u,props$:r,children$:n}),f=rt(p,{[this.stateSourceName]:y})(l);if(typeof f!="object"){const m=o==="sygnal-factory"?"custom element":o;throw new Error("Invalid sinks returned from component factory:",m)}return f}renderVdom(t){return $.combine(this.subComponentsRendered$,t).compose(ge(5)).map(([r,n])=>{const o=Object.keys(this.components),i=n["::ROOT::"],s=Object.entries(n).filter(([c])=>c!=="::ROOT::");if(s.length===0)return $.of(i);const a=[],u=s.map(([c,p])=>(a.push(c),p.sink$[this.DOMSourceName].startWith(void 0)));return u.length===0?$.of(i):$.combine(...u).compose(ge(10)).map(c=>{const p=c.reduce((d,l,f)=>(d[a[f]]=l,d),{}),y=Hn(i);return qn(y,p,o)})}).flatten().filter(r=>!!r).remember().compose(this.log("View Rendered"))}}function _c(e){return function(t){const r=typeof t=="function"?t:n=>t;return n=>n.debug(o=>{(Ie.DEBUG=="true"||Ie.DEBUG===!0)&&console.log(`[${e}] ${r(o)}`)})}}function Gn(e,t,r=0,n=0){var y,h,d,l;if(!e)return{};if((y=e.data)!=null&&y.componentsProcessed)return{};r===0&&(e.data.componentsProcessed=!0);const o=e.sel,i=o&&o.toLowerCase()==="collection",s=o&&o.toLowerCase()==="switchable",a=o&&["collection","switchable","sygnal-factory",...t].includes(e.sel)||typeof((d=(h=e.data)==null?void 0:h.props)==null?void 0:d.sygnalFactory)=="function",u=e.data&&e.data.props||{};e.data&&e.data.attrs;const c=e.children||[];let p={};if(a){const f=zn(e,r,n);if(i){if(!u.of)throw new Error("Collection element missing required 'component' property");if(typeof u.of!="string"&&typeof u.of!="function")throw new Error(`Invalid 'component' property of collection element: found ${typeof u.of} requires string or component factory function`);if(typeof u.of!="function"&&!t.includes(u.of))throw new Error(`Specified component for collection not found: ${u.of}`);typeof u.from!="undefined"&&!(typeof u.from=="string"||Array.isArray(u.from))&&console.warn(`No valid array found in the 'value' property of collection ${typeof u.of=="string"?u.of:"function component"}: no collection components will be created`),e.data.isCollection=!0,(l=e.data).props||(l.props={})}else if(s){if(!u.of)throw new Error("Switchable element missing required 'of' property");if(typeof u.of!="object")throw new Error(`Invalid 'components' property of switchable element: found ${typeof u.of} requires object mapping names to component factories`);if(!Object.values(u.of).every(b=>typeof b=="function"))throw new Error("One or more components provided to switchable element is not a valid component factory");if(!u.current||typeof u.current!="string"&&typeof u.current!="function")throw new Error(`Missing or invalid 'current' property for switchable element: found '${typeof u.current}' requires string or function`);if(!Object.keys(u.of).includes(u.current))throw new Error(`Component '${u.current}' not found in switchable element`);e.data.isSwitchable=!0}p[f]=e}return c.length>0&&c.map((f,m)=>Gn(f,t,r+1,m)).forEach(f=>{Object.entries(f).forEach(([m,v])=>p[m]=v)}),p}function qn(e,t,r,n=0,o){var p,y,h,d,l;if(!e)return;if((p=e.data)!=null&&p.componentsInjected)return e;n===0&&e.data&&(e.data.componentsInjected=!0);const i=e.sel||"NO SELECTOR",s=["collection","switchable","sygnal-factory",...r].includes(i)||typeof((h=(y=e.data)==null?void 0:y.props)==null?void 0:h.sygnalFactory)=="function",a=(d=e==null?void 0:e.data)==null?void 0:d.isCollection,u=(l=e==null?void 0:e.data)==null?void 0:l.isSwitchable;e.data&&e.data.props;const c=e.children||[];if(s){const f=zn(e,n,o),m=t[f];return a?(e.sel="div",e.children=Array.isArray(m)?m:[m],e):m}else return c.length>0&&(e.children=c.map((f,m)=>qn(f,t,r,n+1,m)).flat()),e}const Er=new Map;function zn(e,t,r){const n=e.sel,o=typeof n=="string"?n:"functionComponent";let i=Er.get(n);if(!i){const p=Date.now(),y=Math.floor(Math.random()*1e4);i=`${p}-${y}`,Er.set(n,i)}const s=`${i}-${t}-${r}`,a=e.data&&e.data.props||{},u=a.id&&JSON.stringify(a.id)||s;return`${o}::${u}`}function Hn(e){return typeof e=="undefined"?e:k(N({},e),{children:Array.isArray(e.children)?e.children.map(Hn):void 0,data:e.data&&k(N({},e.data),{componentsInjected:!1})})}var Be={};Object.defineProperty(Be,"__esModule",{value:!0});function Vn(){var e;return typeof window!="undefined"?e=window:typeof H!="undefined"?e=H:e=this,e.Cyclejs=e.Cyclejs||{},e=e.Cyclejs,e.adaptStream=e.adaptStream||function(t){return t},e}function gc(e){Vn().adaptStream=e}Be.setAdapt=gc;function bc(e){return Vn().adaptStream(e)}var wc=Be.adapt=bc;function Sc(e){const t=new EventTarget;return e.subscribe({next:r=>t.dispatchEvent(new CustomEvent("data",{detail:r}))}),{select:r=>{const n=!r,o=Array.isArray(r)?r:[r];let i;const s=$.create({start:a=>{i=({detail:u})=>{const c=u&&u.data||null;(n||o.includes(u.type))&&a.next(c)},t.addEventListener("data",i)},stop:a=>t.removeEventListener("data",i)});return wc(s)}}}function $c(e){e.addListener({next:t=>{console.log(t)}})}function Ac(e,t={},r={}){const{mountPoint:n="#root",fragments:o=!0}=r,i=ls(e,"STATE"),s={EVENTS:Sc,DOM:ja(n,{snabbdomOptions:{experimental:{fragments:o}}}),LOG:$c},a=N(N({},s),t);return Ss(i,a)}function Oc(...e){return e.reduce((t,r)=>(typeof r=="string"&&!t.includes(r)?t.push(...Kn(r)):Array.isArray(r)?t.push(...Ec(r)):typeof r=="object"&&t.push(...Pc(r)),t),[]).join(" ")}function Jn(e){return/^[a-zA-Z0-9-_]+$/.test(e)}function Kn(e){if(typeof e!="string")throw new Error("Class name must be a string");return e.trim().split(" ").reduce((t,r)=>{if(r.trim().length===0)return t;if(!Jn(r))throw new Error(`${r} is not a valid CSS class name`);return t.push(r),t},[])}function Ec(e){return e.map(Kn).flat()}function Pc(e){return Object.entries(e).filter(([r,n])=>typeof n=="function"?n():!!n).map(([r,n])=>{const o=r.trim();if(!Jn(o))throw new Error(`${o} is not a valid CSS class name`);return o})}var Yn={};Object.defineProperty(Yn,"__esModule",{value:!0});var Nc=U,Cc=function(){function e(t,r){this.dt=t,this.ins=r,this.type="throttle",this.out=null,this.id=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.id=null},e.prototype.clearInterval=function(){var t=this.id;t!==null&&clearInterval(t),this.id=null},e.prototype._n=function(t){var r=this,n=this.out;!n||this.id||(n._n(t),this.id=setInterval(function(){r.clearInterval()},this.dt))},e.prototype._e=function(t){var r=this.out;!r||(this.clearInterval(),r._e(t))},e.prototype._c=function(){var t=this.out;!t||(this.clearInterval(),t._c())},e}();function Ic(e){return function(r){return new Nc.Stream(new Cc(e,r))}}Yn.default=Ic;var Et={},jc=H&&H.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)n[o]=i[s];return n};Object.defineProperty(Et,"__esModule",{value:!0});Et.SampleCombineOperator=Et.SampleCombineListener=void 0;var kc=U,et={},Xn=function(){function e(t,r){this.i=t,this.p=r,r.ils[t]=this}return e.prototype._n=function(t){var r=this.p;r.out!==et&&r.up(t,this.i)},e.prototype._e=function(t){this.p._e(t)},e.prototype._c=function(){this.p.down(this.i,this)},e}();Et.SampleCombineListener=Xn;var Zn=function(){function e(t,r){this.type="sampleCombine",this.ins=t,this.others=r,this.out=et,this.ils=[],this.Nn=0,this.vals=[]}return e.prototype._start=function(t){this.out=t;for(var r=this.others,n=this.Nn=r.length,o=this.vals=new Array(n),i=0;i<n;i++)o[i]=et,r[i]._add(new Xn(i,this));this.ins._add(this)},e.prototype._stop=function(){var t=this.others,r=t.length,n=this.ils;this.ins._remove(this);for(var o=0;o<r;o++)t[o]._remove(n[o]);this.out=et,this.vals=[],this.ils=[]},e.prototype._n=function(t){var r=this.out;r!==et&&(this.Nn>0||r._n(jc([t],this.vals)))},e.prototype._e=function(t){var r=this.out;r!==et&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==et&&t._c()},e.prototype.up=function(t,r){var n=this.vals[r];this.Nn>0&&n===et&&this.Nn--,this.vals[r]=t},e.prototype.down=function(t,r){this.others[t]._remove(r)},e}();Et.SampleCombineOperator=Zn;var Qn;Qn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return function(o){return new kc.Stream(new Zn(o,t))}};Et.default=Qn;var zt=Object.prototype.hasOwnProperty,to=Object.prototype.toString,Pr=Object.defineProperty,Nr=Object.getOwnPropertyDescriptor,Cr=function(t){return typeof Array.isArray=="function"?Array.isArray(t):to.call(t)==="[object Array]"},Ir=function(t){if(!t||to.call(t)!=="[object Object]")return!1;var r=zt.call(t,"constructor"),n=t.constructor&&t.constructor.prototype&&zt.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!r&&!n)return!1;var o;for(o in t);return typeof o=="undefined"||zt.call(t,o)},jr=function(t,r){Pr&&r.name==="__proto__"?Pr(t,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):t[r.name]=r.newValue},kr=function(t,r){if(r==="__proto__")if(zt.call(t,r)){if(Nr)return Nr(t,r).value}else return;return t[r]},eo=function e(){var t,r,n,o,i,s,a=arguments[0],u=1,c=arguments.length,p=!1;for(typeof a=="boolean"&&(p=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<c;++u)if(t=arguments[u],t!=null)for(r in t)n=kr(a,r),o=kr(t,r),a!==o&&(p&&o&&(Ir(o)||(i=Cr(o)))?(i?(i=!1,s=n&&Cr(n)?n:[]):s=n&&Ir(n)?n:{},jr(a,{name:r,newValue:e(p,s,o)})):typeof o!="undefined"&&jr(a,{name:r,newValue:o}));return a};const xc=e=>e===void 0,Dc=e=>typeof e=="number",Tc=e=>typeof e=="string",ro=e=>Tc(e)||Dc(e),Mc=e=>Array.isArray(e),Fc=e=>typeof e=="object"&&e!==null,Lc=e=>typeof e=="function",Rc=e=>Fc(e)&&"sel"in e&&"data"in e&&"children"in e&&"text"in e,Bc={svg:1,circle:1,ellipse:1,line:1,polygon:1,polyline:1,rect:1,g:1,path:1,text:1},Uc=e=>e.sel in Bc,je=(...e)=>eo(!0,...e),Wc=(...e)=>eo(!1,...e),no=(e,t,r)=>{let n=r;for(let o=0;o<e.length;o++){const i=e[o];Mc(i)?n=no(i,t,n):n=t(n,i)}return n},Ue=(e,t)=>Object.keys(e).map(r=>t(r,e[r])).reduce((r,n)=>je(r,n),{}),Gc=(e,t)=>Ue(e,(r,n)=>{const o=r.indexOf("-");if(o>-1&&t[r.slice(0,o)]!==void 0){const i={[r.slice(o+1)]:n};return{[r.slice(0,o)]:i}}return{[r]:n}}),xr=(e,t)=>Ue(t,(r,n)=>r!==e?{[r]:n}:{}),qc=e=>ro(e)?{text:e,sel:void 0,data:void 0,children:void 0,elm:void 0,key:void 0}:void 0,We=e=>Uc(e)?Wc(e,{data:xr("props",je(e.data,{ns:"http://www.w3.org/2000/svg",attrs:xr("className",je(e.data.props,{class:e.data.props?e.data.props.className:void 0}))}))},{children:xc(e.children)?void 0:e.children.map(t=>We(t))}):e,ot={for:"attrs",role:"attrs",tabindex:"attrs","aria-*":"attrs",key:null},zc=(e,t)=>Ue(e,(r,n)=>{const o={[r]:n};if(ot[r]&&t[ot[r]]!==void 0)return{[ot[r]]:o};if(ot[r]===null)return{};const i=Object.keys(ot);for(let s=0;s<i.length;s++){const a=i[s];if(a.charAt(a.length-1)==="*"&&r.indexOf(a.slice(0,-1))===0&&t[ot[a]]!==void 0)return{[ot[a]]:o}}return t[r]!==void 0?{[t[r]?t[r]:r]:n}:t.props!==void 0?{props:o}:o}),Hc=(e,t)=>We(zc(Gc(e,t),t)),Vc=e=>e.length>1||!ro(e[0])?void 0:e[0].toString(),Jc=e=>no(e,(t,r)=>{const n=Rc(r)?r:qc(r);return t.push(n),t},[]),Kc={attrs:"",props:"",class:"",data:"dataset",style:"",hook:"",on:""},Yc=e=>(t,r,...n)=>{if(typeof t=="undefined"&&(t="UNDEFINED",cnosole.error("JSX Error: Capitalized HTML element without corresponding Sygnal factory.  Components with names where the first letter is capital MUST be defined or included at the parent component's file scope.")),Lc(t)){if(t.name==="Fragment")return t(r||{},n);const i=t;t=t.name||"sygnal-factory",r||(r={}),r.sygnalFactory=i}const o=Vc(n);return We({sel:t,data:r?Hc(r,e):{},children:typeof o!="undefined"?void 0:Jc(n),text:o,elm:void 0,key:r?r.key:void 0})},x=Yc(Kc);function Xc(e,t,r,n,o){const i=t===void 0?void 0:t.key;return{sel:e,data:t,children:r,text:n,elm:o,key:i}}Xc("",{},[],void 0,void 0);typeof window!="undefined"&&window.requestAnimationFrame.bind(window);const Zc={0:"1111110",1:"0110000",2:"1101101",3:"1111001",4:"0110011",5:"1011011",6:"1011111",7:"1110000",8:"1111111",9:"1111011","-":"0000001",".":"0000000"};var Dr=Wn({name:"DIGIT",calculated:{segments:e=>Zc[e.digit].split("").map(t=>t==="1")},view:({state:e})=>{let{digit:t,segments:r,fill:n,background:o,padding:i,skew:s,transition:a,id:u}=e;if(i||(i="0.1em"),o||(o="transparent"),t===".")return x("span",{style:{fontSize:`calc(1em + ${i} * 2)`,color:n}},".");const c=y=>Oc("segment",`segment-${y}`,{on:r[y]}),p={fill:n,transition:a};return x("div",{className:"digit",style:{height:"1em",backgroundColor:o,padding:i,transform:`skew(${s||"0"})`},id:u},x("svg",{style:{height:"1em"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 292.06 585.99"},x("defs",null,x("style",null,`
              .segment {opacity: 0.1;}
              .segment.on {opacity: 1;}
            `)),x("polygon",{style:p,className:c(0),points:"230.47 58.07 61.27 58.23 61.27 58.07 32.39 29.04 61.27 0.15 230.47 0 259.36 29.04 230.47 57.92 230.47 58.07"}),x("polygon",{style:p,className:c(1),points:"292.06 61.95 292.06 259.88 291.9 259.88 262.87 288.76 233.98 259.88 233.98 61.95 263.02 33.07 291.9 61.95 292.06 61.95"}),x("polygon",{style:p,className:c(2),points:"292.06 325.72 292.06 523.65 291.9 523.65 262.87 552.52 233.98 523.65 233.98 325.72 263.02 296.83 291.9 325.72 292.06 325.72"}),x("polygon",{style:p,className:c(3),points:"230.47 585.84 61.27 585.99 61.27 585.84 32.39 556.8 61.27 527.92 230.47 527.76 259.36 556.8 230.47 585.68 230.47 585.84"}),x("polygon",{style:p,className:c(4),points:"58.07 325.72 58.07 523.65 57.92 523.65 28.89 552.52 0 523.65 0 325.72 29.04 296.83 57.92 325.72 58.07 325.72"}),x("polygon",{style:p,className:c(5),points:"58.07 61.95 58.07 259.88 57.92 259.88 28.89 288.76 0 259.88 0 61.95 29.04 33.07 57.92 61.95 58.07 61.95"}),x("polygon",{style:p,className:c(6),points:"230.47 321.75 61.27 321.9 61.27 321.75 32.39 292.72 61.27 263.83 230.47 263.68 259.36 292.72 230.47 321.59 230.47 321.75"})))}});const Tr={"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,x:(e,t)=>e*t},Mr=["1","2","3","4","5","6","7","8","9","0"],Fr=["/","x","-","+"],Qc="AC",tf="+/-",Lr="%",Rr=".",Br="=",it="num",we="op",st="eq",Ur="-7deg",Wr="100ms",ef="#AAA",rf="#999";var nf=Wn({name:"CALCULATOR",initialState:{display:"",register:"",mode:it,operation:null},calculated:{displayFloat:e=>{const t=parseFloat(e.display);return isNaN(t)?"":t},registerFloat:e=>{const t=parseFloat(e.register);return isNaN(t)?"":t},displayDigits:e=>{const t=ef,r=Ur,n=Wr;return e.display.split("").slice(0,10).map((o,i)=>({digit:o,fill:t,skew:r,transition:n,id:"disp"+(10-e.display.length+i)}))},registerDigits:e=>{const t=rf,r=Ur,n=Wr;return e.mode===st?[]:e.register.split("").slice(0,10).map((o,i)=>({digit:o,fill:t,skew:r,transition:n,id:"reg"+(10-e.register.length+i)}))}},model:{NUMBER_INPUT:(e,t)=>{if(t==="0"&&e.display==="0")return bt;const r=e.mode===it?e.display:"",n=e.mode!==st?e.register:"",o=e.mode!==st?e.operation:"",i=r+t;return k(N({},e),{display:i,register:n,operation:o,mode:it})},ADD_DECIMAL:(e,t)=>{if(e.mode===st)return k(N({},e),{display:"0.",register:"",operation:null,mode:it});if(e.display.includes("."))return bt;if(e.display==="")return k(N({},e),{mode:it,display:"0."});const r=e.display+".";return k(N({},e),{display:r})},RUN_CALC:e=>{if(!e.operation||e.display==="")return bt;let t,r,n;e.mode===st?(t=e.register,r=e.displayFloat,n=e.registerFloat):(t=e.display,r=e.registerFloat,n=e.displayFloat);const o=Tr[e.operation](r,n).toString();return k(N({},e),{display:o,register:t,mode:st})},SET_OPERATOR:(e,t)=>{if(e.mode!==we&&e.display==="")return bt;const n=e.mode==it&&e.operation?Tr[e.operation](e.registerFloat,e.displayFloat).toString():e.display;if(e.mode===we&&e.display==="")return k(N({},e),{operation:t});const o="";return k(N({},e),{display:o,register:n,mode:we,operation:t})},CLEAR_ALL:(e,t)=>({display:"",register:"",mode:it,operation:null}),SWITCH_SIGN:(e,t)=>k(N({},e),{display:e.display[0]==="-"?e.display.slice(1):"-"+e.display}),MAKE_PERCENT:(e,t)=>k(N({},e),{display:(e.displayFloat/100).toString()})},intent:({DOM:e})=>{const t=h=>d=>d.target.dataset[h],r=h=>e.select(h).events("click").map(t("value")),n=e.select("document").events("keydown").map(h=>h.key),o=h=>d=>h.includes(d),i=n.filter(o(Mr)),s=n.filter(o([Rr])),a=n.filter(o([Br,"Enter"])),u=n.filter(o([...Fr,"*"])).map(h=>h==="*"?"x":h),c=n.filter(o(["Backspace"])),p=n.filter(o(["~"])),y=n.filter(o([Lr]));return{NUMBER_INPUT:$.merge(r(".number"),i),ADD_DECIMAL:$.merge(r(".decimal"),s),RUN_CALC:$.merge(r(".equal"),a),SET_OPERATOR:$.merge(r(".operator"),u),CLEAR_ALL:$.merge(r(".clear"),c),SWITCH_SIGN:$.merge(r(".sign"),p),MAKE_PERCENT:$.merge(r(".percent"),y)}},view:({state:e})=>{const{operation:t,mode:r}=e,n=Mr.map(s=>x("div",{className:"button number","data-value":`${s}`},s)),o=Fr.map(s=>x("div",{className:"button operator","data-value":s},s));return x("div",{className:"calculator"},x("div",{className:"display"},x("div",{className:"previous"},x("collection",{of:Dr,from:"registerDigits",className:"register-container"}),x("span",{className:"operation"},r===st?"":t)),x("collection",{of:Dr,from:"displayDigits",className:"current-container"})),x("div",{className:"keypad"},x("div",{className:"numbers"},x("div",{className:"button clear"},Qc),x("div",{className:"button sign"},tf),x("div",{className:"button percent"},Lr),n,x("div",{className:"button decimal"},Rr)),x("div",{className:"operators"},o,x("div",{className:"button equal"},Br))))}});Ac(nf);
